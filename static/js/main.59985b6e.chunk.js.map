{"version":3,"sources":["components/header.js","cookieManager.js","components/tooltip.js","components/mapart/blockSelectionAddCustom/blockSelectionAddCustom.js","images/null.png","images/textures.png","components/mapart/blockImage.js","components/mapart/blockSelection.js","components/mapart/workers/nbt.jsworker","components/mapart/greenButtons.js","components/mapart/workers/mapCanvas.jsworker","components/mapart/mapPreview.js","images/gridOverlay.png","components/mapart/autoCompleteInputBlockToAdd/autoCompleteInputBlockToAdd.js","components/mapart/bufferedNumberInput/bufferedNumberInput.js","components/mapart/mapSettings.js","components/mapart/materials.js","components/mapart/nbtReader.js","components/mapart/viewOnlineCommon/waila.js","components/mapart/viewOnline2D/viewOnline2D.js","components/mapart/viewOnline3D/pointerLockControls.js","components/mapart/viewOnline3D/viewOnline3D.js","components/mapart/mapartController.js","images/upload.png","locale/de/flag.svg","locale/ua/flag.svg","locale/en/flag.svg","locale/eo/flag.svg","locale/es/flag.svg","locale/et/flag.svg","locale/et/flag_pop.svg","locale/fr/flag.svg","locale/it/flag.svg","locale/lt/flag.svg","locale/pt/flag.svg","locale/ru/flag.svg","locale/zh-Hans/flag.svg","locale/zh-Hant/flag.svg","locale/pl/flag.svg","locale/locale.js","components/root.js","index.js"],"names":["Header","Component","constructor","arguments","state","contactInfoClassname","onContactInfoClick","event","getLocaleString","this","props","preventDefault","window","confirm","alert","setState","render","_jsxs","className","children","_jsx","href","target","rel","CookieManager","init","forEach","name","getCookie","concat","setCookie","cname","cvalue","d","Date","setTime","getTime","expires","toUTCString","document","cookie","ca","split","i","length","c","charAt","substring","indexOf","touchCookie","defaultValue","cookieValue","Tooltip","hovering","handleMouseOver","handleMouseOut","tooltipStyle","undefined","textStyleOverrides","display","onMouseOver","onMouseOut","style","tooltipText","BlockSelectionAddCustom","super","block_name","block_nbtTags","block_colourSetId","block_needsSupport","block_flammable","block_versions","E_KeyOrValue","key","value","examplesGroups","title","blocks","blockName","nbtTags","facing","half","versions","variant","type","onSettingChange_block_name","e","onSettingChange_block_nbtTags","tagIndex","keyOrValue","block_nbtTags_new","every","t","pop","push","onSettingChange_block_colourSetId","onSettingChange_block_needsSupport","currentState","onSettingChange_block_flammable","onSettingChange_block_versions","versionToToggle","block_versions_new","coloursJSON","Object","keys","supportedVersion_key","SupportedVersions","componentDidUpdate","prevProps","lastSelectedCustomBlock","loadBlockIntoForm","colourSetId","blockId","blockToLoad","blockToLoad_nbtTags","versionToLoad_nbtData","values","validVersions","find","version","nbtTag_key","nbtTag_value","entries","NBTArgs","blockToLoad_versions","supportedVersion_value","MCVersion","NBTName","supportBlockMandatory","flammable","onAddCustomBlock","onDeleteCustomBlock","examples","open","map","examplesGroup","block","outline","padding","marginBlockStart","marginBlockEnd","textAlign","disabled","_ref","tagKey","tagValue","_ref2","React","Fragment","checked","includes","setting_customBlock_name","onChange","setting_customBlock_nbtTags","_ref3","setting_customBlock_colourSetId","backgroundColor","tonesRGB","normal","join","color","_ref4","colourSet","colourName","setting_customBlock_needsSupport","setting_customBlock_flammable","setting_customBlock_versions","_ref5","block_version","block_version_checked","customBlock_submit","colSpan","width","onClick","customBlock_delete","BlockImage","props_others","isNone","isUnknown","src","IMG_Null","alt","displayName","backgroundImage","IMG_Textures","backgroundPositionX","backgroundPositionY","presetIndex","BlockSelection","getColourSetBox","optionValue_staircasing","background","MapModes","SCHEMATIC_NBT","staircaseModes","OFF","uniqueId","MAPDAT","cssRGB","CLASSIC","VALLEY","ON","dark","light","ON_UNOBTAINABLE","unobtainable","FULL_DARK","FULL_LIGHT","FULL_UNOBTAINABLE","Error","RGBArray","onChangeColourSetBlock","optionValue_version","selectedBlocks","presets","selectedPresetName","canDeletePreset","onPresetChange","onDeletePreset","onSavePreset","onSharePreset","onGetPDNPaletteClicked","handleAddCustomBlock","handleDeleteCustomBlock","presetsManagement","id","preset","localeKey","blockSelection","filter","some","cursor","position","paddingLeft","zIndex","whiteSpace","margin","GreenButtons","buttonWidth_viewOnline","buttonWidth_NBT_Joined","buttonWidth_NBT_Split","buttonWidth_Mapdat_Split","mapPreviewWorker_onFinishCallback","nbtWorker","Worker","NBTWorker","getNBT_base","workerHeader","optionValue_mapSize_x","optionValue_mapSize_y","optionValue_whereSupportBlocks","optionValue_supportBlock","optionValue_mapdatFilenameUseId","optionValue_mapdatFilenameIdStart","uploadedImage_baseFilename","currentMaterialsData","mapPreviewWorker_inProgress","downloadBlobFile","onGetViewOnlineNBT","currentSelectedBlocks","elt","terminate","resetButtonWidths","numberOfSplitsCalculated","zipFile","JSZip","t0","performance","now","onmessage","data","head","body","t1","console","log","toString","NBT_Array","whichMap_x","whichMap_y","NBT_Array_gzipped","gzip","file","generateAsync","then","content","downloadBlob","Blob","Mapdat_Bytes","Mapdat_Bytes_gzipped","postMessage","WhereSupportBlocksModes","pixelsData","maps","onViewOnlineClicked","onGetNBTClicked","onGetNBTSplitClicked","onGetMapdatSplitClicked","onGetMapdatSplitZipClicked","componentDidUpdate_shouldNBTWorkerTerminate","optionValue_modeNBTOrMapdat","optionValue_cropImage","optionValue_cropImage_zoom","optionValue_cropImage_percent_x","optionValue_cropImage_percent_y","optionValue_transparency","optionValue_transparencyTolerance","optionValue_betterColour","optionValue_dithering","optionValue_preprocessingEnabled","preProcessingValue_brightness","preProcessingValue_contrast","preProcessingValue_saturation","preProcessingValue_backgroundColourSelect","preProcessingValue_backgroundColour","uploadedImage","componentWillUnmount","buttons_mapModeConditional","Math","floor","button_donate","textDecoration","MapPreview","mapPreviewSizeScale","workerProgress","mapCanvasWorker","MapCanvasWorker","increasePreviewScale","decreasePreviewScale","canvasRef_source","createRef","canvasRef_display","fileInputRef","shouldCanvasUpdate_source","newProps","prevState","newState","propChanges","shouldCanvasUpdate_display","updateCanvas_source","updateCanvas_display","closestSmoothColourTo","colourHex","rgbGroups_input","exec","colourRGB_input","parseInt","smallestDistance","colourRGB_return","coloursRGB_colourSet","colourRGB_colourSet","colourDistance","pow","padStart","ctx_source","current","getContext","imageSmoothingEnabled","imageSmoothingQuality","clearRect","canvas","height","BackgroundColourModes","test","backgroundColour","SMOOTH","selectedBlockId","rect","fillStyle","fill","CropModes","drawImage","CENTER","MANUAL","img_width","img_height","samplingWidth","samplingHeight","samplingOffset_x","samplingOffset_y","onGetMapMaterials","onMapPreviewWorker_begin","canvasImageData","getImageData","putImageData","pixels","chunks","DitherMethods","optionValue_showGridOverlay","onFileDialogEvent","ref","backgroundSize","click","visibility","AutoCompleteInputBlockToAdd","suggestionSelected","getRelevantSuggestions","suggestions_prefix","suggestions_includes","blockNBTData","slice","startsWith","handleTextChange","newValue","replace","toLowerCase","setValue","onSuggestionClicked","suggestion","onFocus","relevantSuggestions","BufferedNumberInput","buffer","onInputChange","validators","onValidInput","newValue_buffer","newValue_int","validator","min","max","step","MapSettings","onOptionChange_version","onOptionChange_mapSize_x","onOptionChange_mapSize_y","onOptionChange_modeNBTOrMapdat","onOptionChange_cropImage","onOptionChange_cropImage_zoom","onOptionChange_cropImage_percent_x","onOptionChange_cropImage_percent_y","onOptionChange_showGridOverlay","onOptionChange_staircasing","onOptionChange_WhereSupportBlocks","setOption_SupportBlock","onOptionChange_transparency","onOptionChange_transparencyTolerance","onOptionChange_mapdatFilenameUseId","onOptionChange_mapdatFilenameIdStart","onOptionChange_BetterColour","onOptionChange_dithering","onOptionChange_PreProcessingEnabled","onOptionChange_PreProcessingBrightness","onOptionChange_PreProcessingContrast","onOptionChange_PreProcessingSaturation","onOptionChange_PreProcessingBackgroundColourSelect","onOptionChange_PreProcessingBackgroundColour","optionValue_extras_moreStaircasingOptions","onOptionChange_extras_moreStaircasingOptions","setting_mode","mapMode","setting_version","supportedVersion","setting_mapSize","isNaN","setting_crop","cropMode","setting_crop_zoom","setting_crop_percent_x","setting_crop_percent_y","settingGroup_cropping","setting_grid","setting_staircasing","staircaseMode","extra","settings_mapModeConditional","whereSupportBlocksMode","setting_transparency","setting_transparencyTolerance","settingGroup_transparency","setting_mapdatFilenameUseId","setting_mapdatFilenameIdStart","settingGroup_mapdatFilename","setting_betterColour","setting_dithering","ditherMethodKey","setting_preprocessing","setting_preprocessing_brightness","setting_preprocessing_contrast","setting_preprocessing_saturation","setting_preprocessing_background","backgroundColourMode","setting_preprocessing_backgroundColour","settingGroup_preprocessing","setting_extras_moreStaircasingOptions","settingGroup_extras","Materials","onlyMaxPerSplit","chunksToDisplay","allMaterials","rowInput","columnInput","alphaColorIdx","onOnlyMaxPerSplitChange","onDisplayAllChange","onResetList","onAddChunkToList","chunkCoords","row","column","updatedChunksToDisplay","chunkExists","onRowChanged","onColumnChanged","displayChunkMaterials","materialsTotal","getNewMaterialsList","addChunk","displayAllMaterials","curRow","curCol","rowOfChunks","chunk","formatMaterialCount","count","numberOfStacks","remainder","numberOfShulkers","toFixed","newChunkCoords","existingChunkCoords","destination","col","rowNum","colNum","addSupportBlockCount","addMaterialsCount","supportBlockCount","materialCount","materials","getSortedNonZeroMaterials","materialsList","_","newMaterialsList","colourSetIdAndBlockIdFromNBTName","materialsToDisplay","nonZeroMaterialsItems","supportBlockIds","class","TagTypes","NBTReader","ArrayBuffer","DataView","Uint8Array","dataView","arrayView","offset","loadBuffer","decodeUTF8","bytes","codepoints","byte","String","fromCharCode","apply","read","dataType","size","readByType","arrayLength","returnArray","string_bytes_length","string_bytes","list_objectType","list_length","returnObject","tagType","array_length","getData","Waila","selectedBlock","x","y","z","verticalAlign","ViewOnline2D","getNBTDecompressed","viewOnline_NBT","nbtReader","drawNBT","viewOnline_NBT_decompressed","canvasRef_viewOnline","paletteIdToColourSetIdAndBlockId","NBT_palette","palette","paletteItem_index","paletteItem","paletteItemFound","Name","Properties","argKey","argValue","img_textures","Image","onload","canvasRef_viewOnline_ctx","textBaseline","font","fillRect","processedNoobline","block_paletteId","block_coords","pos","int_colourSetId","int_blockId","int_colourSetId_toDraw","int_blockId_toDraw","strokeStyle","strokeText","fillText","whichChunk_x","whichChunk_y","isFocusedChunkArrayEmpty","isInFocusedChunkArray","chunkRow","chunkColumn","focusedChunks","zoomFactor","canvasOffset_x","canvasOffset_y","mouse","down","movedSinceDown","updatedFocusedChunks","handleScroll_document","handleScroll_canvas","zoomMultiplier","offsetX","offsetY","delta","wheelDelta","detail","bind","handleMouseDown","clientX","clientY","addEventListener","handleMouseMove","passive","handleMouseUp","canvas_width","clientWidth","canvas_height","clientHeight","block_x","block_z","selectedBlock_colourSetId","selectedBlock_blockId","ceil","chunkCol","removeEventListener","mouseMoved_x","mouseMoved_y","abs","componentDidMount","onChooseViewOnline3D","component_controls","flexDirection","component_uiEnhancements","component_waila","component_size","size_x","size_y","size_z","marginRight","right","component_topBar","left","top","_euler","Euler","_vector","Vector3","_vector_up","_changeEvent","_lockEvent","_unlockEvent","_PI_2","PI","PointerLockControls","EventDispatcher","camera","domElement","warn","isLocked","minPolarAngle","maxPolarAngle","scope","onMouseMove","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setFromQuaternion","quaternion","setFromEuler","dispatchEvent","onPointerlockChange","ownerDocument","pointerLockElement","onPointerlockError","error","connect","disconnect","dispose","getObject","getDirection","direction","v","copy","applyQuaternion","moveForward","distance","setFromMatrixColumn","matrix","crossVectors","up","addScaledVector","moveRight","moveUp","lock","requestPointerLock","unlock","exitPointerLock","BlockWorld","options","faces","uvRow","dir","vertices","uv","chunkSize","chunks_mesh","renderRequested","animationFrameRequestID","moveX","moveY","startAnimationLoop","renderer","scene","requestAnimationFrame","stopAnimationLoop","cancelAnimationFrame","handleKeyDown","controls","fov","updateProjectionMatrix","handleKeyUp","handlePointerDown","canvasRef","recordMovement","selectBlockIfNoMovement","selectBlock","handleTouchStart","handleWindowResize","setSize","aspect","tileSize","tileTextureWidth","tileTextureHeight","camera_x","camera_y","camera_z","onSelectBlockCallback","THREE","add","set","texture","load","magFilter","minFilter","material","side","alphaTest","transparent","addEventListeners","removeEventListeners","computeBlockOffset","blockX","euclideanModulo","getChunkKey","chunkX","chunkY","chunkZ","getChunkForBlock","addChunkForBlock","chunkKey","getBlock","blockOffset","setBlock","start","end","setFromMatrixPosition","matrixWorld","unproject","intersection","intersectRay","dx","dy","dz","lenSq","len","sqrt","ix","iy","iz","stepX","stepY","stepZ","txDelta","tyDelta","tzDelta","xDist","yDist","zDist","txMax","Infinity","tyMax","tzMax","steppedIndex","generateGeometryDataForChunk","verticesComponents","normalsComponents","uvs","indices","startX","startY","startZ","blockY","blockZ","neighbor","numberOfVertices","updateChunkGeometry","mesh","geometry","setAttribute","Float32Array","setIndex","computeBoundingSphere","updateBlockGeometry","updatedChunkKeys","ox","oy","oz","ViewOnline3D","handleEscapeKeyDown","handleViewOnline3DEscape","schematic_size_x","schematic_size_y","schematic_size_z","world","bottom","MapartController","ALL_OPTIMIZED","FloydSteinberg","viewOnline_3D","eventListener_dragover","stopPropagation","eventListener_drop","files","dataTransfer","imgUrl","URL","createObjectURL","loadUploadedImageFromURL","eventListener_paste","clipboardData","handleChangeColourSetBlock","handleChangeColourSetBlocks","setsAndBlocks","blockIdAndBlock","mode","mcVersion","supportedVersionFound","cropValue","staircasingValue","ditheringValue","text","handleGetPDNPaletteClicked","paletteText","selectedBlocksToURL","numberOfColoursExported","toneKeysToExport","toneKeys","colours","toneKeyToExport","Number","toUpperCase","handlePresetChange","presetName","selectedPreset","DefaultPresets","defaultPreset","handleDeletePreset","presets_new","JSON","stringify","handleSavePreset","presetToSave_name","prompt","otherPresets","newPreset","presetQueryString","match","handleSharePreset","URLToPreset","encodedPreset","onCorruptedPreset","location","fetch","req","json","derp","images","representations","full","presetRegex","encodedColourSetId","encodedBlockId","decodedColourSetId","decodedPresetIndex","Q","R","S","T","U","V","W","X","Y","Z","decodedBlock","decodedBlockId","handleSetMapMaterials","block_name_trimmed","trim","blockToAdd","addedFirstVersion","block_version_isSelected","nbtTag_key_trimmed","nbtTag_value_trimmed","customBlocks_new","parse","customBlock","getMergedColoursJSON","cookiesPresets_loaded","cookiesPresets_updated","cookiesPreset_loaded","cookiesPreset_updated","cookie_customBlocks","cookieMCVersion","URLParams","searchParams","has","decodedPresetBlocks","get","customBlocks","coloursJSON_custom","imageURL","baseFilename","img","filename","downloadURL","downloadElt","createElement","download","appendChild","revokeObjectURL","removeChild","Locale","en","strings","Strings_en","flag","Flag_en","ua","Strings_ua","Flag_ua","et","Strings_et","Flag_et","flag_special","Flag_et_pop","lt","Strings_lt","Flag_lt","ru","Strings_ru","Flag_ru","de","Strings_de","Flag_de","pl","Flag_pl","fr","Strings_fr","Flag_fr","it","Strings_it","Flag_it","pt","Strings_pt","Flag_pt","es","Strings_es","Flag_es","Strings_zh_Hans","Flag_zh_Hans","Strings_zh_Hant","Flag_zh_Hant","eo","Strings_eo","Flag_eo","Root","displayingCorruptedPresetWarning","displayingEdgeWarning","stringName","languageCodeOverride","countryCode","params","stringSegments","stringLast","folder","stringSegment","onEdgeWarningButtonClick","onCorruptedPresetWarningButtonClick","showCorruptedPresetWarning","ReactDOM","StrictMode","Router","basename","Switch","Route","path","component","getElementById"],"mappings":"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","file":"static/js/main.59985b6e.chunk.js","sourcesContent":["import React, { Component } from 'react'\n\nimport './header.css'\n\nclass Header extends Component {\n\tstate = { contactInfoClassname: 'contactInfoBlurred' }\n\n\t// Reveal contact info\n\tonContactInfoClick = event => {\n\t\tconst { getLocaleString } = this.props\n\t\tevent.preventDefault()\n\t\tif (window.confirm(getLocaleString('FAQ/HAVE-YOU-READ'))) {\n\t\t\talert(getLocaleString('FAQ/HELP-IN-ENGLISH'))\n\t\t\tthis.setState({ contactInfoClassname: 'contactInfo' })\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { contactInfoClassname } = this.state\n\t\tconst { getLocaleString } = this.props\n\t\treturn (\n\t\t\t<div className='header'>\n\t\t\t\t<h3>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref='https://t.me/dalynka'\n\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\trel='noopener noreferrer'\n\t\t\t\t\t>\n\t\t\t\t\t\t\n\t\t\t\t\t</a>\n\t\t\t\t</h3>\n\t\t\t\t<p>\n\t\t\t\t\t{getLocaleString('DESCRIPTION/1')}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref='https://spworlds.ru/'\n\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\trel='noopener noreferrer'\n\t\t\t\t\t>\n\t\t\t\t\t\t5\n\t\t\t\t\t</a>\n\t\t\t\t\t{getLocaleString('DESCRIPTION/2')}\n\t\t\t\t\t<br></br>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Header\n","class CookieManager {\n  static init() {\n    // Handle cookie migration\n    const cookieNames = [\"presets\", \"mcversion\", \"customBlocks\"];\n    cookieNames.forEach(name => {\n      if (this.getCookie(`mapartcraft_${name}`) === null && this.getCookie(name) !== null) {\n        this.setCookie(`mapartcraft_${name}`, this.getCookie(name));\n      }\n    });\n  }\n\n  //Thx\n  //https://www.w3schools.com/js/js_cookies.asp\n  static setCookie(cname, cvalue) {\n    let d = new Date();\n    d.setTime(d.getTime() + 9000 * 24 * 60 * 60 * 1000);\n    let expires = \"expires=\" + d.toUTCString();\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n  }\n\n  static getCookie(cname) {\n    let name = cname + \"=\";\n    let ca = document.cookie.split(\";\");\n    for (let i = 0; i < ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) === \" \") {\n        c = c.substring(1);\n      }\n      if (c.indexOf(name) === 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n    return null;\n  }\n\n  static touchCookie(cname, defaultValue) {\n    const cookieValue = this.getCookie(cname);\n    if (cookieValue !== null) {\n      return cookieValue;\n    } else {\n      this.setCookie(cname, defaultValue);\n      return defaultValue;\n    }\n  }\n}\n\nexport default CookieManager;\n","import React, { Component } from \"react\";\n\nimport \"./tooltip.css\";\n\nclass Tooltip extends Component {\n  state = {\n    hovering: false,\n  };\n\n  handleMouseOver = () => {\n    this.setState({ hovering: true });\n  };\n\n  handleMouseOut = () => {\n    this.setState({ hovering: false });\n  };\n\n  render() {\n    const tooltipStyle = this.props.textStyleOverrides !== undefined\n      ? {\n          display: this.state.hovering ? \"unset\" : \"none\",\n          ...this.props.textStyleOverrides,\n        }\n      : { display: this.state.hovering ? \"unset\" : \"none\" };\n    return (\n      <div className=\"tooltipContainer\">\n        <div onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          {this.props.children}\n        </div>\n        <p className=\"tooltipText\" style={tooltipStyle}>\n          {this.props.tooltipText}\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default Tooltip;\n","import React, { Component } from \"react\";\n\nimport SupportedVersions from \"../json/supportedVersions.json\";\n\nimport \"./blockSelectionAddCustom.css\";\n\nclass BlockSelectionAddCustom extends Component {\n  state = {\n    block_name: \"\",\n    block_nbtTags: [[\"\", \"\"]],\n    block_colourSetId: null,\n    block_needsSupport: false,\n    block_flammable: false,\n    block_versions: {},\n  };\n\n  E_KeyOrValue = {\n    key: 0,\n    value: 1,\n  };\n\n  examplesGroups = [\n    {\n      title: \"Stairs\",\n      blocks: [\n        {\n          blockName: \"birch_stairs\",\n          nbtTags: {\n            facing: \"north|east|south|west\",\n            half: \"top|bottom\",\n          },\n          versions: [\"1_12_2\", \"1_13_2\", \"1_14_4\", \"1_15_2\", \"1_16_5\", \"1_17_1\"],\n        },\n      ],\n    },\n    {\n      title: \"Slabs\",\n      blocks: [\n        {\n          blockName: \"stone_slab\",\n          nbtTags: {\n            variant: \"cobblestone\",\n            half: \"top|bottom\",\n          },\n          versions: [\"1_12_2\"],\n        },\n        {\n          blockName: \"cobblestone_slab\",\n          nbtTags: {\n            type: \"top|bottom\",\n          },\n          versions: [\"1_13_2\", \"1_14_4\", \"1_15_2\", \"1_16_5\", \"1_17_1\"],\n        },\n      ],\n    },\n    {\n      title: \"'Alpha slabs'\",\n      blocks: [\n        {\n          blockName: \"stone_slab\",\n          nbtTags: {\n            variant: \"wood_old\",\n            half: \"top|bottom\",\n          },\n          versions: [\"1_12_2\"],\n        },\n        {\n          blockName: \"petrified_oak_slab\",\n          nbtTags: {\n            type: \"top|bottom\",\n          },\n          versions: [\"1_13_2\", \"1_14_4\", \"1_15_2\", \"1_16_5\", \"1_17_1\"],\n        },\n      ],\n    },\n  ];\n\n  constructor(props) {\n    super(props);\n    const { coloursJSON } = props;\n    this.state.block_colourSetId = Object.keys(coloursJSON)[0];\n    for (const supportedVersion_key of Object.keys(SupportedVersions)) {\n      this.state.block_versions[supportedVersion_key] = false;\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { lastSelectedCustomBlock } = this.props;\n    if (prevProps.lastSelectedCustomBlock !== lastSelectedCustomBlock) {\n      this.loadBlockIntoForm(lastSelectedCustomBlock.colourSetId, lastSelectedCustomBlock.blockId);\n    }\n  }\n\n  loadBlockIntoForm(colourSetId, blockId) {\n    const { coloursJSON } = this.props;\n    const blockToLoad = coloursJSON[colourSetId].blocks[blockId];\n    let blockToLoad_nbtTags = [];\n    const versionToLoad_nbtData = Object.values(blockToLoad.validVersions).find((version) => typeof version !== \"string\");\n    for (const [nbtTag_key, nbtTag_value] of Object.entries(versionToLoad_nbtData.NBTArgs)) {\n      blockToLoad_nbtTags.push([nbtTag_key, nbtTag_value]);\n    }\n    blockToLoad_nbtTags.push([\"\", \"\"]);\n    const blockToLoad_versions = {};\n    for (const [supportedVersion_key, supportedVersion_value] of Object.entries(SupportedVersions)) {\n      if (supportedVersion_value.MCVersion in blockToLoad.validVersions) {\n        blockToLoad_versions[supportedVersion_key] = true;\n      } else {\n        blockToLoad_versions[supportedVersion_key] = false;\n      }\n    }\n    this.setState({\n      block_name: versionToLoad_nbtData.NBTName,\n      block_nbtTags: blockToLoad_nbtTags,\n      block_colourSetId: colourSetId,\n      block_needsSupport: blockToLoad.supportBlockMandatory,\n      block_flammable: blockToLoad.flammable,\n      block_versions: blockToLoad_versions,\n    });\n  }\n\n  onSettingChange_block_name = (e) => {\n    this.setState({ block_name: e.target.value });\n  };\n\n  onSettingChange_block_nbtTags = (e, tagIndex, keyOrValue) => {\n    const { block_nbtTags } = this.state;\n    let block_nbtTags_new = [...block_nbtTags];\n    block_nbtTags_new[tagIndex][keyOrValue] = e.target.value;\n    if (\n      tagIndex === block_nbtTags_new.length - 2 &&\n      block_nbtTags_new[block_nbtTags_new.length - 2].every((t) => t === \"\") &&\n      block_nbtTags_new[block_nbtTags_new.length - 1].every((t) => t === \"\")\n    ) {\n      // remove last tags inputs if they are empty and we have just made the penultimate tag inputs empty\n      block_nbtTags_new.pop();\n    } else if (tagIndex === block_nbtTags_new.length - 1) {\n      // always keep a blank set of inputs at the end for further tags\n      block_nbtTags_new.push([\"\", \"\"]);\n    }\n    this.setState({ block_nbtTags: block_nbtTags_new });\n  };\n\n  onSettingChange_block_colourSetId = (e) => {\n    this.setState({ block_colourSetId: e.target.value });\n  };\n\n  onSettingChange_block_needsSupport = () => {\n    this.setState((currentState) => {\n      return {\n        block_needsSupport: !currentState.block_needsSupport,\n      };\n    });\n  };\n\n  onSettingChange_block_flammable = () => {\n    this.setState((currentState) => {\n      return {\n        block_flammable: !currentState.block_flammable,\n      };\n    });\n  };\n\n  onSettingChange_block_versions = (versionToToggle) => {\n    let block_versions_new = { ...this.state.block_versions };\n    block_versions_new[versionToToggle] = !block_versions_new[versionToToggle];\n    this.setState({ block_versions: block_versions_new });\n  };\n\n  render() {\n    const { getLocaleString, coloursJSON, onAddCustomBlock, onDeleteCustomBlock } = this.props;\n    const { block_name, block_nbtTags, block_colourSetId, block_needsSupport, block_flammable, block_versions } = this.state;\n    const examples = (\n      <details open={false}>\n        <summary>{getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/EXAMPLES\")}</summary>\n        {this.examplesGroups.map((examplesGroup) => (\n          <div key={examplesGroup.title}>\n            <b>{examplesGroup.title}</b>\n            {examplesGroup.blocks.map((block) => (\n              <div\n                key={block.blockName}\n                style={{\n                  outline: \"0.1em solid white\",\n                  padding: \"0.2em\",\n                  marginBlockStart: \"0.2em\",\n                  marginBlockEnd: \"0.2em\",\n                }}\n              >\n                <table>\n                  <tbody>\n                    <tr>\n                      <th>\n                        <b>\n                          {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/BLOCK-NAME\")}\n                          {\":\"}\n                        </b>{\" \"}\n                      </th>\n                      <td style={{ textAlign: \"right\" }}>\n                        {\"minecraft:\"}\n                        <input type=\"text\" value={block.blockName} disabled={true} />\n                      </td>\n                    </tr>\n                    <tr>\n                      <th>\n                        <b>\n                          {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/NBT-TAGS\")}\n                          {\":\"}\n                        </b>{\" \"}\n                      </th>\n                      <td style={{ textAlign: \"right\" }}>\n                        {Object.entries(block.nbtTags).map(([tagKey, tagValue]) => (\n                          <div key={tagKey}>\n                            <input type=\"text\" value={tagKey} disabled={true} />\n                            {\":\"}\n                            <input type=\"text\" value={tagValue} disabled={true} />\n                            <br />\n                          </div>\n                        ))}\n                      </td>\n                    </tr>\n                    <tr>\n                      <th>\n                        <b>\n                          {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/VERSIONS\")}\n                          {\":\"}\n                        </b>{\" \"}\n                      </th>\n                      <td>\n                        {Object.entries(SupportedVersions).map(([supportedVersion_key, supportedVersion_value]) => (\n                          <React.Fragment key={supportedVersion_key}>\n                            <input type=\"checkbox\" checked={block.versions.includes(supportedVersion_key)} disabled={true} />\n                            {supportedVersion_value.MCVersion}{\" \"}\n                          </React.Fragment>\n                        ))}\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            ))}\n            <br />\n          </div>\n        ))}\n      </details>\n    );\n    const setting_customBlock_name = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/BLOCK-NAME\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td style={{ textAlign: \"right\" }}>\n          {\"minecraft:\"}\n          <input type=\"text\" value={block_name} onChange={this.onSettingChange_block_name} />\n        </td>\n      </tr>\n    );\n    const setting_customBlock_nbtTags = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/NBT-TAGS\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td style={{ textAlign: \"right\" }}>\n          {block_nbtTags.map(([tagKey, tagValue], tagIndex) => (\n            <div key={tagIndex}>\n              <input type=\"text\" value={tagKey} onChange={(e) => this.onSettingChange_block_nbtTags(e, tagIndex, this.E_KeyOrValue.key)} />\n              {\":\"}\n              <input type=\"text\" value={tagValue} onChange={(e) => this.onSettingChange_block_nbtTags(e, tagIndex, this.E_KeyOrValue.value)} />\n              <br />\n            </div>\n          ))}\n        </td>\n      </tr>\n    );\n    const setting_customBlock_colourSetId = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/COLOUR-SET\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td>\n          <select\n            value={block_colourSetId}\n            onChange={this.onSettingChange_block_colourSetId}\n            style={{\n              backgroundColor: `rgb(${coloursJSON[block_colourSetId].tonesRGB.normal.join(\", \")})`,\n              color:\n                coloursJSON[block_colourSetId].tonesRGB.normal[0] * 0.299 +\n                  coloursJSON[block_colourSetId].tonesRGB.normal[1] * 0.587 +\n                  coloursJSON[block_colourSetId].tonesRGB.normal[2] * 0.114 >\n                186\n                  ? \"black\"\n                  : \"white\",\n            }}\n          >\n            {Object.entries(coloursJSON).map(([colourSetId, colourSet]) => (\n              <option\n                key={colourSetId}\n                value={colourSetId}\n                style={{\n                  backgroundColor: `rgb(${colourSet.tonesRGB.normal.join(\", \")})`,\n                  color:\n                    colourSet.tonesRGB.normal[0] * 0.299 + colourSet.tonesRGB.normal[1] * 0.587 + colourSet.tonesRGB.normal[2] * 0.114 > 186\n                      ? \"black\"\n                      : \"white\",\n                }}\n              >\n                {colourSet.colourName}\n              </option>\n            ))}\n          </select>\n        </td>\n      </tr>\n    );\n    const setting_customBlock_needsSupport = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/NEEDS-SUPPORT\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td>\n          <input type=\"checkbox\" checked={block_needsSupport} onChange={this.onSettingChange_block_needsSupport} />\n        </td>\n      </tr>\n    );\n    const setting_customBlock_flammable = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/FLAMMABLE\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td>\n          <input type=\"checkbox\" checked={block_flammable} onChange={this.onSettingChange_block_flammable} />\n        </td>\n      </tr>\n    );\n    const setting_customBlock_versions = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/VERSIONS\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td>\n          {Object.entries(block_versions).map(([block_version, block_version_checked]) => (\n            <React.Fragment key={block_version}>\n              <input type=\"checkbox\" checked={block_version_checked} onChange={() => this.onSettingChange_block_versions(block_version)} />\n              {SupportedVersions[block_version].MCVersion}{\" \"}\n            </React.Fragment>\n          ))}\n        </td>\n      </tr>\n    );\n    const customBlock_submit = (\n      <tr>\n        <th colSpan=\"2\">\n          <button\n            style={{ width: \"100%\" }}\n            onClick={() => onAddCustomBlock(block_colourSetId, block_name, block_nbtTags, block_versions, block_needsSupport, block_flammable)}\n          >\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/ADD\")}\n          </button>\n        </th>\n      </tr>\n    );\n    const customBlock_delete = (\n      <tr>\n        <th colSpan=\"2\">\n          <button style={{ width: \"100%\" }} onClick={() => onDeleteCustomBlock(block_colourSetId, block_name, block_versions)}>\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/DELETE\")}\n          </button>\n        </th>\n      </tr>\n    );\n    return (\n      <details className=\"blockSelectionAddCustom\" open={false}>\n        <summary>{getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/TITLE\")}</summary>\n        {examples}\n        <table>\n          <tbody>\n            {setting_customBlock_name}\n            {setting_customBlock_nbtTags}\n            {setting_customBlock_colourSetId}\n            {setting_customBlock_needsSupport}\n            {setting_customBlock_flammable}\n            {setting_customBlock_versions}\n            {customBlock_submit}\n            {customBlock_delete}\n          </tbody>\n        </table>\n      </details>\n    );\n  }\n}\n\nexport default BlockSelectionAddCustom;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAySURBVFhH7c6hAQAwDMOwbP//nJH9UFCZmOq0zWT3fywAAAAAAAAAAAAAAAAAgO2A5AFAtAM9NfYR6AAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/textures.b6d73d15.png\";","import React, { Component } from \"react\";\n\nimport IMG_Null from \"../../images/null.png\";\nimport IMG_Textures from \"../../images/textures.png\";\n\nimport \"./blockImage.css\";\n\nclass BlockImage extends Component {\n  render() {\n    const { getLocaleString, coloursJSON, colourSetId, blockId, style, className, ...props_others } = this.props;\n    const isNone = blockId === \"-1\"; // if barrier / no block selected for colourSetId\n    const isUnknown = colourSetId === \"64\" && blockId === \"2\"; // if unknown / placeholder block\n    return (\n      <img\n        src={IMG_Null}\n        alt={\n          isNone\n            ? getLocaleString(\"NONE\")\n            : isUnknown\n            ? getLocaleString(\"MATERIALS/PLACEHOLDER-BLOCK-TT\")\n            : coloursJSON[colourSetId].blocks[blockId].displayName\n        }\n        style={\n          isNone\n            ? {\n                backgroundImage: `url(${IMG_Textures})`,\n                backgroundPositionX: \"-100%\",\n                backgroundPositionY: \"-6400%\",\n                ...style,\n              }\n            : isUnknown\n            ? {\n                backgroundImage: `url(${IMG_Textures})`,\n                backgroundPositionX: \"-200%\",\n                backgroundPositionY: \"-6400%\",\n                ...style,\n              }\n            : coloursJSON[colourSetId].blocks[blockId].presetIndex === \"CUSTOM\"\n            ? {\n                backgroundImage: `url(${IMG_Textures})`,\n                backgroundPositionX: \"-500%\",\n                backgroundPositionY: \"-6400%\",\n                backgroundColor: `rgb(${coloursJSON[colourSetId].tonesRGB.normal.join(\", \")})`,\n                ...style,\n              }\n            : {\n                backgroundImage: `url(${IMG_Textures})`,\n                backgroundPositionX: `-${blockId}00%`,\n                backgroundPositionY: `-${colourSetId}00%`,\n                ...style,\n              }\n        }\n        className={`blockImage ${className}`}\n        {...props_others}\n      />\n    );\n  }\n}\n\nexport default BlockImage;\n","import React, { Component } from \"react\";\n\nimport Tooltip from \"../tooltip\";\nimport BlockSelectionAddCustom from \"./blockSelectionAddCustom/blockSelectionAddCustom\";\nimport BlockImage from \"./blockImage\";\n\nimport MapModes from \"./json/mapModes.json\";\nimport SupportedVersions from \"./json/supportedVersions.json\";\n\nimport \"./blockSelection.css\";\n\nclass BlockSelection extends Component {\n  state = {\n    lastSelectedCustomBlock: null, // {colourSetId, blockId}\n  };\n\n  cssRGB(RGBArray) {\n    // RGB array to css compatible string\n    return `rgb(${RGBArray.join(\", \")})`;\n  }\n\n  getColourSetBox = (colourSet) => {\n    const { optionValue_staircasing } = this.props;\n    let background;\n    switch (optionValue_staircasing) {\n      case MapModes.SCHEMATIC_NBT.staircaseModes.OFF.uniqueId:\n      case MapModes.MAPDAT.staircaseModes.OFF.uniqueId: {\n        background = this.cssRGB(colourSet.tonesRGB.normal);\n        break;\n      }\n      case MapModes.SCHEMATIC_NBT.staircaseModes.CLASSIC.uniqueId:\n      case MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId:\n      case MapModes.MAPDAT.staircaseModes.ON.uniqueId: {\n        background = `linear-gradient(${this.cssRGB(colourSet.tonesRGB.dark)} 33%, ${this.cssRGB(colourSet.tonesRGB.normal)} 33%, ${this.cssRGB(\n          colourSet.tonesRGB.normal\n        )} 66%, ${this.cssRGB(colourSet.tonesRGB.light)} 66%)`;\n        break;\n      }\n      case MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId: {\n        background = `linear-gradient(${this.cssRGB(colourSet.tonesRGB.unobtainable)} 25%, ${this.cssRGB(colourSet.tonesRGB.dark)} 25%, ${this.cssRGB(\n          colourSet.tonesRGB.dark\n        )} 50%, ${this.cssRGB(colourSet.tonesRGB.normal)} 50%, ${this.cssRGB(colourSet.tonesRGB.normal)} 75%, ${this.cssRGB(colourSet.tonesRGB.light)} 75%)`;\n        break;\n      }\n      case MapModes.SCHEMATIC_NBT.staircaseModes.FULL_DARK.uniqueId:\n      case MapModes.MAPDAT.staircaseModes.FULL_DARK.uniqueId: {\n        background = this.cssRGB(colourSet.tonesRGB.dark);\n        break;\n      }\n      case MapModes.SCHEMATIC_NBT.staircaseModes.FULL_LIGHT.uniqueId:\n      case MapModes.MAPDAT.staircaseModes.FULL_LIGHT.uniqueId: {\n        background = this.cssRGB(colourSet.tonesRGB.light);\n        break;\n      }\n      case MapModes.MAPDAT.staircaseModes.FULL_UNOBTAINABLE.uniqueId: {\n        background = this.cssRGB(colourSet.tonesRGB.unobtainable);\n        break;\n      }\n      default: {\n        throw new Error(\"Unknown staircasing value\");\n      }\n    }\n    return (\n      <div\n        className=\"colourSetBox\"\n        style={{\n          background: background,\n        }}\n      />\n    );\n  };\n\n  render() {\n    const {\n      coloursJSON,\n      getLocaleString,\n      onChangeColourSetBlock,\n      optionValue_version,\n      selectedBlocks,\n      presets,\n      selectedPresetName,\n      canDeletePreset,\n      onPresetChange,\n      onDeletePreset,\n      onSavePreset,\n      onSharePreset,\n      onGetPDNPaletteClicked,\n      handleAddCustomBlock,\n      handleDeleteCustomBlock,\n    } = this.props;\n    const { lastSelectedCustomBlock } = this.state;\n    const presetsManagement = (\n      <React.Fragment>\n        <h2 id=\"blockselectiontitle\">{getLocaleString(\"BLOCK-SELECTION/TITLE\")}</h2>\n        <b>\n          {getLocaleString(\"BLOCK-SELECTION/PRESETS/TITLE\")}\n          {\":\"}\n        </b>{\" \"}\n        <select id=\"presets\" value={selectedPresetName} onChange={onPresetChange}>\n          <option value=\"None\">{getLocaleString(\"BLOCK-SELECTION/PRESETS/NONE\")}</option>\n          {presets.map((preset) => (\n            <option value={preset.name} key={preset.name}>\n              {\"localeKey\" in preset ? getLocaleString(preset.localeKey) : preset.name}\n            </option>\n          ))}\n        </select>\n        <button type=\"button\" disabled={!canDeletePreset()} onClick={onDeletePreset}>\n          {getLocaleString(\"BLOCK-SELECTION/PRESETS/DELETE\")}\n        </button>\n        <button type=\"button\" onClick={onSavePreset}>\n          {getLocaleString(\"BLOCK-SELECTION/PRESETS/SAVE\")}\n        </button>\n        <Tooltip tooltipText={getLocaleString(\"BLOCK-SELECTION/PRESETS/SHARE-TT\")}>\n          <button type=\"button\" onClick={onSharePreset}>\n            {getLocaleString(\"BLOCK-SELECTION/PRESETS/SHARE\")}\n          </button>\n        </Tooltip>\n        <Tooltip tooltipText={getLocaleString(\"BLOCK-SELECTION/PRESETS/DOWNLOAD-TT\")}>\n          <button type=\"button\" onClick={onGetPDNPaletteClicked}>\n            {getLocaleString(\"BLOCK-SELECTION/PRESETS/DOWNLOAD\")}\n          </button>\n        </Tooltip>\n      </React.Fragment>\n    );\n    const blockSelection = (\n      <React.Fragment>\n        {Object.entries(coloursJSON)\n          .filter(([, colourSet]) => Object.values(colourSet.blocks).some((block) => Object.keys(block.validVersions).includes(optionValue_version.MCVersion)))\n          .map(([colourSetId, colourSet]) => (\n            <div key={colourSetId} className=\"colourSet\">\n              {this.getColourSetBox(colourSet)}\n              <label>\n                <Tooltip tooltipText={getLocaleString(\"NONE\")}>\n                  <BlockImage\n                    getLocaleString={getLocaleString}\n                    coloursJSON={coloursJSON}\n                    colourSetId={colourSetId}\n                    blockId={\"-1\"}\n                    onClick={() => onChangeColourSetBlock(colourSetId, \"-1\")}\n                    style={{\n                      cursor: \"pointer\",\n                      ...(selectedBlocks[colourSetId] === \"-1\" && {\n                        filter: \"drop-shadow(0 0 4px #658968)\",\n                        backgroundColor: \"#658968\",\n                      }),\n                    }}\n                  />\n                </Tooltip>\n              </label>\n              <div className={\"colourSetBlocks\"}>\n                {Object.entries(colourSet.blocks)\n                  .filter(([, block]) => Object.keys(block.validVersions).includes(optionValue_version.MCVersion))\n                  .map(([blockId, block]) => (\n                    <label key={blockId}>\n                      <Tooltip tooltipText={block.displayName}>\n                        {selectedBlocks[colourSetId] === blockId &&\n                          !(Object.values(SupportedVersions)[Object.keys(SupportedVersions).length - 1].MCVersion in block.validVersions) && (\n                            // if doesn't support latest version\n                            <div\n                              style={{\n                                position: \"absolute\",\n                                paddingLeft: \"28px\",\n                                zIndex: 110,\n                              }}\n                            >\n                              <Tooltip\n                                tooltipText={`${getLocaleString(\"BLOCK-SELECTION/UNSUPPORTED-PAST\")} ${\n                                  Object.keys(block.validVersions)[Object.keys(block.validVersions).length - 1]\n                                }`}\n                                textStyleOverrides={{\n                                  whiteSpace: \"nowrap\",\n                                  backgroundColor: \"red\",\n                                }}\n                              >\n                                <h2 style={{ backgroundColor: \"red\", margin: \"0\" }}>{\"!\"}</h2>\n                              </Tooltip>\n                            </div>\n                          )}\n                        <BlockImage\n                          coloursJSON={coloursJSON}\n                          colourSetId={colourSetId}\n                          blockId={blockId}\n                          onClick={() => {\n                            onChangeColourSetBlock(colourSetId, blockId);\n                            if (block.presetIndex === \"CUSTOM\") {\n                              this.setState({ lastSelectedCustomBlock: { colourSetId, blockId } });\n                            }\n                          }}\n                          style={{\n                            cursor: \"pointer\",\n                            ...(selectedBlocks[colourSetId] === blockId && {\n                              filter: \"drop-shadow(0 0 4px #658968)\",\n                              ...(block.presetIndex !== \"CUSTOM\" && {\n                                backgroundColor: \"#658968\",\n                              }),\n                            }),\n                          }}\n                        />\n                      </Tooltip>\n                    </label>\n                  ))}\n              </div>\n            </div>\n          ))}\n      </React.Fragment>\n    );\n    return (\n      <div className=\"section blockSelectionDiv\">\n        {presetsManagement}\n        {blockSelection}\n        <BlockSelectionAddCustom\n          getLocaleString={getLocaleString}\n          coloursJSON={coloursJSON}\n          onAddCustomBlock={handleAddCustomBlock}\n          onDeleteCustomBlock={handleDeleteCustomBlock}\n          lastSelectedCustomBlock={lastSelectedCustomBlock}\n        />\n      </div>\n    );\n  }\n}\n\nexport default BlockSelection;\n","export default __webpack_public_path__ + \"static/media/nbt.586fd3bc.jsworker\";","import React, { Component } from \"react\";\nimport { gzip } from \"pako\"; // blocks when zipping\nimport JSZip from \"jszip\";\n\nimport Tooltip from \"../tooltip\";\n\nimport MapModes from \"./json/mapModes.json\";\nimport WhereSupportBlocksModes from \"./json/whereSupportBlocksModes.json\";\n\nimport NBTWorker from \"./workers/nbt.jsworker\";\n\nimport \"./greenButtons.css\";\n\nclass GreenButtons extends Component {\n  // For download buttons and donate link etc\n  state = {\n    buttonWidth_viewOnline: 1,\n    buttonWidth_NBT_Joined: 1,\n    buttonWidth_NBT_Split: 1,\n    buttonWidth_Mapdat_Split: 1,\n    mapPreviewWorker_onFinishCallback: null,\n  };\n\n  nbtWorker = new Worker(NBTWorker);\n\n  resetButtonWidths() {\n    this.setState({\n      buttonWidth_viewOnline: 1,\n      buttonWidth_NBT_Joined: 1,\n      buttonWidth_NBT_Split: 1,\n      buttonWidth_Mapdat_Split: 1,\n    });\n  }\n\n  getNBT_base = (workerHeader) => {\n    const {\n      getLocaleString,\n      coloursJSON,\n      optionValue_version,\n      optionValue_mapSize_x,\n      optionValue_mapSize_y,\n      optionValue_staircasing,\n      optionValue_whereSupportBlocks,\n      optionValue_supportBlock,\n      optionValue_mapdatFilenameUseId,\n      optionValue_mapdatFilenameIdStart,\n      uploadedImage_baseFilename,\n      currentMaterialsData,\n      mapPreviewWorker_inProgress,\n      downloadBlobFile,\n      onGetViewOnlineNBT,\n    } = this.props;\n    if (mapPreviewWorker_inProgress) {\n      this.setState({ mapPreviewWorker_onFinishCallback: () => this.getNBT_base(workerHeader) });\n      return;\n    }\n    if (Object.entries(currentMaterialsData.currentSelectedBlocks).every((elt) => elt[1] === \"-1\")) {\n      alert(getLocaleString(\"DOWNLOAD/ERROR-NONE-SELECTED\"));\n      return;\n    }\n    this.nbtWorker.terminate();\n    this.resetButtonWidths();\n    let numberOfSplitsCalculated = 0;\n    let zipFile = new JSZip();\n    const t0 = performance.now();\n    this.nbtWorker = new Worker(NBTWorker);\n    this.nbtWorker.onmessage = (e) => {\n      switch (e.data.head) {\n        case \"PROGRESS_REPORT_CREATE_NBT_JOINED_FOR_VIEW_ONLINE\": {\n          this.setState({ buttonWidth_viewOnline: e.data.body });\n          break;\n        }\n        case \"PROGRESS_REPORT_CREATE_NBT_JOINED\": {\n          this.setState({ buttonWidth_NBT_Joined: e.data.body });\n          break;\n        }\n        case \"PROGRESS_REPORT_CREATE_NBT_SPLIT\": {\n          this.setState({ buttonWidth_NBT_Split: (numberOfSplitsCalculated + e.data.body) / (optionValue_mapSize_x * optionValue_mapSize_y) });\n          break;\n        }\n        case \"PROGRESS_REPORT_CREATE_MAPDAT_SPLIT\": {\n          this.setState({ buttonWidth_Mapdat_Split: (numberOfSplitsCalculated + e.data.body) / (optionValue_mapSize_x * optionValue_mapSize_y) });\n          break;\n        }\n        case \"NBT_FOR_VIEW_ONLINE\": {\n          const t1 = performance.now();\n          console.log(`Created NBT for 'view online' by ${(t1 - t0).toString()}ms`);\n          const { NBT_Array } = e.data.body;\n          onGetViewOnlineNBT(NBT_Array);\n          break;\n        }\n        case \"NBT_ARRAY\": {\n          const t1 = performance.now();\n          console.log(`Created NBT by ${(t1 - t0).toString()}ms`);\n          numberOfSplitsCalculated++;\n          const { NBT_Array, whichMap_x, whichMap_y } = e.data.body;\n          const NBT_Array_gzipped = gzip(NBT_Array);\n          if (workerHeader === \"CREATE_NBT_SPLIT\") {\n            zipFile.file(`${uploadedImage_baseFilename}_${whichMap_x}_${whichMap_y}.nbt`, NBT_Array_gzipped);\n            if (numberOfSplitsCalculated === optionValue_mapSize_x * optionValue_mapSize_y) {\n              zipFile.generateAsync({ type: \"blob\" }).then((content) => {\n                downloadBlobFile(content, `${uploadedImage_baseFilename}.zip`);\n              });\n            }\n          } else {\n            const downloadBlob = new Blob([NBT_Array_gzipped], { type: \"application/x-minecraft-level\" });\n            downloadBlobFile(downloadBlob, `${uploadedImage_baseFilename}.nbt`);\n          }\n          break;\n        }\n        case \"MAPDAT_BYTES\": {\n          const t1 = performance.now();\n          console.log(`Created Mapdat by ${(t1 - t0).toString()}ms`);\n          numberOfSplitsCalculated++;\n          const { Mapdat_Bytes, whichMap_x, whichMap_y } = e.data.body;\n          const Mapdat_Bytes_gzipped = gzip(Mapdat_Bytes);\n          const downloadBlob = new Blob([Mapdat_Bytes_gzipped], { type: \"application/x-minecraft-level\" });\n          downloadBlobFile(downloadBlob, optionValue_mapdatFilenameUseId\n            ? `map_${(optionValue_mapdatFilenameIdStart + whichMap_y * optionValue_mapSize_x + whichMap_x).toString()}.dat`\n            : `${uploadedImage_baseFilename}_${whichMap_x.toString()}_${whichMap_y.toString()}.dat`);\n          break;\n        }\n        case \"MAPDAT_BYTES_ZIP\": {\n          const t1 = performance.now();\n          console.log(`Created Mapdat by ${(t1 - t0).toString()}ms`);\n          numberOfSplitsCalculated++;\n          const { Mapdat_Bytes, whichMap_x, whichMap_y } = e.data.body;\n          const Mapdat_Bytes_gzipped = gzip(Mapdat_Bytes);\n          zipFile.file(\n            optionValue_mapdatFilenameUseId\n              ? `map_${(optionValue_mapdatFilenameIdStart + whichMap_y * optionValue_mapSize_x + whichMap_x).toString()}.dat`\n              : `${uploadedImage_baseFilename}_${whichMap_x.toString()}_${whichMap_y.toString()}.dat`,\n            Mapdat_Bytes_gzipped\n          );\n          if (numberOfSplitsCalculated === optionValue_mapSize_x * optionValue_mapSize_y) {\n            zipFile.generateAsync({ type: \"blob\" }).then((content) => {\n              downloadBlobFile(content, `${uploadedImage_baseFilename}.zip`);\n            });\n          }\n          break;\n        }\n        default: {\n          throw new Error(\"Unknown worker response header\");\n        }\n      }\n    };\n    this.nbtWorker.postMessage({\n      head: workerHeader,\n      body: {\n        coloursJSON: coloursJSON,\n        MapModes: MapModes,\n        WhereSupportBlocksModes: WhereSupportBlocksModes,\n        optionValue_version: optionValue_version,\n        optionValue_staircasing: optionValue_staircasing,\n        optionValue_whereSupportBlocks: optionValue_whereSupportBlocks,\n        optionValue_supportBlock: optionValue_supportBlock,\n        pixelsData: currentMaterialsData.pixelsData,\n        maps: currentMaterialsData.maps,\n        currentSelectedBlocks: currentMaterialsData.currentSelectedBlocks,\n      },\n    });\n  };\n\n  onViewOnlineClicked = () => {\n    this.getNBT_base(\"CREATE_NBT_JOINED_FOR_VIEW_ONLINE\");\n  };\n\n  onGetNBTClicked = () => {\n    this.getNBT_base(\"CREATE_NBT_JOINED\");\n  };\n\n  onGetNBTSplitClicked = () => {\n    this.getNBT_base(\"CREATE_NBT_SPLIT\");\n  };\n\n  onGetMapdatSplitClicked = () => {\n    this.getNBT_base(\"CREATE_MAPDAT_SPLIT\");\n  };\n\n  onGetMapdatSplitZipClicked = () => {\n    this.getNBT_base(\"CREATE_MAPDAT_SPLIT_ZIP\");\n  };\n\n  componentDidUpdate_shouldNBTWorkerTerminate(prevProps) {\n    const {\n      selectedBlocks,\n      optionValue_version,\n      optionValue_modeNBTOrMapdat,\n      optionValue_mapSize_x,\n      optionValue_mapSize_y,\n      optionValue_cropImage,\n      optionValue_cropImage_zoom,\n      optionValue_cropImage_percent_x,\n      optionValue_cropImage_percent_y,\n      optionValue_staircasing,\n      optionValue_whereSupportBlocks,\n      optionValue_supportBlock,\n      optionValue_transparency,\n      optionValue_transparencyTolerance,\n      optionValue_mapdatFilenameUseId,\n      optionValue_mapdatFilenameIdStart,\n      optionValue_betterColour,\n      optionValue_dithering,\n      optionValue_preprocessingEnabled,\n      preProcessingValue_brightness,\n      preProcessingValue_contrast,\n      preProcessingValue_saturation,\n      preProcessingValue_backgroundColourSelect,\n      preProcessingValue_backgroundColour,\n      uploadedImage,\n    } = this.props;\n    return [\n      prevProps.selectedBlocks !== selectedBlocks,\n      prevProps.optionValue_version !== optionValue_version,\n      prevProps.optionValue_modeNBTOrMapdat !== optionValue_modeNBTOrMapdat,\n      prevProps.optionValue_mapSize_x !== optionValue_mapSize_x,\n      prevProps.optionValue_mapSize_y !== optionValue_mapSize_y,\n      prevProps.optionValue_cropImage !== optionValue_cropImage,\n      prevProps.optionValue_cropImage_zoom !== optionValue_cropImage_zoom,\n      prevProps.optionValue_cropImage_percent_x !== optionValue_cropImage_percent_x,\n      prevProps.optionValue_cropImage_percent_y !== optionValue_cropImage_percent_y,\n      prevProps.optionValue_staircasing !== optionValue_staircasing,\n      prevProps.optionValue_whereSupportBlocks !== optionValue_whereSupportBlocks,\n      prevProps.optionValue_supportBlock !== optionValue_supportBlock,\n      prevProps.optionValue_transparency !== optionValue_transparency,\n      prevProps.optionValue_transparencyTolerance !== optionValue_transparencyTolerance,\n      prevProps.optionValue_mapdatFilenameUseId !== optionValue_mapdatFilenameUseId,\n      prevProps.optionValue_mapdatFilenameIdStart !== optionValue_mapdatFilenameIdStart,\n      prevProps.optionValue_betterColour !== optionValue_betterColour,\n      prevProps.optionValue_dithering !== optionValue_dithering,\n      prevProps.optionValue_preprocessingEnabled !== optionValue_preprocessingEnabled,\n      prevProps.preProcessingValue_brightness !== preProcessingValue_brightness,\n      prevProps.preProcessingValue_contrast !== preProcessingValue_contrast,\n      prevProps.preProcessingValue_saturation !== preProcessingValue_saturation,\n      prevProps.preProcessingValue_backgroundColourSelect !== preProcessingValue_backgroundColourSelect,\n      prevProps.preProcessingValue_backgroundColour !== preProcessingValue_backgroundColour,\n      prevProps.uploadedImage !== uploadedImage,\n    ].some((elt) => elt);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { mapPreviewWorker_inProgress } = this.props;\n    if (this.componentDidUpdate_shouldNBTWorkerTerminate(prevProps)) {\n      // reset callback if setting changed\n      this.nbtWorker.terminate();\n      this.resetButtonWidths();\n      this.setState({ mapPreviewWorker_onFinishCallback: null });\n    } else if (!mapPreviewWorker_inProgress && this.state.mapPreviewWorker_onFinishCallback !== null) {\n      this.state.mapPreviewWorker_onFinishCallback();\n      this.setState({ mapPreviewWorker_onFinishCallback: null });\n    }\n  }\n\n  componentWillUnmount() {\n    this.nbtWorker.terminate();\n  }\n\n  render() {\n    const { buttonWidth_viewOnline, buttonWidth_NBT_Joined, buttonWidth_NBT_Split, buttonWidth_Mapdat_Split } = this.state;\n    const { getLocaleString, optionValue_modeNBTOrMapdat } = this.props;\n    let buttons_mapModeConditional;\n    // dummy text used in divs with absolutely positioned children to create correct container height\n    if (optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId) {\n      buttons_mapModeConditional = (\n        <React.Fragment>\n          <Tooltip tooltipText={getLocaleString(\"VIEW-ONLINE/TITLE-TT\")}>\n            <div className=\"greenButton\" onClick={this.onViewOnlineClicked}>\n              <span className=\"greenButton_text_dummy\">{getLocaleString(\"VIEW-ONLINE/TITLE\")}</span>\n              <span className=\"greenButton_text\">{getLocaleString(\"VIEW-ONLINE/TITLE\")}</span>\n              <div\n                className=\"greenButton_progressDiv\"\n                style={{\n                  width: `${Math.floor(buttonWidth_viewOnline * 100)}%`,\n                }}\n              />\n            </div>\n          </Tooltip>\n          <br />\n          <Tooltip tooltipText={getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD-TT\")}>\n            <div className=\"greenButton\" onClick={this.onGetNBTClicked}>\n              <span className=\"greenButton_large_text_dummy\">{getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD\")}</span>\n              <span className=\"greenButton_large_text\">{getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD\")}</span>\n              <div\n                className=\"greenButton_progressDiv\"\n                style={{\n                  width: `${Math.floor(buttonWidth_NBT_Joined * 100)}%`,\n                }}\n              />\n            </div>\n          </Tooltip>\n          <br />\n          <Tooltip tooltipText={getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD-SPLIT-TT\")}>\n            <div className=\"greenButton\" onClick={this.onGetNBTSplitClicked}>\n              <span className=\"greenButton_text_dummy\">{`${getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD-SPLIT\")} .ZIP`}</span>\n              <span className=\"greenButton_text\">{`${getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD-SPLIT\")} .ZIP`}</span>\n              <div\n                className=\"greenButton_progressDiv\"\n                style={{\n                  width: `${Math.floor(buttonWidth_NBT_Split * 100)}%`,\n                }}\n              />\n            </div>\n          </Tooltip>\n          <br />\n        </React.Fragment>\n      );\n    } else {\n      buttons_mapModeConditional = (\n        <React.Fragment>\n          <Tooltip tooltipText={getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD-TT\")}>\n            <div className=\"greenButton\" onClick={this.onGetMapdatSplitClicked}>\n              <span className=\"greenButton_large_text_dummy\">{`${getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD\")}`}</span>\n              <span className=\"greenButton_large_text\">{`${getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD\")}`}</span>\n              <div\n                className=\"greenButton_progressDiv\"\n                style={{\n                  width: `${Math.floor(buttonWidth_Mapdat_Split * 100)}%`,\n                }}\n              />\n            </div>\n          </Tooltip>\n          <br />\n          <Tooltip tooltipText={getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD-TT\")}>\n            <div className=\"greenButton\" onClick={this.onGetMapdatSplitZipClicked}>\n              <span className=\"greenButton_large_text_dummy\">{`${getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD\")} .ZIP`}</span>\n              <span className=\"greenButton_large_text\">{`${getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD\")} .ZIP`}</span>\n              <div\n                className=\"greenButton_progressDiv\"\n                style={{\n                  width: `${Math.floor(buttonWidth_Mapdat_Split * 100)}%`,\n                }}\n              />\n            </div>\n          </Tooltip>\n          <br />\n        </React.Fragment>\n      );\n    }\n    const button_donate = (\n      <React.Fragment>\n        <Tooltip tooltipText={getLocaleString(\"DONATE/TITLE-TT\")}>\n          <div className=\"greenButton\">\n            <a style={{ textDecoration: \"none\" }} href=\"./supporters\">\n              <span className=\"greenButton_text_dummy\" style={{ backgroundColor: \"#688e6b\", color: \"#333333\" }}>\n                {getLocaleString(\"DONATE/TITLE\")}\n              </span>\n              <span className=\"greenButton_text\" style={{ backgroundColor: \"#688e6b\", color: \"#333333\" }}>\n                {getLocaleString(\"DONATE/TITLE\")}\n              </span>\n            </a>\n          </div>\n        </Tooltip>\n      </React.Fragment>\n    );\n    const buttonsDiv = (\n      <div>\n        {buttons_mapModeConditional}\n        {button_donate}\n      </div>\n    );\n    return buttonsDiv;\n  }\n}\n\nexport default GreenButtons;\n","export default __webpack_public_path__ + \"static/media/mapCanvas.35ef3a6f.jsworker\";","import React, { Component, createRef } from \"react\";\n\nimport Tooltip from \"../tooltip\";\nimport MapCanvasWorker from \"./workers/mapCanvas.jsworker\"; // FINALLY got this to work; .js gets imported as code, anything else as URL\n\nimport BackgroundColourModes from \"./json/backgroundColourModes.json\";\nimport CropModes from \"./json/cropModes.json\";\nimport DitherMethods from \"./json/ditherMethods.json\";\nimport MapModes from \"./json/mapModes.json\";\nimport WhereSupportBlocksModes from \"./json/whereSupportBlocksModes.json\";\n\nimport IMG_Null from \"../../images/null.png\";\nimport IMG_Textures from \"../../images/textures.png\";\nimport IMG_GridOverlay from \"../../images/gridOverlay.png\";\n\nimport \"./mapPreview.css\";\n\nclass MapPreview extends Component {\n  state = {\n    mapPreviewSizeScale: 2,\n    workerProgress: 0,\n  };\n\n  mapCanvasWorker = new Worker(MapCanvasWorker);\n\n  constructor(props) {\n    super(props);\n    this.canvasRef_source = createRef(); // hidden source canvas that at all times contains the uploaded image\n    this.canvasRef_display = createRef(); // display canvas that displays to the user, may be pixels, may be image\n    this.fileInputRef = createRef();\n  }\n\n  shouldCanvasUpdate_source(prevProps, newProps, prevState, newState) {\n    const propChanges = [\n      prevProps.coloursJSON === newProps.coloursJSON,\n      prevProps.selectedBlocks === newProps.selectedBlocks,\n      prevProps.optionValue_mapSize_x === newProps.optionValue_mapSize_x,\n      prevProps.optionValue_mapSize_y === newProps.optionValue_mapSize_y,\n      prevProps.optionValue_cropImage === newProps.optionValue_cropImage,\n      prevProps.optionValue_cropImage_zoom === newProps.optionValue_cropImage_zoom,\n      prevProps.optionValue_cropImage_percent_x === newProps.optionValue_cropImage_percent_x,\n      prevProps.optionValue_cropImage_percent_y === newProps.optionValue_cropImage_percent_y,\n      prevProps.optionValue_staircasing === newProps.optionValue_staircasing,\n      prevProps.optionValue_preprocessingEnabled === newProps.optionValue_preprocessingEnabled,\n      prevProps.preProcessingValue_brightness === newProps.preProcessingValue_brightness,\n      prevProps.preProcessingValue_contrast === newProps.preProcessingValue_contrast,\n      prevProps.preProcessingValue_saturation === newProps.preProcessingValue_saturation,\n      prevProps.preProcessingValue_backgroundColourSelect === newProps.preProcessingValue_backgroundColourSelect,\n      prevProps.preProcessingValue_backgroundColour === newProps.preProcessingValue_backgroundColour,\n      prevProps.uploadedImage === newProps.uploadedImage,\n    ];\n    return (\n      newProps.uploadedImage !== null &&\n      prevState.workerProgress === newState.workerProgress &&\n      !propChanges.every((elt) => {\n        return elt === true;\n      })\n    );\n  }\n\n  shouldCanvasUpdate_display(prevProps, newProps, prevState, newState) {\n    // ugly but useful method to determine whether map canvas contents should be redrawn on component update\n    const propChanges = [\n      prevProps.coloursJSON === newProps.coloursJSON,\n      prevProps.selectedBlocks === newProps.selectedBlocks,\n      prevProps.optionValue_modeNBTOrMapdat === newProps.optionValue_modeNBTOrMapdat,\n      prevProps.optionValue_mapSize_x === newProps.optionValue_mapSize_x,\n      prevProps.optionValue_mapSize_y === newProps.optionValue_mapSize_y,\n      prevProps.optionValue_cropImage === newProps.optionValue_cropImage,\n      prevProps.optionValue_cropImage_zoom === newProps.optionValue_cropImage_zoom,\n      prevProps.optionValue_cropImage_percent_x === newProps.optionValue_cropImage_percent_x,\n      prevProps.optionValue_cropImage_percent_y === newProps.optionValue_cropImage_percent_y,\n      prevProps.optionValue_staircasing === newProps.optionValue_staircasing,\n      prevProps.optionValue_whereSupportBlocks === newProps.optionValue_whereSupportBlocks,\n      prevProps.optionValue_transparency === newProps.optionValue_transparency,\n      prevProps.optionValue_transparencyTolerance === newProps.optionValue_transparencyTolerance,\n      prevProps.optionValue_betterColour === newProps.optionValue_betterColour,\n      prevProps.optionValue_dithering === newProps.optionValue_dithering,\n      prevProps.optionValue_preprocessingEnabled === newProps.optionValue_preprocessingEnabled,\n      prevProps.preProcessingValue_brightness === newProps.preProcessingValue_brightness,\n      prevProps.preProcessingValue_contrast === newProps.preProcessingValue_contrast,\n      prevProps.preProcessingValue_saturation === newProps.preProcessingValue_saturation,\n      prevProps.preProcessingValue_backgroundColourSelect === newProps.preProcessingValue_backgroundColourSelect,\n      prevProps.preProcessingValue_backgroundColour === newProps.preProcessingValue_backgroundColour,\n      prevProps.uploadedImage === newProps.uploadedImage,\n    ];\n    return (\n      newProps.uploadedImage !== null &&\n      prevState.workerProgress === newState.workerProgress &&\n      !propChanges.every((elt) => {\n        return elt === true;\n      })\n    );\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.shouldCanvasUpdate_source(prevProps, this.props, prevState, this.state)) {\n      this.updateCanvas_source(); // draw uploaded image on source canvas\n    }\n    if (this.shouldCanvasUpdate_display(prevProps, this.props, prevState, this.state)) {\n      this.updateCanvas_display(); // draw pixelart of image on display canvas\n    }\n  }\n\n  closestSmoothColourTo(colourHex) {\n    const { coloursJSON, selectedBlocks, optionValue_staircasing } = this.props;\n    const rgbGroups_input = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(colourHex);\n    const colourRGB_input = [parseInt(rgbGroups_input[1], 16), parseInt(rgbGroups_input[2], 16), parseInt(rgbGroups_input[3], 16)];\n    let smallestDistance = 9999999;\n    let colourRGB_return = null;\n    for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\n      if (selectedBlocks[colourSetId] === \"-1\") {\n        continue;\n      }\n      let coloursRGB_colourSet;\n      switch (optionValue_staircasing) {\n        case MapModes.SCHEMATIC_NBT.staircaseModes.OFF.uniqueId:\n        case MapModes.SCHEMATIC_NBT.staircaseModes.CLASSIC.uniqueId:\n        case MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId:\n        case MapModes.MAPDAT.staircaseModes.OFF.uniqueId: {\n          coloursRGB_colourSet = [colourSet.tonesRGB.normal];\n          break;\n        }\n        case MapModes.SCHEMATIC_NBT.staircaseModes.FULL_DARK.uniqueId:\n        case MapModes.MAPDAT.staircaseModes.FULL_DARK.uniqueId: {\n          coloursRGB_colourSet = [colourSet.tonesRGB.dark];\n          break;\n        }\n        case MapModes.SCHEMATIC_NBT.staircaseModes.FULL_LIGHT.uniqueId:\n        case MapModes.MAPDAT.staircaseModes.FULL_LIGHT.uniqueId: {\n          coloursRGB_colourSet = [colourSet.tonesRGB.light];\n          break;\n        }\n        case MapModes.MAPDAT.staircaseModes.FULL_UNOBTAINABLE.uniqueId: {\n          coloursRGB_colourSet = [colourSet.tonesRGB.unobtainable];\n          break;\n        }\n        case MapModes.MAPDAT.staircaseModes.ON.uniqueId: {\n          coloursRGB_colourSet = [colourSet.tonesRGB.dark, colourSet.tonesRGB.normal, colourSet.tonesRGB.light];\n          break;\n        }\n        case MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId: {\n          coloursRGB_colourSet = [colourSet.tonesRGB.dark, colourSet.tonesRGB.normal, colourSet.tonesRGB.light, colourSet.tonesRGB.unobtainable];\n          break;\n        }\n        default: {\n          throw new Error(\"Unknown staircasing mode\");\n        }\n      }\n      for (const colourRGB_colourSet of coloursRGB_colourSet) {\n        const colourDistance =\n          Math.pow(colourRGB_input[0] - colourRGB_colourSet[0], 2) +\n          Math.pow(colourRGB_input[1] - colourRGB_colourSet[1], 2) +\n          Math.pow(colourRGB_input[2] - colourRGB_colourSet[2], 2);\n        if (colourDistance < smallestDistance) {\n          smallestDistance = colourDistance;\n          colourRGB_return = colourRGB_colourSet;\n        }\n      }\n    }\n    const colourHex_return = `#${colourRGB_return[0].toString(16).padStart(2, \"0\")}${colourRGB_return[1].toString(16).padStart(2, \"0\")}${colourRGB_return[2]\n      .toString(16)\n      .padStart(2, \"0\")}`;\n    return colourHex_return;\n  }\n\n  updateCanvas_source() {\n    const {\n      selectedBlocks,\n      optionValue_preprocessingEnabled,\n      preProcessingValue_brightness,\n      preProcessingValue_contrast,\n      preProcessingValue_saturation,\n      preProcessingValue_backgroundColourSelect,\n      preProcessingValue_backgroundColour,\n      uploadedImage,\n    } = this.props;\n    const {\n      optionValue_mapSize_x,\n      optionValue_mapSize_y,\n      optionValue_cropImage,\n      optionValue_cropImage_zoom,\n      optionValue_cropImage_percent_x,\n      optionValue_cropImage_percent_y,\n    } = this.props;\n    const { canvasRef_source } = this;\n    const ctx_source = canvasRef_source.current.getContext(\"2d\");\n    ctx_source.imageSmoothingEnabled = true;   // These two options keep the map preview consistent on Chrome(ium). Otherwise the first render after changing\n    ctx_source.imageSmoothingQuality = \"high\"; // map x or z size is pixelated to a noticeably lower quality. This is not a solution to the cause but a\n                                               // workaround the effect (I do not know exactly why this happens: maybe it is to do with\n                                               // anti-fingerprinting). Firefox is unaffected by any of this.\n    ctx_source.clearRect(0, 0, ctx_source.canvas.width, ctx_source.canvas.height);\n\n    if (optionValue_preprocessingEnabled) {\n      if (preProcessingValue_backgroundColourSelect !== BackgroundColourModes.OFF.uniqueId && /^#?[a-f\\d]{6}$/i.test(preProcessingValue_backgroundColour)) {\n        let backgroundColour;\n        if (\n          preProcessingValue_backgroundColourSelect === BackgroundColourModes.SMOOTH.uniqueId &&\n          !Object.values(selectedBlocks).every((selectedBlockId) => selectedBlockId === \"-1\")\n        ) {\n          backgroundColour = this.closestSmoothColourTo(preProcessingValue_backgroundColour);\n        } else {\n          backgroundColour = preProcessingValue_backgroundColour;\n        }\n        ctx_source.filter = \"none\"; // this needs to be present to stop filters affecting background colour\n        ctx_source.rect(0, 0, ctx_source.canvas.width, ctx_source.canvas.height);\n        ctx_source.fillStyle = backgroundColour;\n        ctx_source.fill();\n      }\n      ctx_source.filter = `brightness(${preProcessingValue_brightness}%) contrast(${preProcessingValue_contrast}%) saturate(${preProcessingValue_saturation}%)`;\n    } else {\n      ctx_source.filter = \"none\";\n    }\n\n    switch (optionValue_cropImage) {\n      case CropModes.OFF.uniqueId: {\n        ctx_source.drawImage(uploadedImage, 0, 0, ctx_source.canvas.width, ctx_source.canvas.height);\n        break;\n      }\n      case CropModes.CENTER.uniqueId:\n      case CropModes.MANUAL.uniqueId: {\n        const img_width = uploadedImage.width;\n        const img_height = uploadedImage.height;\n        let samplingWidth;\n        let samplingHeight;\n        let samplingOffset_x;\n        let samplingOffset_y;\n        if (img_width * optionValue_mapSize_y > img_height * optionValue_mapSize_x) {\n          // image w/h greater than canvas w/h\n          samplingWidth = Math.floor((10 * img_height * optionValue_mapSize_x) / (optionValue_mapSize_y * optionValue_cropImage_zoom));\n          // the 10 is because the input is from 10 to 50 in steps of 1; scale down by 10\n          samplingHeight = Math.floor((10 * img_height) / optionValue_cropImage_zoom);\n          samplingOffset_x = Math.floor((optionValue_cropImage_percent_x * (img_width - samplingWidth)) / 100);\n          samplingOffset_y = Math.floor((optionValue_cropImage_percent_y * (img_height - samplingHeight)) / 100);\n        } else {\n          // image w/h leq canvas w/h\n          samplingWidth = Math.floor((10 * img_width) / optionValue_cropImage_zoom);\n          samplingHeight = Math.floor((10 * img_width * optionValue_mapSize_y) / (optionValue_mapSize_x * optionValue_cropImage_zoom));\n          samplingOffset_x = Math.floor((optionValue_cropImage_percent_x * (img_width - samplingWidth)) / 100);\n          samplingOffset_y = Math.floor((optionValue_cropImage_percent_y * (img_height - samplingHeight)) / 100);\n        }\n        ctx_source.drawImage(\n          uploadedImage,\n          samplingOffset_x,\n          samplingOffset_y,\n          samplingWidth,\n          samplingHeight,\n          0,\n          0,\n          ctx_source.canvas.width,\n          ctx_source.canvas.height\n        );\n        break;\n      }\n      default: {\n        throw new Error(\"Unknown optionValue_cropImage\");\n      }\n    }\n  }\n\n  updateCanvas_display() {\n    this.mapCanvasWorker.terminate();\n    const { canvasRef_source, canvasRef_display } = this;\n    const {\n      coloursJSON,\n      selectedBlocks,\n      optionValue_modeNBTOrMapdat,\n      optionValue_mapSize_x,\n      optionValue_mapSize_y,\n      optionValue_staircasing,\n      optionValue_whereSupportBlocks,\n      optionValue_transparency,\n      optionValue_transparencyTolerance,\n      optionValue_betterColour,\n      optionValue_dithering,\n      onGetMapMaterials,\n      onMapPreviewWorker_begin,\n    } = this.props;\n    const ctx_source = canvasRef_source.current.getContext(\"2d\");\n    const canvasImageData = ctx_source.getImageData(0, 0, ctx_source.canvas.width, ctx_source.canvas.height);\n    const t0 = performance.now();\n    this.mapCanvasWorker = new Worker(MapCanvasWorker);\n    this.mapCanvasWorker.onmessage = (e) => {\n      if (e.data.head === \"PIXELS_MATERIALS_CURRENTSELECTEDBLOCKS\") {\n        const t1 = performance.now();\n        console.log(`Calculated map preview data in ${(t1 - t0).toString()}ms`);\n        const ctx_display = canvasRef_display.current.getContext(\"2d\");\n        ctx_display.putImageData(e.data.body.pixels, 0, 0);\n        this.setState({ workerProgress: 1 });\n        onGetMapMaterials({\n          pixelsData: e.data.body.pixels.data,\n          maps: e.data.body.maps,\n          chunks: e.data.body.chunks,\n          currentSelectedBlocks: e.data.body.currentSelectedBlocks,\n        });\n      } else if (e.data.head === \"PROGRESS_REPORT\") {\n        this.setState({ workerProgress: e.data.body });\n      }\n    };\n    onMapPreviewWorker_begin();\n    this.mapCanvasWorker.postMessage({\n      head: \"PIXELS\",\n      body: {\n        coloursJSON: coloursJSON,\n        MapModes: MapModes,\n        WhereSupportBlocksModes: WhereSupportBlocksModes,\n        DitherMethods: DitherMethods,\n        canvasImageData: canvasImageData,\n        selectedBlocks: selectedBlocks,\n        optionValue_modeNBTOrMapdat: optionValue_modeNBTOrMapdat,\n        optionValue_mapSize_x: optionValue_mapSize_x,\n        optionValue_mapSize_y: optionValue_mapSize_y,\n        optionValue_staircasing: optionValue_staircasing,\n        optionValue_whereSupportBlocks: optionValue_whereSupportBlocks,\n        optionValue_transparency: optionValue_transparency,\n        optionValue_transparencyTolerance: optionValue_transparencyTolerance,\n        optionValue_betterColour: optionValue_betterColour,\n        optionValue_dithering: optionValue_dithering,\n      },\n    });\n  }\n\n  increasePreviewScale = () => {\n    this.setState({\n      mapPreviewSizeScale: this.state.mapPreviewSizeScale * 1.2,\n    });\n  };\n\n  decreasePreviewScale = () => {\n    this.setState({\n      mapPreviewSizeScale: this.state.mapPreviewSizeScale / 1.2,\n    });\n  };\n\n  componentWillUnmount() {\n    this.mapCanvasWorker.terminate();\n  }\n\n  render() {\n    const {\n      getLocaleString,\n      optionValue_mapSize_x, // map size in maps\n      optionValue_mapSize_y,\n      optionValue_cropImage,\n      optionValue_showGridOverlay,\n      onFileDialogEvent,\n      uploadedImage,\n    } = this.props;\n    const { mapPreviewSizeScale, workerProgress } = this.state;\n    return (\n      <div className=\"section mapPreviewDiv\">\n        <h2>{getLocaleString(\"MAP-PREVIEW/TITLE\")}</h2>\n        <input type=\"file\" className=\"imgUpload\" ref={this.fileInputRef} onChange={onFileDialogEvent} />\n        <div>\n          <span\n            className=\"gridOverlay\"\n            style={{\n              backgroundImage: `url(${IMG_GridOverlay})`,\n              display: optionValue_showGridOverlay ? \"block\" : \"none\",\n              width: `${(mapPreviewSizeScale * 128 * optionValue_mapSize_x).toString()}px`,\n              height: `${(mapPreviewSizeScale * 128 * optionValue_mapSize_y).toString()}px`,\n              backgroundSize: `${(mapPreviewSizeScale * 128).toString()}px`,\n            }}\n          />\n          <canvas\n            className=\"mapCanvas\"\n            width={128 * optionValue_mapSize_x}\n            height={128 * optionValue_mapSize_y}\n            ref={this.canvasRef_display}\n            style={{\n              width: `${(mapPreviewSizeScale * 128 * optionValue_mapSize_x).toString()}px`,\n              height: `${(mapPreviewSizeScale * 128 * optionValue_mapSize_y).toString()}px`,\n            }}\n            onClick={() => this.fileInputRef.current.click()}\n          />\n          <canvas className=\"displayNone\" width={128 * optionValue_mapSize_x} height={128 * optionValue_mapSize_y} ref={this.canvasRef_source}></canvas>\n        </div>\n        <div className=\"mapResolutionAndZoom\">\n          <div>\n            <Tooltip tooltipText={getLocaleString(\"MAP-PREVIEW/BEST-RESOLUTION-TT\")}>\n              <small>{`${(128 * optionValue_mapSize_x).toString()}x${(128 * optionValue_mapSize_y).toString()}`}</small>\n            </Tooltip>{\" \"}\n            <Tooltip tooltipText={getLocaleString(\"MAP-PREVIEW/ASPECT-RATIO-MISMATCH-TT\")}>\n              <small\n                className=\"mapResWarning\"\n                style={{\n                  display:\n                    uploadedImage === null || uploadedImage.height * optionValue_mapSize_x === uploadedImage.width * optionValue_mapSize_y ? \"none\" : \"inline\",\n                  color: optionValue_cropImage === CropModes.OFF.uniqueId ? \"red\" : \"orange\",\n                }}\n              >\n                {uploadedImage === null ? null : `${uploadedImage.width.toString()}x${uploadedImage.height.toString()}`}\n              </small>\n            </Tooltip>\n          </div>\n          <div>\n            <Tooltip tooltipText={getLocaleString(\"MAP-PREVIEW/SCALE-PLUS-TT\")}>\n              <img\n                alt=\"+\"\n                className=\"sizeButton\"\n                src={IMG_Null}\n                style={{\n                  backgroundImage: `url(${IMG_Textures})`,\n                  backgroundPositionX: \"-96px\",\n                  backgroundPositionY: \"-2048px\",\n                }}\n                onClick={this.increasePreviewScale}\n              />\n            </Tooltip>\n            <Tooltip tooltipText={getLocaleString(\"MAP-PREVIEW/SCALE-MINUS-TT\")}>\n              <img\n                alt=\"-\"\n                className=\"sizeButton\"\n                src={IMG_Null}\n                style={{\n                  backgroundImage: `url(${IMG_Textures})`,\n                  backgroundPositionX: \"-128px\",\n                  backgroundPositionY: \"-2048px\",\n                }}\n                onClick={this.decreasePreviewScale}\n              />\n            </Tooltip>\n          </div>\n        </div>\n        <div\n          className=\"progress\"\n          style={\n            [0, 1].includes(workerProgress)\n              ? {\n                  display: \"unset\",\n                  visibility: \"hidden\",\n                }\n              : { display: \"block\" }\n          }\n        >\n          <span className=\"progressText\">{`${Math.floor(workerProgress * 100)}%`}</span>\n          <div\n            className=\"progressDiv\"\n            style={{\n              width: `${Math.floor(workerProgress * 100)}%`,\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MapPreview;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAPiSURBVHhe7d0xjtwwEABB0h+Xf04fZYWMeUFXAbMglDBSYxXNWGv93ozx9/j81rjf/afnt+YX7x8/v3v+/JyAKAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAsLlXFH9nIGKO9byH0+7wa2M/vPtPz29N+P795u/xCQBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhc68o/s5AxBzreQ+n3eHXxn5495+e35rw/fvN3+MTAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMLmXlH8nYGIOdbzHk67w6+N/fDuPz2/NeH795u/xycAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhM29ovg7AxFzrOc9nHaHXxv74d1/en5rwvfvN3+PTwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIm3tF8XcGIuZYz3s47Q6/NvbDu//0/NaE799v/h6fABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABA294ri7wxEzLGe93DaHX5t7Id3/+n5rQnfv9/8PT4BIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIGzuFcXfGYiYYz3v4bQ7/NrYD+/+0/NbE75/v/l7fAJAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABA2Py/JRQo8g8Assb4BzyTnrLVu1KjAAAAAElFTkSuQmCC\"","import React, { Component } from \"react\";\n\nimport BlockImage from \"../blockImage\";\n\nimport \"./autoCompleteInputBlockToAdd.css\";\n\nclass AutoCompleteInputBlockToAdd extends Component {\n  state = { suggestionSelected: true };\n\n  getRelevantSuggestions = () => {\n    const { coloursJSON, value, optionValue_version } = this.props;\n    let suggestions_prefix = [];\n    let suggestions_includes = [];\n\n    for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\n      for (const [blockId, block] of Object.entries(colourSet.blocks)) {\n        if (!(optionValue_version.MCVersion in block.validVersions)) {\n          continue;\n        }\n        let blockNBTData = block.validVersions[optionValue_version.MCVersion];\n        if (typeof blockNBTData === \"string\") {\n          // this is of the form eg \"&1.12.2\"\n          blockNBTData = block.validVersions[blockNBTData.slice(1)];\n        }\n        if (!block.supportBlockMandatory) {\n          // no gravity affected blocks etc for support / noobline\n          if (blockNBTData.NBTName.startsWith(value)) {\n            suggestions_prefix.push({\n              blockName: blockNBTData.NBTName,\n              colourSetId,\n              blockId,\n            });\n          } else if (blockNBTData.NBTName.includes(value)) {\n            suggestions_includes.push({\n              blockName: blockNBTData.NBTName,\n              colourSetId,\n              blockId,\n            });\n          }\n        }\n      }\n    }\n    return suggestions_prefix.concat(suggestions_includes);\n  };\n\n  handleTextChange = (e) => {\n    const newValue = e.target.value.replace(\" \", \"_\").toLowerCase();\n    this.props.setValue(newValue);\n  };\n\n  onSuggestionClicked = (suggestion) => {\n    this.props.setValue(suggestion.blockName);\n    this.setState({ suggestionSelected: true });\n  };\n\n  onFocus = () => {\n    this.setState({ suggestionSelected: false });\n  };\n\n  render() {\n    const { coloursJSON, value } = this.props;\n    const { suggestionSelected } = this.state;\n\n    const relevantSuggestions = this.getRelevantSuggestions();\n\n    return (\n      <React.Fragment>\n        <input type=\"text\" value={value} onChange={this.handleTextChange} onFocus={this.onFocus} onClick={this.onFocus} />\n        <table className={\"blockToAddSuggestions\"} style={{ display: suggestionSelected || relevantSuggestions.length === 0 ? \"none\" : \"table\" }}>\n          <tbody>\n            {relevantSuggestions.map((suggestion) => (\n              <tr\n                className={\"blockToAddSuggestion\"}\n                key={`${suggestion.colourSetId}$_${suggestion.blockId}_${suggestion.blockName}`}\n                onClick={() => this.onSuggestionClicked(suggestion)}\n              >\n                <th>\n                  <BlockImage coloursJSON={coloursJSON} colourSetId={suggestion.colourSetId} blockId={suggestion.blockId} />\n                </th>\n                <th>{suggestion.blockName}</th>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default AutoCompleteInputBlockToAdd;\n","import { Component } from \"react\";\n\nimport \"./bufferedNumberInput.css\";\n\nclass BufferedNumberInput extends Component {\n  state = { buffer: null };\n\n  constructor(props) {\n    super(props);\n    this.state.buffer = props.value;\n  }\n\n  componentDidUpdate(prevProps) {\n    const { value } = this.props;\n    if (prevProps.value !== value) {\n      this.setState({ buffer: value });\n    }\n  }\n\n  onInputChange = (e) => {\n    const { validators, onValidInput } = this.props;\n    const newValue_buffer = e.target.value;\n    const newValue_int = parseInt(newValue_buffer);\n    this.setState({ buffer: newValue_buffer }, () => {\n      if (\n        validators.every((validator) => {\n          return validator(newValue_int);\n        })\n      ) {\n        onValidInput(newValue_int);\n      }\n    });\n  };\n\n  render() {\n    const { min, max, step, style, disabled } = this.props;\n    const { buffer } = this.state;\n    return <input type=\"number\" min={min} max={max} step={step} value={buffer} onChange={this.onInputChange} disabled={disabled} style={style} />;\n  }\n}\n\nexport default BufferedNumberInput;\n","import React, { Component } from \"react\";\n\nimport AutoCompleteInputBlockToAdd from \"./autoCompleteInputBlockToAdd/autoCompleteInputBlockToAdd\";\n\nimport BufferedNumberInput from \"./bufferedNumberInput/bufferedNumberInput\";\n\nimport Tooltip from \"../tooltip\";\n\nimport BackgroundColourModes from \"./json/backgroundColourModes.json\";\nimport CropModes from \"./json/cropModes.json\";\nimport DitherMethods from \"./json/ditherMethods.json\";\nimport MapModes from \"./json/mapModes.json\";\nimport SupportedVersions from \"./json/supportedVersions.json\";\nimport WhereSupportBlocksModes from \"./json/whereSupportBlocksModes.json\";\n\nimport \"./mapSettings.css\";\n\nclass MapSettings extends Component {\n  render() {\n    const {\n      getLocaleString,\n      coloursJSON,\n      optionValue_version,\n      onOptionChange_version,\n      optionValue_mapSize_x,\n      onOptionChange_mapSize_x,\n      optionValue_mapSize_y,\n      onOptionChange_mapSize_y,\n      optionValue_modeNBTOrMapdat,\n      onOptionChange_modeNBTOrMapdat,\n      optionValue_cropImage,\n      onOptionChange_cropImage,\n      optionValue_cropImage_zoom,\n      onOptionChange_cropImage_zoom,\n      optionValue_cropImage_percent_x,\n      onOptionChange_cropImage_percent_x,\n      optionValue_cropImage_percent_y,\n      onOptionChange_cropImage_percent_y,\n      optionValue_showGridOverlay,\n      onOptionChange_showGridOverlay,\n      optionValue_staircasing,\n      onOptionChange_staircasing,\n      optionValue_whereSupportBlocks,\n      onOptionChange_WhereSupportBlocks,\n      optionValue_supportBlock,\n      setOption_SupportBlock,\n      optionValue_transparency,\n      onOptionChange_transparency,\n      optionValue_transparencyTolerance,\n      onOptionChange_transparencyTolerance,\n      optionValue_mapdatFilenameUseId,\n      onOptionChange_mapdatFilenameUseId,\n      optionValue_mapdatFilenameIdStart,\n      onOptionChange_mapdatFilenameIdStart,\n      optionValue_betterColour,\n      onOptionChange_BetterColour,\n      optionValue_dithering,\n      onOptionChange_dithering,\n      optionValue_preprocessingEnabled,\n      onOptionChange_PreProcessingEnabled,\n      preProcessingValue_brightness,\n      onOptionChange_PreProcessingBrightness,\n      preProcessingValue_contrast,\n      onOptionChange_PreProcessingContrast,\n      preProcessingValue_saturation,\n      onOptionChange_PreProcessingSaturation,\n      preProcessingValue_backgroundColourSelect,\n      onOptionChange_PreProcessingBackgroundColourSelect,\n      preProcessingValue_backgroundColour,\n      onOptionChange_PreProcessingBackgroundColour,\n      optionValue_extras_moreStaircasingOptions,\n      onOptionChange_extras_moreStaircasingOptions,\n    } = this.props;\n    const setting_mode = (\n      <React.Fragment>\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/MODE-TT\")}>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/MODE\")}\n            {\":\"}\n          </b>\n        </Tooltip>{\" \"}\n        <select onChange={onOptionChange_modeNBTOrMapdat} value={optionValue_modeNBTOrMapdat}>\n          {Object.values(MapModes).map((mapMode) => (\n            <option key={mapMode.uniqueId} value={mapMode.uniqueId}>\n              {mapMode.name}\n            </option>\n          ))}\n        </select>\n        <br />\n      </React.Fragment>\n    );\n    const setting_version = (\n      <React.Fragment>\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/VERSION-TT\")}>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/VERSION\")}\n            {\":\"}\n          </b>\n        </Tooltip>{\" \"}\n        <select value={optionValue_version.MCVersion} onChange={onOptionChange_version}>\n          {Object.values(SupportedVersions).map((supportedVersion) => (\n            <option key={supportedVersion.MCVersion} value={supportedVersion.MCVersion}>\n              {supportedVersion.MCVersion}\n            </option>\n          ))}\n        </select>\n        <br />\n      </React.Fragment>\n    );\n    const setting_mapSize = (\n      <React.Fragment>\n        <b>\n          {getLocaleString(\"MAP-SETTINGS/MAP-SIZE\")}\n          {\":\"}\n        </b>{\" \"}\n        <BufferedNumberInput\n          min=\"1\"\n          max={null}\n          step=\"1\"\n          value={optionValue_mapSize_x}\n          validators={[(t) => !isNaN(t), (t) => t > 0]}\n          onValidInput={onOptionChange_mapSize_x}\n          style={{ width: \"2em\" }}\n        />\n        x\n        <BufferedNumberInput\n          min=\"1\"\n          max={null}\n          step=\"1\"\n          value={optionValue_mapSize_y}\n          validators={[(t) => !isNaN(t), (t) => t > 0]}\n          onValidInput={onOptionChange_mapSize_y}\n          style={{ width: \"2em\" }}\n        />\n        <br />\n      </React.Fragment>\n    );\n    let setting_crop = (\n      <tr>\n        <th>\n          <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/CROP/TITLE-TT\")}>\n            <b>\n              {getLocaleString(\"MAP-SETTINGS/CROP/TITLE\")}\n              {\":\"}\n            </b>\n          </Tooltip>{\" \"}\n        </th>\n        <td>\n          <select onChange={onOptionChange_cropImage} value={optionValue_cropImage}>\n            {Object.values(CropModes).map((cropMode) => (\n              <option key={cropMode.uniqueId} value={cropMode.uniqueId}>\n                {getLocaleString(cropMode.localeKey)}\n              </option>\n            ))}\n          </select>\n        </td>\n        <td />\n      </tr>\n    );\n    let setting_crop_zoom = null;\n    let setting_crop_percent_x = null;\n    let setting_crop_percent_y = null;\n    if (optionValue_cropImage === CropModes.MANUAL.uniqueId) {\n      setting_crop_zoom = (\n        <tr>\n          <th>\n            <b>\n              {getLocaleString(\"MAP-SETTINGS/CROP/ZOOM\")}\n              {\":\"}\n            </b>{\" \"}\n          </th>\n          <td>\n            <input\n              type=\"range\"\n              min=\"10\"\n              max=\"50\"\n              value={optionValue_cropImage_zoom}\n              onChange={(e) => onOptionChange_cropImage_zoom(parseInt(e.target.value))}\n            />\n          </td>\n          <td />\n        </tr>\n      );\n      setting_crop_percent_x = (\n        <tr>\n          <th>\n            <b>{\"X:\"}</b>{\" \"}\n          </th>\n          <td>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              value={optionValue_cropImage_percent_x}\n              onChange={(e) => onOptionChange_cropImage_percent_x(parseInt(e.target.value))}\n            />\n          </td>\n          <td>\n            <BufferedNumberInput\n              min=\"0\"\n              max=\"100\"\n              step=\"1\"\n              value={optionValue_cropImage_percent_x}\n              validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 100]}\n              onValidInput={onOptionChange_cropImage_percent_x}\n              style={{ width: \"3em\" }}\n            />\n          </td>\n        </tr>\n      );\n      setting_crop_percent_y = (\n        <tr>\n          <th>\n            <b>{\"Y:\"}</b>{\" \"}\n          </th>\n          <td>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              value={optionValue_cropImage_percent_y}\n              onChange={(e) => onOptionChange_cropImage_percent_y(parseInt(e.target.value))}\n            />\n          </td>\n          <td>\n            <BufferedNumberInput\n              min=\"0\"\n              max=\"100\"\n              step=\"1\"\n              value={optionValue_cropImage_percent_y}\n              validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 100]}\n              onValidInput={onOptionChange_cropImage_percent_y}\n              style={{ width: \"3em\" }}\n            />\n          </td>\n        </tr>\n      );\n    }\n    let settingGroup_cropping = (\n      <div className={optionValue_cropImage === CropModes.MANUAL.uniqueId ? \"settingsGroup\" : null}>\n        <table>\n          <tbody>\n            {setting_crop}\n            {setting_crop_zoom}\n            {setting_crop_percent_x}\n            {setting_crop_percent_y}\n          </tbody>\n        </table>\n      </div>\n    );\n    const setting_grid = (\n      <React.Fragment>\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/GRID-OVERLAY-TT\")}>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/GRID-OVERLAY\")}\n            {\":\"}\n          </b>\n        </Tooltip>{\" \"}\n        <input type=\"checkbox\" checked={optionValue_showGridOverlay} onChange={onOptionChange_showGridOverlay} />\n        <br />\n      </React.Fragment>\n    );\n    const setting_staircasing = (\n      <React.Fragment>\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/3D/TITLE-TT\")}>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/3D/TITLE\")}\n            {\":\"}\n          </b>\n        </Tooltip>{\" \"}\n        <select onChange={onOptionChange_staircasing} value={optionValue_staircasing}>\n          {Object.values(\n            optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId ? MapModes.SCHEMATIC_NBT.staircaseModes : MapModes.MAPDAT.staircaseModes\n          )\n            .filter((staircaseMode) => optionValue_extras_moreStaircasingOptions || !staircaseMode.extra)\n            .map((staircaseMode) => (\n              <option key={staircaseMode.uniqueId} value={staircaseMode.uniqueId}>\n                {getLocaleString(staircaseMode.localeKey)}\n              </option>\n            ))}\n        </select>\n        <br />\n      </React.Fragment>\n    );\n    let settings_mapModeConditional;\n    if (optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId) {\n      settings_mapModeConditional = (\n        <React.Fragment>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/NBT-SPECIFIC/WHERE-SUPPORT-BLOCKS/TITLE\")}\n            {\":\"}\n          </b>{\" \"}\n          <select value={optionValue_whereSupportBlocks} onChange={onOptionChange_WhereSupportBlocks}>\n            {Object.values(WhereSupportBlocksModes).map((whereSupportBlocksMode) => (\n              <option key={whereSupportBlocksMode.uniqueId} value={whereSupportBlocksMode.uniqueId}>\n                {getLocaleString(whereSupportBlocksMode.localeKey)}\n              </option>\n            ))}\n          </select>\n          <br />\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/NBT-SPECIFIC/SUPPORT-BLOCK-TO-ADD\")}\n            {\":\"}\n          </b>{\" \"}\n          <AutoCompleteInputBlockToAdd\n            coloursJSON={coloursJSON}\n            value={optionValue_supportBlock}\n            setValue={setOption_SupportBlock}\n            optionValue_version={optionValue_version}\n          />\n          <br />\n        </React.Fragment>\n      );\n    } else {\n      let setting_transparency = (\n        <tr>\n          <th>\n            <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/TRANSPARENCY-TT\")}>\n              <b>\n                {getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/TRANSPARENCY\")}\n                {\":\"}\n              </b>\n            </Tooltip>{\" \"}\n          </th>\n          <td>\n            <input type=\"checkbox\" checked={optionValue_transparency} onChange={onOptionChange_transparency} />\n          </td>\n          <td />\n        </tr>\n      );\n      let setting_transparencyTolerance = null;\n      if (optionValue_transparency) {\n        setting_transparencyTolerance = (\n          <tr>\n            <th>\n              <b>\n                {getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/TRANSPARENCY-TOLERANCE\")}\n                {\":\"}\n              </b>{\" \"}\n            </th>\n            <td>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"256\"\n                value={optionValue_transparencyTolerance}\n                onChange={(e) => onOptionChange_transparencyTolerance(parseInt(e.target.value))}\n              />\n            </td>\n            <td>\n              <BufferedNumberInput\n                min=\"0\"\n                max=\"256\"\n                step=\"1\"\n                value={optionValue_transparencyTolerance}\n                validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 256]}\n                onValidInput={onOptionChange_transparencyTolerance}\n                style={{ width: \"3em\" }}\n              />\n            </td>\n          </tr>\n        );\n      }\n      let settingGroup_transparency = (\n        <div className={optionValue_transparency ? \"settingsGroup\" : null}>\n          <table>\n            <tbody>\n              {setting_transparency}\n              {setting_transparencyTolerance}\n            </tbody>\n          </table>\n        </div>\n      );\n      let setting_mapdatFilenameUseId = (\n        <tr>\n          <th>\n            <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/MAPDAT-FILENAME-USE-ID-TT\")}>\n              <b>\n                {getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/MAPDAT-FILENAME-USE-ID\")}\n                {\":\"}\n              </b>\n            </Tooltip>{\" \"}\n          </th>\n          <td>\n            <input type=\"checkbox\" checked={optionValue_mapdatFilenameUseId} onChange={onOptionChange_mapdatFilenameUseId} />\n          </td>\n          <td />\n          <td />\n        </tr>\n      );\n      let setting_mapdatFilenameIdStart = null;\n      if (optionValue_mapdatFilenameUseId) {\n        setting_mapdatFilenameIdStart = (\n          <tr>\n            <th>\n              <b>\n                {getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/MAPDAT-FILENAME-ID-RANGE\")}\n                {\":\"}\n              </b>{\" \"}\n            </th>\n            <td>\n              <BufferedNumberInput\n                min=\"0\"\n                step=\"1\"\n                value={optionValue_mapdatFilenameIdStart}\n                validators={[(t) => !isNaN(t), (t) => t >= 0]}\n                onValidInput={onOptionChange_mapdatFilenameIdStart}\n                style={{ width: \"3em\" }}\n              />\n            </td>\n            <td>\n              <b>{\"-\"}</b>\n            </td>\n            <td>\n              <BufferedNumberInput\n                value={-1 + optionValue_mapdatFilenameIdStart + optionValue_mapSize_x * optionValue_mapSize_y}\n                disabled={true}\n                style={{ width: \"3em\" }}\n              />\n            </td>\n          </tr>\n        );\n      }\n      let settingGroup_mapdatFilename = (\n        <div className={optionValue_mapdatFilenameUseId ? \"settingsGroup\" : null}>\n          <table>\n            <tbody>\n              {setting_mapdatFilenameUseId}\n              {setting_mapdatFilenameIdStart}\n            </tbody>\n          </table>\n        </div>\n      );\n      settings_mapModeConditional = (\n        <React.Fragment>\n          {settingGroup_transparency}\n          {settingGroup_mapdatFilename}\n        </React.Fragment>\n      );\n    }\n    const setting_betterColour = (\n      <React.Fragment>\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/BETTER-COLOUR-TT\")}>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/BETTER-COLOUR\")}\n            {\":\"}\n          </b>\n        </Tooltip>{\" \"}\n        <input type=\"checkbox\" checked={optionValue_betterColour} onChange={onOptionChange_BetterColour} />\n        <br />\n      </React.Fragment>\n    );\n    const setting_dithering = (\n      <React.Fragment>\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/DITHERING/TITLE-TT\")}>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/DITHERING/TITLE\")}\n            {\":\"}\n          </b>\n        </Tooltip>{\" \"}\n        <select value={optionValue_dithering} onChange={onOptionChange_dithering}>\n          {Object.keys(DitherMethods).map((ditherMethodKey) => (\n            <option key={DitherMethods[ditherMethodKey][\"uniqueId\"]} value={DitherMethods[ditherMethodKey][\"uniqueId\"]}>\n              {\"localeKey\" in DitherMethods[ditherMethodKey]\n                ? getLocaleString(DitherMethods[ditherMethodKey][\"localeKey\"])\n                : DitherMethods[ditherMethodKey][\"name\"]}\n            </option>\n          ))}\n        </select>\n        <br />\n      </React.Fragment>\n    );\n    const setting_preprocessing = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/ENABLE\")}\n            {\":\"}\n          </b>{\" \"}\n          <input type=\"checkbox\" checked={optionValue_preprocessingEnabled} onChange={onOptionChange_PreProcessingEnabled} />\n        </th>\n        <td />\n        <td />\n      </tr>\n    );\n    const setting_preprocessing_brightness = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/BRIGHTNESS\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"200\"\n            value={preProcessingValue_brightness}\n            onChange={(e) => onOptionChange_PreProcessingBrightness(parseInt(e.target.value))}\n            disabled={!optionValue_preprocessingEnabled}\n          />\n        </td>\n        <td>\n          <BufferedNumberInput\n            min=\"0\"\n            max=\"200\"\n            step=\"1\"\n            value={preProcessingValue_brightness}\n            validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 200]}\n            onValidInput={onOptionChange_PreProcessingBrightness}\n            disabled={!optionValue_preprocessingEnabled}\n            style={{ width: \"3em\" }}\n          />\n        </td>\n      </tr>\n    );\n    const setting_preprocessing_contrast = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/CONTRAST\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"200\"\n            value={preProcessingValue_contrast}\n            onChange={(e) => onOptionChange_PreProcessingContrast(parseInt(parseInt(e.target.value)))}\n            disabled={!optionValue_preprocessingEnabled}\n          />\n        </td>\n        <td>\n          <BufferedNumberInput\n            min=\"0\"\n            max=\"200\"\n            step=\"1\"\n            value={preProcessingValue_contrast}\n            validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 200]}\n            onValidInput={onOptionChange_PreProcessingContrast}\n            disabled={!optionValue_preprocessingEnabled}\n            style={{ width: \"3em\" }}\n          />\n        </td>\n      </tr>\n    );\n    const setting_preprocessing_saturation = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/SATURATION\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"200\"\n            value={preProcessingValue_saturation}\n            onChange={(e) => onOptionChange_PreProcessingSaturation(parseInt(e.target.value))}\n            disabled={!optionValue_preprocessingEnabled}\n          />\n        </td>\n        <td>\n          <BufferedNumberInput\n            min=\"0\"\n            max=\"200\"\n            step=\"1\"\n            value={preProcessingValue_saturation}\n            validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 200]}\n            onValidInput={onOptionChange_PreProcessingSaturation}\n            disabled={!optionValue_preprocessingEnabled}\n            style={{ width: \"3em\" }}\n          />\n        </td>\n      </tr>\n    );\n    const setting_preprocessing_background = (\n      <tr>\n        <th>\n          <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/PREPROCESSING/BACKGROUND/TITLE-TT\")}>\n            <b>\n              {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/BACKGROUND/TITLE\")}\n              {\":\"}\n            </b>\n          </Tooltip>{\" \"}\n        </th>\n        <td>\n          <select\n            onChange={onOptionChange_PreProcessingBackgroundColourSelect}\n            value={preProcessingValue_backgroundColourSelect}\n            disabled={!optionValue_preprocessingEnabled}\n          >\n            {Object.values(BackgroundColourModes).map((backgroundColourMode) => (\n              <option key={backgroundColourMode.uniqueId} value={backgroundColourMode.uniqueId}>\n                {getLocaleString(backgroundColourMode.localeKey)}\n              </option>\n            ))}\n          </select>\n        </td>\n      </tr>\n    );\n    const setting_preprocessing_backgroundColour = (\n      <tr>\n        <th>\n          <b>\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/BACKGROUND-COLOUR\")}\n            {\":\"}\n          </b>{\" \"}\n        </th>\n        <td>\n          <input\n            type=\"color\"\n            value={preProcessingValue_backgroundColour}\n            onChange={onOptionChange_PreProcessingBackgroundColour}\n            disabled={!optionValue_preprocessingEnabled || preProcessingValue_backgroundColourSelect === BackgroundColourModes.OFF.uniqueId}\n          />\n        </td>\n      </tr>\n    );\n    const settingGroup_preprocessing = (\n      <React.Fragment>\n        <details>\n          <summary>{getLocaleString(\"MAP-SETTINGS/PREPROCESSING/TITLE\")}</summary>\n          <div className={optionValue_preprocessingEnabled ? \"settingsGroup\" : null}>\n            <table>\n              <tbody>\n                {setting_preprocessing}\n                {setting_preprocessing_brightness}\n                {setting_preprocessing_contrast}\n                {setting_preprocessing_saturation}\n                {setting_preprocessing_background}\n                {setting_preprocessing_backgroundColour}\n              </tbody>\n            </table>\n          </div>\n        </details>\n      </React.Fragment>\n    );\n    const setting_extras_moreStaircasingOptions = (\n      <tr>\n        <th>\n          <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/EXTRAS/MORE-STAIRCASING-OPTIONS-TT\")}>\n            <b>\n              {getLocaleString(\"MAP-SETTINGS/EXTRAS/MORE-STAIRCASING-OPTIONS\")}\n              {\":\"}\n            </b>\n          </Tooltip>{\" \"}\n        </th>\n        <td>\n          <input type=\"checkbox\" checked={optionValue_extras_moreStaircasingOptions} onChange={onOptionChange_extras_moreStaircasingOptions} />\n        </td>\n      </tr>\n    );\n    const settingGroup_extras = (\n      <React.Fragment>\n        <details>\n          <summary>{getLocaleString(\"MAP-SETTINGS/EXTRAS/TITLE\")}</summary>\n          <table>\n            <tbody>{setting_extras_moreStaircasingOptions}</tbody>\n          </table>\n        </details>\n      </React.Fragment>\n    );\n    const settingsDiv = (\n      <div className=\"section settingsDiv\">\n        <h2>{getLocaleString(\"MAP-SETTINGS/TITLE\")}</h2>\n        {setting_mode}\n        {setting_version}\n        {setting_mapSize}\n        {settingGroup_cropping}\n        {setting_grid}\n        {setting_staircasing}\n        {settings_mapModeConditional}\n        {setting_betterColour}\n        {setting_dithering}\n        {settingGroup_preprocessing}\n        {settingGroup_extras}\n      </div>\n    );\n    return settingsDiv;\n  }\n}\n\nexport default MapSettings;\n","import React, { Component } from \"react\";\n\nimport Tooltip from \"../tooltip\";\n\nimport BlockImage from \"./blockImage\";\n\nimport \"./materials.css\";\n\nclass Materials extends Component {\n  state = { onlyMaxPerSplit: false,\n            chunksToDisplay: [],\n            allMaterials: true,\n          };\n  \n  rowInput = 0;\n  columnInput = 0;\n  alphaColorIdx = 61;\n\n  onOnlyMaxPerSplitChange = () => {\n    this.setState((currentState) => ({\n      // nb this method of passing currentState instead of using this.state... is prefered; TODO neaten up controller uses\n      onlyMaxPerSplit: !currentState.onlyMaxPerSplit,\n    }));\n  };\n\n  onDisplayAllChange = () => {\n    this.setState((currentState) => ({\n      allMaterials: !currentState.allMaterials,\n    }));\n  };\n\n  onResetList = () => {\n    this.setState((currentState) => ({\n      chunksToDisplay: [],\n    }));\n  }\n\n  onAddChunkToList = () => {\n    const { chunksToDisplay } = this.state;\n    let chunkCoords = { row: this.rowInput, column: this.columnInput };\n    let updatedChunksToDisplay = chunksToDisplay;\n    if(!this.chunkExists(chunkCoords)) {\n      chunksToDisplay.push(chunkCoords);\n    }\n    this.setState((currentState) => ({\n      chunksToDisplay: updatedChunksToDisplay,\n    }));\n  }\n\n  onRowChanged = (e) => {\n    this.rowInput=parseInt(e.target.value);\n  }\n\n  onColumnChanged = (e) => {\n    this.columnInput=parseInt(e.target.value);\n  }\n\n  chunkExists(newChunkCoords) {\n  const { chunksToDisplay } = this.state;\n    for (const existingChunkCoords of chunksToDisplay) {\n      if((existingChunkCoords.row === newChunkCoords.row) && (existingChunkCoords.column === newChunkCoords.column)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  displayChunkMaterials = () => {   \n    const { chunksToDisplay } = this.state;\n    let materialsTotal = this.getNewMaterialsList();\n    for (const chunkCoords of chunksToDisplay) {\n      this.addChunk(materialsTotal, chunkCoords.row, chunkCoords.column);\n    }\n    return materialsTotal;\n  }\n\n  displayAllMaterials = () => {\n    const { currentMaterialsData } = this.props;\n    let materialsTotal = this.getNewMaterialsList();\n    let curRow = 0, curCol = 0;\n    for (const rowOfChunks of currentMaterialsData.chunks) {\n      curRow++;\n      for (const chunk of rowOfChunks) {\n        curCol++;\n        this.addChunk(materialsTotal, curRow, curCol);\n      }\n      curCol = 0;\n    }\n    return materialsTotal;\n  }\n\n  addChunk (destination, row, col) {\n    const { currentMaterialsData } = this.props;\n    let rowNum = 0, colNum = 0;\n    for (const rowOfChunks of currentMaterialsData.chunks) {\n      if(++rowNum !== row) continue;\n      for (const chunk of rowOfChunks) {\n        if(++colNum !== col) continue;\n        this.addSupportBlockCount(destination, chunk);\n        this.addMaterialsCount(destination, chunk);\n      }\n      colNum = 0;\n    }\n  }\n\n  addSupportBlockCount(destination, chunk) {\n    const { onlyMaxPerSplit } = this.state;\n    if (onlyMaxPerSplit) {\n      destination.supportBlockCount = Math.max(destination.supportBlockCount, chunk.supportBlockCount);\n    } \n    else {\n      destination.supportBlockCount += chunk.supportBlockCount;\n    }\n  }\n\n  addMaterialsCount(destination, chunk) {\n    const { onlyMaxPerSplit } = this.state;\n    for (const [colourSetId, materialCount] of Object.entries(chunk.materials)) {\n      if (onlyMaxPerSplit) {\n        destination.materials[colourSetId] = Math.max(destination.materials[colourSetId], materialCount);\n      } \n      else {\n        if(colourSetId != this.alphaColorIdx) {\n          destination.materials[colourSetId] += materialCount;\n        }\n      }\n    }\n  }\n\n  //Sorting is a prettier output, but player feedback is that they organize their storage around the static mats\n  //list because it is a predictable order. Sorting actually makes them do more work to gather mats from storage. \n  getSortedNonZeroMaterials(materialsList) {\n    return Object.entries(materialsList)\n      .filter(([_, value]) => value !== 0)\n//      .sort((first, second) => {\n//       return second[1] - first[1];\n//    });\n  }\n\n  getNewMaterialsList() {\n    const { coloursJSON } = this.props;\n    let newMaterialsList = { materials: {}, supportBlockCount: 0 };\n    for (const colourSetId of Object.keys(coloursJSON)) {\n      newMaterialsList.materials[colourSetId] = 0;\n    }\n    return newMaterialsList;\n  }\n\n  formatMaterialCount = (count) => {\n    const numberOfStacks = Math.floor(count / 64);\n    const remainder = count % 64;\n    const numberOfShulkers = count / 1728;\n    return `${count.toString()}${\n      numberOfStacks !== 0\n        ? ` (${numberOfStacks.toString()}x64${remainder !== 0 ? ` + ${remainder.toString()}` : \"\"}${\n            numberOfShulkers >= 1 ? `, ${numberOfShulkers.toFixed(2)} SB` : \"\"\n          })`\n        : \"\"\n    }`;\n  };\n\n  colourSetIdAndBlockIdFromNBTName(blockName) {\n    const { coloursJSON, optionValue_version } = this.props;\n    for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\n      for (const [blockId, block] of Object.entries(colourSet.blocks)) {\n        if (!(optionValue_version.MCVersion in block.validVersions)) {\n          continue;\n        }\n        let blockNBTData = block.validVersions[optionValue_version.MCVersion];\n        if (typeof blockNBTData === \"string\") {\n          // this is of the form eg \"&1.12.2\"\n          blockNBTData = block.validVersions[blockNBTData.slice(1)];\n        }\n        if (\n          Object.keys(blockNBTData.NBTArgs).length === 0 && // no exotic blocks for noobline\n          blockName.toLowerCase() === blockNBTData.NBTName.toLowerCase()\n        ) {\n          return { colourSetId, blockId };\n        }\n      }\n    }\n    return null; // if block not found\n  }\n\n  render() {\n    const { getLocaleString, coloursJSON, optionValue_supportBlock, currentMaterialsData } = this.props;\n    const { onlyMaxPerSplit, allMaterials} = this.state;\n    let materialsToDisplay = {};\n    if(allMaterials) {\n      materialsToDisplay = this.displayAllMaterials();\n    }\n    else {\n      materialsToDisplay = this.displayChunkMaterials();\n    }\n\n    const nonZeroMaterialsItems = this.getSortedNonZeroMaterials(materialsToDisplay.materials);\n    const supportBlockCount = materialsToDisplay.supportBlockCount;\n    const supportBlockIds = this.colourSetIdAndBlockIdFromNBTName(optionValue_supportBlock);\n    return (\n      <div className=\"section materialsDiv\">\n        <h2>{getLocaleString(\"MATERIALS/TITLE\")}</h2>\n        <Tooltip tooltipText={getLocaleString(\"MATERIALS/SHOW-PER-SPLIT-TT\")}>\n          <b>\n            {getLocaleString(\"MATERIALS/SHOW-PER-SPLIT\")}\n            {\":\"}\n          </b>\n        </Tooltip>{\" \"}\n        <input type=\"checkbox\" checked={onlyMaxPerSplit} onChange={this.onOnlyMaxPerSplitChange} />\n        <br />\n        <b>\n        {getLocaleString(\"MATERIALS/CHUNKMATS-DISPLAYALL-CHECK\")} {\":\"}\n        </b>\n        <input type=\"checkbox\" checked={allMaterials} onChange={this.onDisplayAllChange} />\n        <br />\n        <Tooltip tooltipText={getLocaleString(\"MATERIALS/CHUNKMATS-TT\")}>\n          <b>\n            {getLocaleString(\"MATERIALS/CHUNKMATS\")}\n            {\":\"}\n          </b>\n        </Tooltip>{\" \"}\n        <br />\n        {getLocaleString(\"MATERIALS/CHUNKMATS-ROWS\")}{\" \"}\n        <input type=\"text\" class=\"chunkCoordsInput\" name=\"rowVal\" onChange={this.onRowChanged}/>\n        {getLocaleString(\"MATERIALS/CHUNKMATS-COLUMNS\")}{\" \"}\n        <input type=\"text\" class=\"chunkCoordsInput\" name=\"colVal\" onChange={this.onColumnChanged}/>\n        <br />\n        <button onClick={this.onResetList}>{getLocaleString(\"MATERIALS/CHUNKMATS-RESET\")}</button>\n        <button onClick={this.onAddChunkToList}>{getLocaleString(\"MATERIALS/CHUNKMATS-ADD\")}</button>\n        <br />\n        <table id=\"materialtable\">\n          <tbody>\n            <tr>\n              <th>{getLocaleString(\"MATERIALS/BLOCK\")}</th>\n              <th>{getLocaleString(\"MATERIALS/AMOUNT\")}</th>\n            </tr>\n            {supportBlockCount !== 0 && (\n              <tr>\n                <th>\n                  <Tooltip tooltipText={getLocaleString(\"MATERIALS/PLACEHOLDER-BLOCK-TT\")}>\n                    <BlockImage\n                      getLocaleString={getLocaleString}\n                      coloursJSON={coloursJSON}\n                      colourSetId={supportBlockIds === null ? \"64\" : supportBlockIds.colourSetId}\n                      blockId={supportBlockIds === null ? \"2\" : supportBlockIds.blockId}\n                    />\n                  </Tooltip>\n                </th>\n                <th>{this.formatMaterialCount(supportBlockCount)}</th>\n              </tr>\n            )}\n            {nonZeroMaterialsItems.map(([colourSetId, materialCount]) => {\n              const blockId = currentMaterialsData.currentSelectedBlocks[colourSetId];\n              return (\n                <tr key={colourSetId}>\n                  <th>\n                    <Tooltip tooltipText={coloursJSON[colourSetId].blocks[blockId].displayName}>\n                      <BlockImage coloursJSON={coloursJSON} colourSetId={colourSetId} blockId={blockId} />\n                    </Tooltip>\n                  </th>\n                  <th>{this.formatMaterialCount(materialCount)}</th>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default Materials;\n","/*\n  A mapping from type names to NBT type numbers.\n  This is NOT just an enum, these values have to stay as they are\n  https://minecraft.fandom.com/wiki/NBT_format#TAG_definition\n*/\nconst TagTypes = {\n  end: 0,\n  byte: 1,\n  short: 2,\n  int: 3,\n  long: 4,\n  float: 5,\n  double: 6,\n  byteArray: 7,\n  string: 8,\n  list: 9,\n  compound: 10,\n  intArray: 11,\n  longArray: 12,\n};\n\nclass NBTReader {\n  constructor() {\n    if (typeof ArrayBuffer === \"undefined\") {\n      throw new Error(\"Missing required type ArrayBuffer\");\n    }\n    if (typeof DataView === \"undefined\") {\n      throw new Error(\"Missing required type DataView\");\n    }\n    if (typeof Uint8Array === \"undefined\") {\n      throw new Error(\"Missing required type Uint8Array\");\n    }\n    this.buffer = null;\n    this.dataView = null;\n    this.arrayView = null;\n    this.offset = null;\n  }\n\n  loadBuffer(buffer) {\n    this.buffer = buffer;\n    this.dataView = new DataView(this.buffer);\n    this.arrayView = new Uint8Array(this.buffer);\n    this.offset = 0;\n  }\n\n  decodeUTF8(bytes) {\n    let codepoints = [];\n    for (let i = 0; i < bytes.length; i++) {\n      const byte = bytes[i];\n      if ((byte & 0x80) === 0) {\n        // single byte 0x0001 to 0x007F\n        codepoints.push(byte);\n      } else if ((byte & 0xe0) === 0xc0) {\n        // two bytes for 0x0000 and 0x0080 to 0x07FF\n        codepoints.push(((byte & 0x1f) << 6) | (bytes[i + 1] & 0x3f));\n        i += 1;\n      } else if ((byte & 0xf0) === 0xe0) {\n        // three bytes for 0x0800 to 0xFFFF\n        codepoints.push(((byte & 0x0f) << 12) | ((bytes[i + 1] & 0x3f) << 6) | (bytes[i + 2] & 0x3f));\n        i += 2;\n      }\n    }\n    return String.fromCharCode.apply(null, codepoints);\n  }\n\n  read(dataType, size) {\n    const value = this.dataView[`get${dataType}`](this.offset);\n    this.offset += size;\n    return value;\n  }\n\n  readByType(dataType) {\n    switch (dataType) {\n      case TagTypes.end: {\n        return this.readByType(TagTypes.byte);\n      }\n      case TagTypes.byte: {\n        return this.read(\"Int8\", 1);\n      }\n      case TagTypes.short: {\n        return this.read(\"Int16\", 2);\n      }\n      case TagTypes.int: {\n        return this.read(\"Int32\", 4);\n      }\n      case TagTypes.long: {\n        // NB: special: JS doesn't support native 64 bit ints; returns an array of two 32 bit ints\n        return [this.readByType(TagTypes.int), this.readByType(TagTypes.int)];\n      }\n      case TagTypes.float: {\n        return this.read(\"Float32\", 4);\n      }\n      case TagTypes.double: {\n        return this.read(\"Float64\", 8);\n      }\n      case TagTypes.byteArray: {\n        const arrayLength = this.readByType(TagTypes.int);\n        const returnArray = this.arrayView.slice(this.offset, this.offset + arrayLength);\n        this.offset += arrayLength;\n        return returnArray;\n      }\n      case TagTypes.string: {\n        const string_bytes_length = this.readByType(TagTypes.short);\n        const string_bytes = this.arrayView.slice(this.offset, this.offset + string_bytes_length);\n        this.offset += string_bytes_length;\n        return this.decodeUTF8(string_bytes);\n      }\n      case TagTypes.list: {\n        const list_objectType = this.readByType(TagTypes.byte);\n        const list_length = this.readByType(TagTypes.int);\n        let returnObject = { type: list_objectType, value: [] };\n        for (let i = 0; i < list_length; i++) {\n          returnObject.value.push(this.readByType(list_objectType));\n        }\n        return returnObject;\n      }\n      case TagTypes.compound: {\n        let returnObject = {};\n        while (true) {\n          let tagType = this.readByType(TagTypes.byte);\n          if (tagType === TagTypes.end) {\n            break;\n          } else {\n            let key = this.readByType(TagTypes.string);\n            let value = this.readByType(tagType);\n            returnObject[key] = { type: tagType, value: value };\n          }\n        }\n        return returnObject;\n      }\n      case TagTypes.intArray: {\n        const returnArray = [];\n        const array_length = this.readByType(TagTypes.int);\n        for (let i = 0; i < array_length; i++) {\n          returnArray.push(this.readByType(TagTypes.int));\n        }\n        return returnArray;\n      }\n      case TagTypes.longArray: {\n        const returnArray = [];\n        const array_length = this.readByType(TagTypes.int);\n        for (let i = 0; i < array_length; i++) {\n          returnArray.push(this.readByType(TagTypes.long));\n          // NB this is an array of length 2 arrays of ints as specified in case:long\n        }\n        return returnArray;\n      }\n      default: {\n        throw new Error(`Unknown data type ${dataType}`);\n      }\n    }\n  }\n\n  getData() {\n    this.readByType(TagTypes.byte);\n    return {\n      name: this.readByType(TagTypes.string),\n      value: this.readByType(TagTypes.compound),\n    }; // NB this reads the top-level compound which does not have a terminating null byte\n  }\n}\n\nexport default NBTReader;\n","import React, { Component } from \"react\";\n\nimport BlockImage from \"../blockImage\";\n\nimport \"./waila.css\";\n\n// What Am I Looking At\n\nclass Waila extends Component {\n  render() {\n    const { getLocaleString, coloursJSON, selectedBlock, ...props_others } = this.props;\n    return (\n      <div className={\"viewOnline_waila\"} {...props_others}>\n        <h3>{`x: ${selectedBlock.x.toString()} y: ${selectedBlock.y.toString()} z: ${selectedBlock.z.toString()} Row: ${selectedBlock.row.toString()} Column: ${selectedBlock.column.toString()}`}</h3>\n        <BlockImage\n          getLocaleString={getLocaleString}\n          coloursJSON={coloursJSON}\n          colourSetId={selectedBlock.colourSetId.toString()}\n          blockId={selectedBlock.blockId.toString()}\n          style={{ verticalAlign: \"middle\" }}\n        />{\" \"}\n        {selectedBlock.colourSetId === 64 && selectedBlock.blockId === 2\n          ? getLocaleString(\"MATERIALS/PLACEHOLDER-BLOCK-TT\")\n          : coloursJSON[selectedBlock.colourSetId.toString()].blocks[selectedBlock.blockId.toString()].displayName}\n      </div>\n    );\n  }\n}\n\nexport default Waila;\n","import React, { Component, createRef } from \"react\";\n\nimport Tooltip from \"../../tooltip\";\n\nimport MapModes from \"../json/mapModes.json\";\n\nimport IMG_Textures from \"../../../images/textures.png\";\n\nimport NBTReader from \"../nbtReader\";\nimport Waila from \"../viewOnlineCommon/waila\";\n\nimport \"./viewOnline2D.css\";\n\nclass ViewOnline2D extends Component {\n  state = {\n    viewOnline_NBT_decompressed: null,\n    selectedBlock: null,\n    zoomFactor: 1,\n    canvasOffset_x: 0,\n    canvasOffset_y: 0,\n    focusedChunks: [],\n  };\n\n  rowInput = 0;\n  columnInput = 0;\n  alphaColorIdx = 61;\n\n  paletteIdToColourSetIdAndBlockId = [];\n  mouse = { x: 0, y: 0, down: false, movedSinceDown: null };\n\n  getNBTDecompressed() {\n    const { viewOnline_NBT } = this.props;\n    let nbtReader = new NBTReader();\n    nbtReader.loadBuffer(viewOnline_NBT);\n    const viewOnline_NBT_decompressed = nbtReader.getData();\n    return viewOnline_NBT_decompressed;\n  }\n\n  drawNBT() {\n    const { coloursJSON, optionValue_version, optionValue_mapSize_x, optionValue_mapSize_y, optionValue_staircasing } = this.props;\n    const { viewOnline_NBT_decompressed } = this.state;\n    const { canvasRef_viewOnline } = this;\n\n    this.paletteIdToColourSetIdAndBlockId = [];\n    const NBT_palette = viewOnline_NBT_decompressed.value.palette.value.value;\n    for (let paletteItem_index = 0; paletteItem_index < NBT_palette.length; paletteItem_index++) {\n      const paletteItem = NBT_palette[paletteItem_index];\n      let paletteItemFound = false;\n      for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\n        if (paletteItemFound) {\n          break;\n        }\n        for (const [blockId, block] of Object.entries(colourSet.blocks)) {\n          if (paletteItemFound) {\n            break;\n          }\n          if (!(optionValue_version.MCVersion in block.validVersions)) {\n            continue;\n          }\n          let blockNBTData = block.validVersions[optionValue_version.MCVersion];\n          if (typeof blockNBTData === \"string\") {\n            // this is of the form eg \"&1.12.2\"\n            blockNBTData = block.validVersions[blockNBTData.slice(1)];\n          }\n          if (\n            paletteItem.Name.value === `minecraft:${blockNBTData.NBTName}` &&\n            ((!(\"Properties\" in paletteItem) && Object.keys(blockNBTData.NBTArgs).length === 0) ||\n              (\"Properties\" in paletteItem &&\n                Object.keys(paletteItem.Properties.value).length === Object.keys(blockNBTData.NBTArgs).length &&\n                Object.entries(blockNBTData.NBTArgs).every(([argKey, argValue]) => {\n                  return argKey in paletteItem.Properties.value && argValue === paletteItem.Properties.value[argKey].value;\n                })))\n          ) {\n            this.paletteIdToColourSetIdAndBlockId.push([parseInt(colourSetId), parseInt(blockId)]);\n            paletteItemFound = true;\n          }\n        }\n      }\n      if (!paletteItemFound) {\n        console.log(`Didn't find ${paletteItem.Name.value} in coloursJSON; using placeholder texture`);\n        this.paletteIdToColourSetIdAndBlockId.push([64, 2]);\n      }\n    }\n\n    const img_textures = new Image();\n    img_textures.onload = () => {\n      const canvasRef_viewOnline_ctx = canvasRef_viewOnline.current.getContext(\"2d\");\n      canvasRef_viewOnline_ctx.textAlign = \"right\";\n      canvasRef_viewOnline_ctx.textBaseline = \"alphabetic\";\n      canvasRef_viewOnline_ctx.font = \"16px kenpixel_mini_square\";\n      canvasRef_viewOnline_ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\n      canvasRef_viewOnline_ctx.fillRect(0, 0, 33 * 128 * optionValue_mapSize_x, 33 * (128 * optionValue_mapSize_y + 1));\n      let processedNoobline = false;\n      for (const block of viewOnline_NBT_decompressed.value.blocks.value.value) {\n        const block_paletteId = block.state.value;\n        const block_coords = block.pos.value.value;\n        if (block_coords[2] === 0) {\n          if (processedNoobline) {\n            continue;\n          } else {\n            processedNoobline = true;\n            // since we ordered blocks by Z and Y in nbt.jsworker, the first block in the column is the highest block of the\n            // noobline pillar (the correct height for the map preview)\n          }\n        } else {\n          processedNoobline = false; // ready for next column\n          if (block_paletteId === NBT_palette.length - 1) {\n            // last palette entry is support / noobline. don't draw this except on the noobline\n            continue;\n          }\n        }\n        const [int_colourSetId, int_blockId] = this.paletteIdToColourSetIdAndBlockId[block_paletteId];\n        let int_colourSetId_toDraw, int_blockId_toDraw;\n        if (!(int_colourSetId === 64 && int_blockId === 2) && coloursJSON[int_colourSetId.toString()].blocks[int_blockId.toString()].presetIndex === \"CUSTOM\") {\n          // if not placeholder, and is a custom block, then draw colour on canvas\n          int_colourSetId_toDraw = 64;\n          int_blockId_toDraw = 5;\n          canvasRef_viewOnline_ctx.fillStyle = `rgb(${coloursJSON[int_colourSetId.toString()].tonesRGB.normal.join(\", \")})`;\n          canvasRef_viewOnline_ctx.fillRect(33 * block_coords[0], 33 * block_coords[2], 32, 32);\n        } else {\n          int_colourSetId_toDraw = int_colourSetId;\n          int_blockId_toDraw = int_blockId;\n        }\n        canvasRef_viewOnline_ctx.drawImage(\n          img_textures,\n          32 * int_blockId_toDraw,\n          32 * int_colourSetId_toDraw,\n          32,\n          32,\n          33 * block_coords[0],\n          33 * block_coords[2],\n          32,\n          32\n        );\n        /*\n        //original 2D view block shadow code\n          let currentY = null;\n          if (block_coords[2] !== 0) {\n          if (block_coords[1] > currentY) {\n            canvasRef_viewOnline_ctx.fillStyle = \"rgba(0, 0, 32, 0.2)\";\n            for (let i = 0; i < 4; i++) {\n              canvasRef_viewOnline_ctx.fillRect(33 * block_coords[0], 33 * block_coords[2], 33, -2 * (i + 1));\n            }\n          } else if (block_coords[1] < currentY) {\n            canvasRef_viewOnline_ctx.fillStyle = \"rgba(0, 0, 32, 0.2)\";\n            for (let i = 0; i < 4; i++) {\n              canvasRef_viewOnline_ctx.fillRect(33 * block_coords[0], 33 * block_coords[2], 33, 2 * (i + 1));\n            }\n          }\n        }\n        currentY = block_coords[1];\n        */\n        canvasRef_viewOnline_ctx.strokeStyle = \"rgba(0, 0, 0, 1)\";\n        canvasRef_viewOnline_ctx.fillStyle = \"rgba(255, 255, 255, 1)\";\n        if (\n          [\n            MapModes.SCHEMATIC_NBT.staircaseModes.CLASSIC.uniqueId,\n            MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId,\n            MapModes.MAPDAT.staircaseModes.ON.uniqueId,\n            MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId,\n          ].includes(optionValue_staircasing)\n        ) {\n          if(int_colourSetId != this.alphaColorIdx) {\n            canvasRef_viewOnline_ctx.strokeText(block_coords[1], 33 * block_coords[0] + 31, 33 * (block_coords[2] + 1) - 2, 31);\n            canvasRef_viewOnline_ctx.fillText(block_coords[1], 33 * block_coords[0] + 31, 33 * (block_coords[2] + 1) - 2, 31);\n          }\n        }\n      }\n      for (let whichChunk_x = 0; whichChunk_x < 8 * optionValue_mapSize_x; whichChunk_x++) {\n        for (let whichChunk_y = -1; whichChunk_y < 8 * optionValue_mapSize_y; whichChunk_y++) {\n          if(!this.isFocusedChunkArrayEmpty()) {\n            if(whichChunk_y > -1) {\n              if(!this.isInFocusedChunkArray(whichChunk_y+1, whichChunk_x+1)) {\n                canvasRef_viewOnline_ctx.fillStyle = \"rgba(0, 0, 32, 0.4)\";\n                canvasRef_viewOnline_ctx.fillRect(33 * 16*  whichChunk_x, 33 * (16 * whichChunk_y + 1), 33*16, 33*16);\n              }\n            }\n          }\n          canvasRef_viewOnline_ctx.fillStyle = \"rgba(255, 0, 0, 1)\";\n          for (let x = 0; x < 16; x++) {\n            for (let y = 0; y < 16; y++) {\n              canvasRef_viewOnline_ctx.fillRect(33 * (16 * whichChunk_x + x) + 32, 33 * (16 * whichChunk_y + y + 1), 1, 33);\n              canvasRef_viewOnline_ctx.fillRect(33 * (16 * whichChunk_x + x), 33 * (16 * whichChunk_y + y + 1) + 32, 33, 1);\n            }\n          }\n          canvasRef_viewOnline_ctx.fillStyle = \"rgba(0, 0, 255, 1)\";\n          canvasRef_viewOnline_ctx.fillRect(33 * 16 * (whichChunk_x + 1) - 1, 33 * (16 * whichChunk_y + 1), 3, 33 * 16);\n          canvasRef_viewOnline_ctx.fillRect(33 * 16 * whichChunk_x, 33 * (16 * (whichChunk_y + 1) + 1) - 1, 33 * 16, 3);\n        }\n      }\n    };\n    img_textures.src = IMG_Textures;\n  }\n\n  isInFocusedChunkArray(chunkRow, chunkColumn) {\n    const { focusedChunks } = this.state;\n    if(this.isFocusedChunkArrayEmpty()) return false;\n    for (const chunk of focusedChunks) {\n      if((chunk.row === chunkRow) && (chunk.column === chunkColumn)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  isFocusedChunkArrayEmpty() {\n    const { focusedChunks } = this.state;\n    if(focusedChunks.length === 0){\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  onResetList = () => {\n    this.setState({\n      focusedChunks: [],\n    }, () => {\n      this.drawNBT();\n    });\n  }\n\n  onAddChunkToList = () => {\n    const { focusedChunks } = this.state;\n    let updatedFocusedChunks = focusedChunks;\n    if(!this.isInFocusedChunkArray(this.rowInput, this.columnInput)) {\n      let chunkCoords = { row: this.rowInput, column: this.columnInput };\n      focusedChunks.push(chunkCoords);\n    }\n    this.setState({\n      focusedChunks: updatedFocusedChunks,\n    }, () => {\n      this.drawNBT();\n    });\n  }\n\n  onRowChanged = (e) => {\n    this.rowInput=parseInt(e.target.value);\n  }\n\n  onColumnChanged = (e) => {\n    this.columnInput=parseInt(e.target.value);\n  }\n\n  handleScroll_document = function (e) {\n    e.preventDefault();\n  };\n\n  handleScroll_canvas = function (e) {\n    e.preventDefault();\n    const zoomMultiplier = 1.1;\n    const { offsetX, offsetY } = e;\n    const delta = e.wheelDelta ? e.wheelDelta : e.detail ? -e.detail : 0;\n    if (delta) {\n      this.setState((state) => {\n        return {\n          zoomFactor: delta > 0 ? state.zoomFactor * zoomMultiplier : state.zoomFactor / zoomMultiplier,\n          canvasOffset_x:\n            delta > 0 ? state.canvasOffset_x - (zoomMultiplier - 1) * offsetX : state.canvasOffset_x - ((1 - zoomMultiplier) * offsetX) / zoomMultiplier,\n          canvasOffset_y:\n            delta > 0 ? state.canvasOffset_y - (zoomMultiplier - 1) * offsetY : state.canvasOffset_y - ((1 - zoomMultiplier) * offsetY) / zoomMultiplier,\n        };\n      });\n    }\n  }.bind(this);\n\n  handleMouseDown = function (e) {\n    //e.preventDefault();   //breaks input text element.  Haven't found a case where removing breaks functionality\n    this.mouse.x = parseInt(e.clientX);\n    this.mouse.y = parseInt(e.clientY);\n    this.mouse.down = true;\n    this.mouse.movedSinceDown = false;\n    document.addEventListener(\"mousemove\", this.handleMouseMove, { passive: false });\n  }.bind(this);\n\n  handleMouseUp = function (e) {\n    e.preventDefault();\n    this.mouse.down = false;\n    if (!this.mouse.movedSinceDown) {\n      if (e.target === this.canvasRef_viewOnline.current) {\n        const { optionValue_mapSize_x, optionValue_mapSize_y } = this.props;\n        const { viewOnline_NBT_decompressed } = this.state;\n        const { offsetX, offsetY } = e;\n        const canvas_width = e.target.clientWidth;\n        const canvas_height = e.target.clientHeight;\n        const block_x = Math.floor((offsetX * 128 * optionValue_mapSize_x) / canvas_width);\n        const block_z = Math.floor((offsetY * (128 * optionValue_mapSize_y + 1)) / canvas_height);\n        for (const block of viewOnline_NBT_decompressed.value.blocks.value.value) {\n          const block_coords = block.pos.value.value;\n          if (block_coords[0] === block_x && block_coords[2] === block_z) {\n            const block_paletteId = block.state.value;\n            const [selectedBlock_colourSetId, selectedBlock_blockId] = this.paletteIdToColourSetIdAndBlockId[block_paletteId];\n            const chunkRow = Math.ceil(block_coords[2]/16);\n            const chunkCol = Math.ceil((block_coords[0]+1)/16);\n            this.setState({\n              selectedBlock: {\n                x: block_coords[0],\n                y: block_coords[1],\n                z: block_coords[2],\n                row: chunkRow,\n                column: chunkCol,\n                colourSetId: selectedBlock_colourSetId,\n                blockId: selectedBlock_blockId,\n              },\n            });\n            break;\n          }\n        }\n      }\n    }\n    document.removeEventListener(\"mousemove\", this.handleMouseMove, { passive: false });\n  }.bind(this);\n\n  handleMouseMove = function (e) {\n    e.preventDefault();\n    if (!this.mouse.down) {\n      return;\n    }\n    const mouseMoved_x = parseInt(e.clientX - this.mouse.x);\n    const mouseMoved_y = parseInt(e.clientY - this.mouse.y);\n\n    if (Math.abs(mouseMoved_x) > 1 || Math.abs(mouseMoved_y) > 1) {\n      this.mouse.x = e.clientX;\n      this.mouse.y = e.clientY;\n      this.mouse.movedSinceDown = true;\n    }\n\n    this.setState((state) => {\n      return { canvasOffset_x: state.canvasOffset_x + mouseMoved_x, canvasOffset_y: state.canvasOffset_y + mouseMoved_y };\n    });\n  }.bind(this);\n\n  constructor(props) {\n    super(props);\n    this.canvasRef_viewOnline = createRef();\n  }\n\n  componentDidMount() {\n    const viewOnline_NBT_decompressed = this.getNBTDecompressed();\n\n    this.setState({ viewOnline_NBT_decompressed }, () => {\n      this.drawNBT();\n      document.addEventListener(\"DOMMouseScroll\", this.handleScroll_canvas, { passive: false });\n      this.canvasRef_viewOnline.current.addEventListener(\"mousewheel\", this.handleScroll_canvas, { passive: false });\n      document.addEventListener(\"mousewheel\", this.handleScroll_document, { passive: false });\n      document.addEventListener(\"mousedown\", this.handleMouseDown, { passive: false });\n      document.addEventListener(\"mouseup\", this.handleMouseUp, { passive: false });\n    });\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"DOMMouseScroll\", this.handleScroll_canvas, { passive: false });\n    this.canvasRef_viewOnline.current.removeEventListener(\"mousewheel\", this.handleScroll_canvas, { passive: false });\n    document.removeEventListener(\"mousewheel\", this.handleScroll_document, { passive: false });\n    document.removeEventListener(\"mousedown\", this.handleMouseDown, { passive: false });\n    document.removeEventListener(\"mouseup\", this.handleMouseUp, { passive: false });\n  }\n\n  render() {\n    const { getLocaleString, coloursJSON, optionValue_mapSize_x, optionValue_mapSize_y, onGetViewOnlineNBT, onChooseViewOnline3D } = this.props;\n    const { viewOnline_NBT_decompressed, selectedBlock, zoomFactor } = this.state;\n    const { canvasOffset_x, canvasOffset_y } = this.state;\n\n    const component_controls = (\n      <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n        <h1 style={{ cursor: \"pointer\" }} onClick={() => onGetViewOnlineNBT(null)}>\n          \n        </h1>\n        <h1 style={{ cursor: \"pointer\" }} onClick={onChooseViewOnline3D}>\n          3D\n        </h1>\n        <br />\n      </div>\n    );\n\n    let component_uiEnhancements = (\n      <div>\n        {getLocaleString(\"MATERIALS/CHUNKMATS-ROWS\")}{\" \"}\n        <input type=\"text\" class=\"chunkCoordsInput\" name=\"rowVal\" onChange={this.onRowChanged}/>\n        {getLocaleString(\"MATERIALS/CHUNKMATS-COLUMNS\")}{\" \"}\n        <input type=\"text\" class=\"chunkCoordsInput\" name=\"colVal\" onChange={this.onColumnChanged}/>\n        <br />\n        <button onClick={this.onResetList}>{getLocaleString(\"MATERIALS/CHUNKMATS-RESET\")}</button>\n        <button onClick={this.onAddChunkToList}>{getLocaleString(\"MATERIALS/CHUNKMATS-ADD\")}</button>\n      </div>\n    );\n\n    let component_waila = null;\n    if (selectedBlock !== null) {\n      component_waila = <Waila coloursJSON={coloursJSON} getLocaleString={getLocaleString} selectedBlock={selectedBlock} />;\n    }\n\n    let component_size = null;\n    if (viewOnline_NBT_decompressed !== null) {\n      const [size_x, size_y, size_z] = viewOnline_NBT_decompressed.value.size.value.value;\n      component_size = (\n        <h2 style={{ marginRight: \"0.1em\" }}>\n          {getLocaleString(\"VIEW-ONLINE/SIZE\")}\n          {\": \"}\n          {size_x.toString()}\n          {\"x\"}\n          {size_y > 256 ? (\n            <Tooltip\n              tooltipText={getLocaleString(\"VIEW-ONLINE/TOO-BIG-FOR-SINGLE\")}\n              textStyleOverrides={{\n                right: 0,\n                backgroundColor: \"orange\",\n              }}\n            >\n              <b style={{ color: \"orange\" }}>{size_y.toString()}</b>\n            </Tooltip>\n          ) : (\n            size_y.toString()\n          )}\n          {\"x\"}\n          {size_z.toString()}\n        </h2>\n      );\n    }\n\n    const component_topBar = (\n      <div className=\"topBar\">\n        {component_controls}\n        {component_uiEnhancements}\n        {component_waila}\n        {component_size}\n      </div>\n    );\n\n    return (\n      <div className={\"viewOnline2DContainer\"}>\n        {component_topBar}\n        <canvas\n          width={33 * 128 * optionValue_mapSize_x}\n          height={33 * (128 * optionValue_mapSize_y + 1)}\n          ref={this.canvasRef_viewOnline}\n          style={{\n            width: `${33 * 128 * optionValue_mapSize_x * zoomFactor}px`,\n            height: `${33 * (128 * optionValue_mapSize_y + 1) * zoomFactor}px`,\n            position: \"relative\",\n            left: canvasOffset_x,\n            top: canvasOffset_y,\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default ViewOnline2D;\n","import { Euler, EventDispatcher, Vector3 } from \"three\";\n\nconst _euler = new Euler(0, 0, 0, \"YXZ\");\nconst _vector = new Vector3();\nconst _vector_up = new Vector3(0, 1, 0);\n\nconst _changeEvent = { type: \"change\" };\nconst _lockEvent = { type: \"lock\" };\nconst _unlockEvent = { type: \"unlock\" };\n\nconst _PI_2 = Math.PI / 2;\n\nclass PointerLockControls extends EventDispatcher {\n  constructor(camera, domElement) {\n    super();\n\n    if (domElement === undefined) {\n      console.warn('THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.');\n      domElement = document.body;\n    }\n\n    this.domElement = domElement;\n    this.isLocked = false;\n\n    // Set to constrain the pitch of the camera\n    // Range is 0 to Math.PI radians\n    this.minPolarAngle = 0; // radians\n    this.maxPolarAngle = Math.PI; // radians\n\n    const scope = this;\n\n    function onMouseMove(event) {\n      if (scope.isLocked === false) return;\n\n      const movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\n      const movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n\n      _euler.setFromQuaternion(camera.quaternion);\n\n      _euler.y -= movementX * 0.002;\n      _euler.x -= movementY * 0.002;\n\n      _euler.x = Math.max(_PI_2 - scope.maxPolarAngle, Math.min(_PI_2 - scope.minPolarAngle, _euler.x));\n\n      camera.quaternion.setFromEuler(_euler);\n\n      scope.dispatchEvent(_changeEvent);\n    }\n\n    function onPointerlockChange() {\n      if (scope.domElement.ownerDocument.pointerLockElement === scope.domElement) {\n        scope.dispatchEvent(_lockEvent);\n\n        scope.isLocked = true;\n      } else {\n        scope.dispatchEvent(_unlockEvent);\n\n        scope.isLocked = false;\n      }\n    }\n\n    function onPointerlockError() {\n      console.error(\"THREE.PointerLockControls: Unable to use Pointer Lock API\");\n    }\n\n    this.connect = function () {\n      scope.domElement.ownerDocument.addEventListener(\"mousemove\", onMouseMove);\n      scope.domElement.ownerDocument.addEventListener(\"pointerlockchange\", onPointerlockChange);\n      scope.domElement.ownerDocument.addEventListener(\"pointerlockerror\", onPointerlockError);\n    };\n\n    this.disconnect = function () {\n      scope.domElement.ownerDocument.removeEventListener(\"mousemove\", onMouseMove);\n      scope.domElement.ownerDocument.removeEventListener(\"pointerlockchange\", onPointerlockChange);\n      scope.domElement.ownerDocument.removeEventListener(\"pointerlockerror\", onPointerlockError);\n    };\n\n    this.dispose = function () {\n      this.disconnect();\n    };\n\n    this.getObject = function () {\n      // retaining this method for backward compatibility\n\n      return camera;\n    };\n\n    this.getDirection = (function () {\n      const direction = new Vector3(0, 0, -1);\n\n      return function (v) {\n        return v.copy(direction).applyQuaternion(camera.quaternion);\n      };\n    })();\n\n    this.moveForward = function (distance) {\n      // move forward parallel to the xz-plane\n      // assumes camera.up is y-up\n\n      _vector.setFromMatrixColumn(camera.matrix, 0);\n\n      _vector.crossVectors(camera.up, _vector);\n\n      camera.position.addScaledVector(_vector, distance);\n    };\n\n    this.moveRight = function (distance) {\n      _vector.setFromMatrixColumn(camera.matrix, 0);\n\n      camera.position.addScaledVector(_vector, distance);\n    };\n\n    this.moveUp = function (distance) {\n      camera.position.addScaledVector(_vector_up, distance);\n    };\n\n    this.lock = function () {\n      this.domElement.requestPointerLock();\n    };\n\n    this.unlock = function () {\n      scope.domElement.ownerDocument.exitPointerLock();\n    };\n\n    this.connect();\n  }\n}\n\nexport { PointerLockControls };\n","import React, { Component, createRef } from \"react\";\n\nimport Tooltip from \"../../tooltip\";\n\nimport IMG_Textures from \"../../../images/textures.png\";\n\nimport NBTReader from \"../nbtReader\";\nimport Waila from \"../viewOnlineCommon/waila\";\n\nimport * as THREE from \"three\";\nimport { PointerLockControls } from \"./pointerLockControls\";\n\nimport \"./viewOnline3D.css\";\n\nclass BlockWorld {\n  faces = [\n    {\n      // left\n      uvRow: 0,\n      dir: [-1, 0, 0],\n      vertices: [\n        { pos: [0, 1, 0], uv: [0, 1] },\n        { pos: [0, 0, 0], uv: [0, 0] },\n        { pos: [0, 1, 1], uv: [1, 1] },\n        { pos: [0, 0, 1], uv: [1, 0] },\n      ],\n    },\n    {\n      // right\n      uvRow: 0,\n      dir: [1, 0, 0],\n      vertices: [\n        { pos: [1, 1, 1], uv: [0, 1] },\n        { pos: [1, 0, 1], uv: [0, 0] },\n        { pos: [1, 1, 0], uv: [1, 1] },\n        { pos: [1, 0, 0], uv: [1, 0] },\n      ],\n    },\n    {\n      // bottom\n      uvRow: 0,\n      dir: [0, -1, 0],\n      vertices: [\n        { pos: [1, 0, 1], uv: [1, 0] },\n        { pos: [0, 0, 1], uv: [0, 0] },\n        { pos: [1, 0, 0], uv: [1, 1] },\n        { pos: [0, 0, 0], uv: [0, 1] },\n      ],\n    },\n    {\n      // top\n      uvRow: 0,\n      dir: [0, 1, 0],\n      vertices: [\n        { pos: [0, 1, 1], uv: [1, 1] },\n        { pos: [1, 1, 1], uv: [0, 1] },\n        { pos: [0, 1, 0], uv: [1, 0] },\n        { pos: [1, 1, 0], uv: [0, 0] },\n      ],\n    },\n    {\n      // north\n      uvRow: 0,\n      dir: [0, 0, -1],\n      vertices: [\n        { pos: [1, 0, 0], uv: [0, 0] },\n        { pos: [0, 0, 0], uv: [1, 0] },\n        { pos: [1, 1, 0], uv: [0, 1] },\n        { pos: [0, 1, 0], uv: [1, 1] },\n      ],\n    },\n    {\n      // south\n      uvRow: 0,\n      dir: [0, 0, 1],\n      vertices: [\n        { pos: [0, 0, 1], uv: [0, 0] },\n        { pos: [1, 0, 1], uv: [1, 0] },\n        { pos: [0, 1, 1], uv: [0, 1] },\n        { pos: [1, 1, 1], uv: [1, 1] },\n      ],\n    },\n  ];\n\n  chunkSize = 16;\n  chunks = {};\n  chunks_mesh = {};\n  renderRequested = false;\n  animationFrameRequestID = null;\n\n  // for click mouse events\n  mouse = {\n    x: 0,\n    y: 0,\n    moveX: 0,\n    moveY: 0,\n  };\n\n  constructor(options) {\n    this.canvasRef = options.canvasRef;\n    this.coloursJSON = options.coloursJSON;\n    this.tileSize = options.tileSize;\n    this.tileTextureWidth = options.tileTextureWidth;\n    this.tileTextureHeight = options.tileTextureHeight;\n    const { camera_x, camera_y, camera_z } = options;\n    this.onSelectBlockCallback = options.onSelectBlockCallback;\n    // each chunk is a Uint8Array; each block is stored as colourSetId, blockId\n    // chunks represent a chunkSize^3 volume\n\n    this.renderer = new THREE.WebGLRenderer({ canvas: this.canvasRef.current });\n    this.renderer.setSize(this.canvasRef.current.clientWidth, this.canvasRef.current.clientHeight, false);\n\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color(\"lightblue\");\n    this.scene.add(new THREE.AmbientLight(0xdddddd));\n\n    const fov = 75;\n    const aspect = 2;\n    const near = 0.1;\n    const far = 250;\n    this.camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\n    this.camera.position.set(camera_x, camera_y, camera_z);\n\n    this.controls = new PointerLockControls(this.camera, this.canvasRef.current);\n\n    const texture = new THREE.TextureLoader().load(IMG_Textures, this.render);\n    texture.magFilter = THREE.NearestFilter;\n    texture.minFilter = THREE.NearestFilter;\n\n    this.material = new THREE.MeshLambertMaterial({\n      map: texture,\n      side: THREE.FrontSide,\n      alphaTest: 0,\n      transparent: false,\n    });\n  }\n\n  startAnimationLoop = () => {\n    this.renderer.render(this.scene, this.camera);\n    this.animationFrameRequestID = window.requestAnimationFrame(this.startAnimationLoop);\n  };\n\n  stopAnimationLoop = () => {\n    window.cancelAnimationFrame(this.animationFrameRequestID);\n  };\n\n  addEventListeners() {\n    window.addEventListener(\"resize\", this.handleWindowResize);\n    this.canvasRef.current.addEventListener(\"pointerdown\", this.handlePointerDown, { passive: false });\n    this.canvasRef.current.addEventListener(\"touchstart\", this.handleTouchStart, { passive: false });\n    document.addEventListener(\"keydown\", this.handleKeyDown, { passive: false });\n    document.addEventListener(\"keyup\", this.handleKeyUp, { passive: false });\n    this.controls.connect();\n  }\n\n  handleKeyDown = function (e) {\n    e.preventDefault();\n    switch (e.key) {\n      case \"w\":\n        this.controls.moveForward(1);\n        break;\n      case \"a\":\n        this.controls.moveRight(-1);\n        break;\n      case \"s\":\n        this.controls.moveForward(-1);\n        break;\n      case \"d\":\n        this.controls.moveRight(1);\n        break;\n      case \"e\":\n        this.controls.moveUp(-1);\n        break;\n      case \" \":\n        this.controls.moveUp(1);\n        break;\n      case \"c\":\n        this.camera.fov = 25;\n        this.camera.updateProjectionMatrix();\n        break;\n      default:\n        break;\n    }\n  }.bind(this);\n\n  handleKeyUp = function (e) {\n    e.preventDefault();\n    switch (e.key) {\n      case \"c\":\n        this.camera.fov = 75;\n        this.camera.updateProjectionMatrix();\n        break;\n      default:\n        break;\n    }\n  }.bind(this);\n\n  handlePointerDown = function (e) {\n    e.preventDefault();\n    this.mouse.x = e.clientX;\n    this.mouse.y = e.clientY;\n    this.mouse.moveX = 0;\n    this.mouse.moveY = 0;\n    this.canvasRef.current.addEventListener(\"pointermove\", this.recordMovement);\n    this.canvasRef.current.addEventListener(\"pointerup\", this.selectBlockIfNoMovement);\n    this.controls.lock();\n  }.bind(this);\n\n  recordMovement = function (e) {\n    this.mouse.moveX += Math.abs(this.mouse.x - e.clientX);\n    this.mouse.moveY += Math.abs(this.mouse.y - e.clientY);\n  }.bind(this);\n\n  selectBlockIfNoMovement = function (e) {\n    if (this.mouse.moveX < 5 && this.mouse.moveY < 5) {\n      this.selectBlock(e);\n    }\n    this.canvasRef.current.removeEventListener(\"pointermove\", this.recordMovement);\n    this.canvasRef.current.removeEventListener(\"pointerup\", this.selectBlockIfNoMovement);\n  }.bind(this);\n\n  handleTouchStart = function (e) {\n    // TODO test this on mobile\n    e.preventDefault(); // prevent scrolling\n  };\n\n  handleWindowResize = function () {\n    const width = this.canvasRef.current.clientWidth;\n    const height = this.canvasRef.current.clientHeight;\n\n    this.renderer.setSize(width, height, false);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  }.bind(this);\n\n  removeEventListeners() {\n    window.removeEventListener(\"resize\", this.handleWindowResize);\n    this.canvasRef.current.removeEventListener(\"pointerdown\", this.handlePointerDown, { passive: false });\n    this.canvasRef.current.removeEventListener(\"touchstart\", this.handleTouchStart, { passive: false });\n    document.removeEventListener(\"keydown\", this.handleKeyDown, { passive: false });\n    document.removeEventListener(\"keyup\", this.handleKeyUp, { passive: false });\n    this.controls.unlock();\n    this.controls.disconnect();\n  }\n\n  computeBlockOffset(x, y, z) {\n    const { chunkSize } = this;\n    const blockX = THREE.MathUtils.euclideanModulo(x, chunkSize) | 0;\n    const blockY = THREE.MathUtils.euclideanModulo(y, chunkSize) | 0;\n    const blockZ = THREE.MathUtils.euclideanModulo(z, chunkSize) | 0;\n    return 2 * (blockY * chunkSize * chunkSize + blockZ * chunkSize + blockX);\n  }\n\n  getChunkKey(x, y, z) {\n    const { chunkSize } = this;\n    const chunkX = Math.floor(x / chunkSize);\n    const chunkY = Math.floor(y / chunkSize);\n    const chunkZ = Math.floor(z / chunkSize);\n    return `${chunkX},${chunkY},${chunkZ}`;\n  }\n\n  getChunkForBlock(x, y, z) {\n    return this.chunks[this.getChunkKey(x, y, z)];\n  }\n\n  addChunkForBlock(x, y, z) {\n    const chunkKey = this.getChunkKey(x, y, z);\n    let chunk = this.chunks[chunkKey];\n    if (!chunk) {\n      const { chunkSize } = this;\n      chunk = new Uint8Array(2 * chunkSize * chunkSize * chunkSize);\n      for (let i = 0; i < chunk.length; i++) {\n        chunk[i] = 255;\n      }\n      this.chunks[chunkKey] = chunk;\n    }\n    return chunk;\n  }\n\n  getBlock(x, y, z) {\n    const chunk = this.getChunkForBlock(x, y, z);\n    if (!chunk) {\n      return null;\n    }\n    const blockOffset = this.computeBlockOffset(x, y, z);\n    return chunk.slice(blockOffset, blockOffset + 2);\n  }\n\n  setBlock(x, y, z, colourSetId, blockId) {\n    let chunk = this.getChunkForBlock(x, y, z);\n    if (!chunk) {\n      chunk = this.addChunkForBlock(x, y, z);\n    }\n    const blockOffset = this.computeBlockOffset(x, y, z);\n    chunk[blockOffset] = colourSetId;\n    chunk[blockOffset + 1] = blockId;\n  }\n\n  selectBlock() {\n    const canvas = this.canvasRef.current;\n    // const rect = canvas.getBoundingClientRect();\n    const pos = {\n      // x: ((e.clientX - rect.left) * canvas.width) / rect.width,\n      // y: ((e.clientY - rect.top) * canvas.height) / rect.height,\n      // x: ((rect.right + rect.left) * canvas.width) / (2 * rect.width),\n      // y: ((rect.bottom + rect.top) * canvas.height) / (2 * rect.height),\n      x: canvas.width / 2,\n      y: canvas.height / 2,\n    };\n    const x = (pos.x / canvas.width) * 2 - 1;\n    const y = (pos.y / canvas.height) * -2 + 1; // note we flip Y\n\n    const start = new THREE.Vector3();\n    const end = new THREE.Vector3();\n    start.setFromMatrixPosition(this.camera.matrixWorld);\n    end.set(x, y, 1).unproject(this.camera);\n\n    const intersection = this.intersectRay(start, end);\n    if (intersection) {\n      // the intersection point is on the face. That means\n      // the math imprecision could put us on either side of the face.\n      // so go half a normal into the block if removing (currentBlock = 0)\n      // our out of the block if adding (currentBlock  > 0)\n      // const pos = intersection.position.map((v, numberOfVertices) => {\n      //   return v + intersection.normal[numberOfVertices] * -0.5;\n      // });\n      this.onSelectBlockCallback({\n        x: intersection.block_coords.x,\n        y: intersection.block_coords.y,\n        z: intersection.block_coords.z,\n        colourSetId: intersection.block[0],\n        blockId: intersection.block[1],\n      });\n    }\n  }\n\n  intersectRay(start, end) {\n    // from\n    // http://www.cse.chalmers.se/edu/year/2010/course/TDA361/grid.pdf\n    let dx = end.x - start.x;\n    let dy = end.y - start.y;\n    let dz = end.z - start.z;\n    const lenSq = dx * dx + dy * dy + dz * dz;\n    const len = Math.sqrt(lenSq);\n\n    dx /= len;\n    dy /= len;\n    dz /= len;\n\n    let t = 0.0;\n    let ix = Math.floor(start.x);\n    let iy = Math.floor(start.y);\n    let iz = Math.floor(start.z);\n\n    const stepX = dx > 0 ? 1 : -1;\n    const stepY = dy > 0 ? 1 : -1;\n    const stepZ = dz > 0 ? 1 : -1;\n\n    const txDelta = Math.abs(1 / dx);\n    const tyDelta = Math.abs(1 / dy);\n    const tzDelta = Math.abs(1 / dz);\n\n    const xDist = stepX > 0 ? ix + 1 - start.x : start.x - ix;\n    const yDist = stepY > 0 ? iy + 1 - start.y : start.y - iy;\n    const zDist = stepZ > 0 ? iz + 1 - start.z : start.z - iz;\n\n    // location of nearest block boundary, in units of t\n    let txMax = txDelta < Infinity ? txDelta * xDist : Infinity;\n    let tyMax = tyDelta < Infinity ? tyDelta * yDist : Infinity;\n    let tzMax = tzDelta < Infinity ? tzDelta * zDist : Infinity;\n\n    let steppedIndex = -1;\n\n    // main loop along raycast vector\n    while (t <= len) {\n      const block = this.getBlock(ix, iy, iz);\n      if (block !== null && !(block[0] === 255 && block[1] === 255)) {\n        return {\n          position: [start.x + t * dx, start.y + t * dy, start.z + t * dz],\n          normal: [steppedIndex === 0 ? -stepX : 0, steppedIndex === 1 ? -stepY : 0, steppedIndex === 2 ? -stepZ : 0],\n          block: block,\n          block_coords: { x: ix, y: iy, z: iz },\n        };\n      }\n\n      // advance t to next nearest block boundary\n      if (txMax < tyMax) {\n        if (txMax < tzMax) {\n          ix += stepX;\n          t = txMax;\n          txMax += txDelta;\n          steppedIndex = 0;\n        } else {\n          iz += stepZ;\n          t = tzMax;\n          tzMax += tzDelta;\n          steppedIndex = 2;\n        }\n      } else {\n        if (tyMax < tzMax) {\n          iy += stepY;\n          t = tyMax;\n          tyMax += tyDelta;\n          steppedIndex = 1;\n        } else {\n          iz += stepZ;\n          t = tzMax;\n          tzMax += tzDelta;\n          steppedIndex = 2;\n        }\n      }\n    }\n    return null;\n  }\n\n  generateGeometryDataForChunk(chunkX, chunkY, chunkZ) {\n    const { coloursJSON, chunkSize, tileSize, tileTextureWidth, tileTextureHeight } = this;\n    const verticesComponents = [];\n    const normalsComponents = [];\n    const uvs = [];\n    const indices = [];\n    const startX = chunkX * chunkSize;\n    const startY = chunkY * chunkSize;\n    const startZ = chunkZ * chunkSize;\n\n    const chunk = this.getChunkForBlock(startX, startY, startZ);\n    if (chunk) {\n      for (let y = 0; y < chunkSize; y++) {\n        const blockY = startY + y;\n        for (let z = 0; z < chunkSize; z++) {\n          const blockZ = startZ + z;\n          for (let x = 0; x < chunkSize; x++) {\n            const blockX = startX + x;\n            const blockOffset = this.computeBlockOffset(x, y, z);\n            const block = chunk.slice(blockOffset, blockOffset + 2);\n            let [colourSetId, blockId] = block;\n            if (!(colourSetId === 255 && blockId === 255)) {\n              if (!(colourSetId === 64 && blockId === 2)) {\n                // if not placeholder texture then check if custom texture needed\n                if (coloursJSON[colourSetId.toString()].blocks[blockId.toString()].presetIndex === \"CUSTOM\") {\n                  colourSetId = 64;\n                  blockId = 5;\n                }\n              }\n              // There is a block here but do we need faces for it?\n              for (const { dir, vertices, uvRow } of this.faces) {\n                const neighbor = this.getBlock(blockX + dir[0], blockY + dir[1], blockZ + dir[2]);\n                if (neighbor === null || (neighbor[0] === 255 && neighbor[1] === 255)) {\n                  // this block has no neighbor in this direction so we need a face\n                  const numberOfVertices = verticesComponents.length / 3;\n                  for (const { pos, uv } of vertices) {\n                    verticesComponents.push(pos[0] + x, pos[1] + y, pos[2] + z);\n                    normalsComponents.push(...dir);\n                    uvs.push(((blockId + uv[0]) * tileSize) / tileTextureWidth, 1 - ((uvRow + (1 + colourSetId) - uv[1]) * tileSize) / tileTextureHeight);\n                  }\n                  indices.push(numberOfVertices, numberOfVertices + 1, numberOfVertices + 2, numberOfVertices + 2, numberOfVertices + 1, numberOfVertices + 3);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return {\n      verticesComponents,\n      normalsComponents,\n      uvs,\n      indices,\n    };\n  }\n\n  updateChunkGeometry(x, y, z) {\n    const { chunkSize } = this;\n    const chunkX = Math.floor(x / chunkSize);\n    const chunkY = Math.floor(y / chunkSize);\n    const chunkZ = Math.floor(z / chunkSize);\n    const chunkKey = this.getChunkKey(x, y, z);\n    let mesh = this.chunks_mesh[chunkKey];\n    const geometry = mesh ? mesh.geometry : new THREE.BufferGeometry();\n\n    const { verticesComponents, normalsComponents, uvs, indices } = this.generateGeometryDataForChunk(chunkX, chunkY, chunkZ);\n    const positionNumComponents = 3;\n    geometry.setAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(verticesComponents), positionNumComponents));\n    const normalNumComponents = 3;\n    geometry.setAttribute(\"normal\", new THREE.BufferAttribute(new Float32Array(normalsComponents), normalNumComponents));\n    const uvNumComponents = 2;\n    geometry.setAttribute(\"uv\", new THREE.BufferAttribute(new Float32Array(uvs), uvNumComponents));\n    geometry.setIndex(indices);\n    geometry.computeBoundingSphere();\n\n    if (!mesh) {\n      mesh = new THREE.Mesh(geometry, this.material);\n      mesh.name = chunkKey;\n      this.chunks_mesh[chunkKey] = mesh;\n      this.scene.add(mesh);\n      mesh.position.set(chunkX * chunkSize, chunkY * chunkSize, chunkZ * chunkSize);\n    }\n  }\n\n  updateBlockGeometry(x, y, z) {\n    const updatedChunkKeys = {};\n    for (const offset of [\n      [0, 0, 0], // self\n      [-1, 0, 0], // left\n      [1, 0, 0], // right\n      [0, -1, 0], // down\n      [0, 1, 0], // up\n      [0, 0, -1], // back\n      [0, 0, 1], // front\n    ]) {\n      const ox = x + offset[0];\n      const oy = y + offset[1];\n      const oz = z + offset[2];\n      const chunkKey = this.getChunkKey(ox, oy, oz);\n      if (!updatedChunkKeys[chunkKey]) {\n        updatedChunkKeys[chunkKey] = true;\n        this.updateChunkGeometry(ox, oy, oz);\n      }\n    }\n  }\n}\n\nclass ViewOnline3D extends Component {\n  state = {\n    viewOnline_NBT_decompressed: null,\n    selectedBlock: null,\n  };\n\n  constructor(props) {\n    super(props);\n    this.canvasRef_viewOnline = createRef();\n  }\n\n  getNBTDecompressed() {\n    const { viewOnline_NBT } = this.props;\n    let nbtReader = new NBTReader();\n    nbtReader.loadBuffer(viewOnline_NBT);\n    const viewOnline_NBT_decompressed = nbtReader.getData();\n    return viewOnline_NBT_decompressed;\n  }\n\n  drawNBT() {\n    const { coloursJSON, optionValue_version } = this.props;\n    const { viewOnline_NBT_decompressed } = this.state;\n    const [schematic_size_x, schematic_size_y, schematic_size_z] = viewOnline_NBT_decompressed.value.size.value.value;\n\n    this.world.chunks = {};\n    this.world.chunks_mesh = {};\n\n    let paletteIdToColourSetIdAndBlockId = [];\n    const NBT_palette = viewOnline_NBT_decompressed.value.palette.value.value;\n    for (let paletteItem_index = 0; paletteItem_index < NBT_palette.length; paletteItem_index++) {\n      const paletteItem = NBT_palette[paletteItem_index];\n      let paletteItemFound = false;\n      for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\n        if (paletteItemFound) {\n          break;\n        }\n        for (const [blockId, block] of Object.entries(colourSet.blocks)) {\n          if (paletteItemFound) {\n            break;\n          }\n          if (!(optionValue_version.MCVersion in block.validVersions)) {\n            continue;\n          }\n          let blockNBTData = block.validVersions[optionValue_version.MCVersion];\n          if (typeof blockNBTData === \"string\") {\n            // this is of the form eg \"&1.12.2\"\n            blockNBTData = block.validVersions[blockNBTData.slice(1)];\n          }\n          if (\n            paletteItem.Name.value === `minecraft:${blockNBTData.NBTName}` &&\n            ((!(\"Properties\" in paletteItem) && Object.keys(blockNBTData.NBTArgs).length === 0) ||\n              (\"Properties\" in paletteItem &&\n                Object.keys(paletteItem.Properties.value).length === Object.keys(blockNBTData.NBTArgs).length &&\n                Object.entries(blockNBTData.NBTArgs).every(([argKey, argValue]) => {\n                  return argKey in paletteItem.Properties.value && argValue === paletteItem.Properties.value[argKey].value;\n                })))\n          ) {\n            paletteIdToColourSetIdAndBlockId.push([parseInt(colourSetId), parseInt(blockId)]);\n            paletteItemFound = true;\n          }\n        }\n      }\n      if (!paletteItemFound) {\n        console.log(`Didn't find ${paletteItem.Name.value} in coloursJSON; using placeholder texture`);\n        paletteIdToColourSetIdAndBlockId.push([64, 2]);\n      }\n    }\n\n    viewOnline_NBT_decompressed.value.blocks.value.value.forEach((block) => {\n      const block_coords = block.pos.value.value;\n      const block_paletteId = block.state.value;\n      this.world.setBlock(...block_coords, ...paletteIdToColourSetIdAndBlockId[block_paletteId]);\n    });\n    for (let x = 0; x < schematic_size_x; x += this.world.chunkSize) {\n      for (let y = 0; y < schematic_size_y; y += this.world.chunkSize) {\n        for (let z = 0; z < schematic_size_z; z += this.world.chunkSize) {\n          this.world.updateChunkGeometry(x, y, z);\n        }\n      }\n    }\n  }\n\n  handleEscapeKeyDown = function (e) {\n    const { handleViewOnline3DEscape } = this.props;\n    e.preventDefault();\n    if (e.key === \"Escape\") {\n      handleViewOnline3DEscape();\n    }\n  }.bind(this);\n\n  componentDidMount() {\n    const { coloursJSON } = this.props;\n    const canvasRef = this.canvasRef_viewOnline;\n    const viewOnline_NBT_decompressed = this.getNBTDecompressed();\n    const [, size_y, size_z] = viewOnline_NBT_decompressed.value.size.value.value;\n\n    this.world = new BlockWorld({\n      canvasRef: canvasRef,\n      coloursJSON: coloursJSON,\n      tileSize: 32,\n      tileTextureWidth: 608,\n      tileTextureHeight: 2080,\n      camera_x: 0,\n      camera_y: size_y + 1,\n      camera_z: size_z,\n      onSelectBlockCallback: (selectedBlock) => {\n        this.setState({ selectedBlock });\n      },\n    });\n\n    this.world.startAnimationLoop();\n\n    this.setState({ viewOnline_NBT_decompressed }, () => {\n      this.drawNBT();\n      document.addEventListener(\"keydown\", this.handleEscapeKeyDown);\n      this.world.addEventListeners();\n    });\n  }\n\n  componentWillUnmount() {\n    this.world.stopAnimationLoop();\n    this.world.removeEventListeners();\n    document.removeEventListener(\"keydown\", this.handleEscapeKeyDown);\n  }\n\n  render() {\n    const { getLocaleString, coloursJSON } = this.props;\n    const { viewOnline_NBT_decompressed, selectedBlock } = this.state;\n    let component_size = null;\n    if (viewOnline_NBT_decompressed !== null) {\n      const [size_x, size_y, size_z] = viewOnline_NBT_decompressed.value.size.value.value;\n      component_size = (\n        <h2\n          style={{\n            position: \"fixed\",\n            zIndex: 121,\n            left: 0,\n            top: 0,\n          }}\n        >\n          {getLocaleString(\"VIEW-ONLINE/SIZE\")}\n          {\": \"}\n          {size_x.toString()}\n          {\"x\"}\n          {size_y > 256 ? (\n            <Tooltip\n              tooltipText={getLocaleString(\"VIEW-ONLINE/TOO-BIG-FOR-SINGLE\")}\n              textStyleOverrides={{\n                whiteSpace: \"nowrap\",\n                backgroundColor: \"orange\",\n              }}\n            >\n              <b style={{ color: \"orange\" }}>{size_y.toString()}</b>\n            </Tooltip>\n          ) : (\n            size_y.toString()\n          )}\n          {\"x\"}\n          {size_z.toString()}\n        </h2>\n      );\n    }\n    const component_controls = (\n      <div\n        style={{\n          position: \"fixed\",\n          zIndex: 121,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <h3 style={{ margin: 0 }}>{`${getLocaleString(\"VIEW-ONLINE/CONTROLS\")}: W A S D E SPACE C`}</h3>\n        <h3 style={{ margin: 0 }}>{`ESC ESC ${getLocaleString(\"VIEW-ONLINE/TO-EXIT\")}`}</h3>\n      </div>\n    );\n    let component_waila = null;\n    if (selectedBlock !== null) {\n      component_waila = (\n        <Waila\n          getLocaleString={getLocaleString}\n          coloursJSON={coloursJSON}\n          selectedBlock={selectedBlock}\n          style={{\n            position: \"fixed\",\n            zIndex: 121,\n            right: 0,\n            top: 0,\n          }}\n        />\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {component_size}\n        {component_controls}\n        {component_waila}\n        <b style={{ position: \"fixed\", zIndex: 121, top: \"50%\", left: \"50%\" }}>{\"\\\\\"}</b>\n        <canvas\n          ref={this.canvasRef_viewOnline}\n          style={{\n            position: \"fixed\",\n            zIndex: 120,\n            width: \"100%\",\n            height: \"100%\",\n            top: 0,\n            bottom: 0,\n            left: 0,\n            right: 0,\n          }}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ViewOnline3D;\n","import React, { Component } from \"react\";\n\nimport CookieManager from \"../../cookieManager\";\nimport BlockSelection from \"./blockSelection\";\nimport GreenButtons from \"./greenButtons\";\nimport MapPreview from \"./mapPreview\";\nimport MapSettings from \"./mapSettings\";\nimport Materials from \"./materials\";\nimport coloursJSON from \"./json/coloursJSON.json\";\nimport ViewOnline2D from \"./viewOnline2D/viewOnline2D\";\nimport ViewOnline3D from \"./viewOnline3D/viewOnline3D\";\n\nimport BackgroundColourModes from \"./json/backgroundColourModes.json\";\nimport CropModes from \"./json/cropModes.json\";\nimport DefaultPresets from \"./json/defaultPresets.json\";\nimport DitherMethods from \"./json/ditherMethods.json\";\nimport MapModes from \"./json/mapModes.json\";\nimport SupportedVersions from \"./json/supportedVersions.json\";\nimport WhereSupportBlocksModes from \"./json/whereSupportBlocksModes.json\";\n\nimport IMG_Upload from \"../../images/upload.png\";\n\nimport \"./mapartController.css\";\n\nclass MapartController extends Component {\n  state = {\n    coloursJSON: null,\n    selectedBlocks: {},\n    optionValue_version: Object.values(SupportedVersions)[Object.keys(SupportedVersions).length - 1], // default to the latest version supported\n    optionValue_modeNBTOrMapdat: MapModes.SCHEMATIC_NBT.uniqueId,\n    optionValue_mapSize_x: 1,\n    optionValue_mapSize_y: 1,\n    optionValue_cropImage: CropModes.CENTER.uniqueId,\n    optionValue_cropImage_zoom: 10, // this gets scaled down by a factor of 10\n    optionValue_cropImage_percent_x: 50,\n    optionValue_cropImage_percent_y: 50,\n    optionValue_showGridOverlay: false,\n    optionValue_staircasing: MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId,\n    optionValue_whereSupportBlocks: WhereSupportBlocksModes.ALL_OPTIMIZED.uniqueId,\n    optionValue_supportBlock: \"cobblestone\",\n    optionValue_transparency: false,\n    optionValue_transparencyTolerance: 128,\n    optionValue_mapdatFilenameUseId: true,\n    optionValue_mapdatFilenameIdStart: 0,\n    optionValue_betterColour: true,\n    optionValue_dithering: DitherMethods.FloydSteinberg.uniqueId,\n    optionValue_preprocessingEnabled: false,\n    preProcessingValue_brightness: 100,\n    preProcessingValue_contrast: 100,\n    preProcessingValue_saturation: 100,\n    preProcessingValue_backgroundColourSelect: BackgroundColourModes.OFF.uniqueId,\n    preProcessingValue_backgroundColour: \"#151515\",\n    optionValue_extras_moreStaircasingOptions: false,\n    uploadedImage: null,\n    uploadedImage_baseFilename: null,\n    presets: [],\n    selectedPresetName: \"None\",\n    currentMaterialsData: {\n      pixelsData: null,\n      maps: [[]], // entries are dictionaries with keys \"materials\", \"supportBlockCount\"\n      chunks: [[]],\n      currentSelectedBlocks: {}, // we keep this soley for materials.js\n    },\n    mapPreviewWorker_inProgress: false,\n    viewOnline_NBT: null,\n    viewOnline_3D: false,\n  };\n\n  constructor(props) {\n    super(props);\n    // update default presets to latest version; done via checking for localeString\n    CookieManager.init();\n    let cookiesPresets_loaded = JSON.parse(CookieManager.touchCookie(\"mapartcraft_presets\", JSON.stringify(DefaultPresets)));\n    let cookiesPresets_updated = [];\n    for (const cookiesPreset_loaded of cookiesPresets_loaded) {\n      let cookiesPreset_updated = undefined;\n      if (\"localeKey\" in cookiesPreset_loaded) {\n        cookiesPreset_updated = DefaultPresets.find((defaultPreset) => defaultPreset.localeKey === cookiesPreset_loaded.localeKey);\n      }\n      if (cookiesPreset_updated === undefined) {\n        cookiesPreset_updated = cookiesPreset_loaded;\n      }\n      cookiesPresets_updated.push(cookiesPreset_updated);\n    }\n    CookieManager.setCookie(\"mapartcraft_presets\", JSON.stringify(cookiesPresets_updated));\n    this.state.presets = cookiesPresets_updated;\n\n    let cookie_customBlocks = JSON.parse(CookieManager.touchCookie(\"mapartcraft_customBlocks\", JSON.stringify([])));\n    this.state.coloursJSON = this.getMergedColoursJSON(cookie_customBlocks);\n\n    for (const colourSetId of Object.keys(this.state.coloursJSON)) {\n      this.state.selectedBlocks[colourSetId] = \"-1\";\n    }\n\n    const cookieMCVersion = CookieManager.touchCookie(\"mapartcraft_mcversion\", Object.values(SupportedVersions)[Object.keys(SupportedVersions).length - 1].MCVersion);\n    const supportedVersionFound = Object.values(SupportedVersions).find((supportedVersion) => supportedVersion.MCVersion === cookieMCVersion);\n    if (supportedVersionFound !== undefined) {\n      this.state.optionValue_version = supportedVersionFound;\n    }\n\n    const URLParams = new URL(window.location).searchParams;\n    if (URLParams.has(\"preset\")) {\n      const decodedPresetBlocks = this.URLToPreset(URLParams.get(\"preset\"));\n      if (decodedPresetBlocks !== null) {\n        this.state.selectedBlocks = decodedPresetBlocks;\n      }\n    }\n  }\n\n  getMergedColoursJSON(customBlocks) {\n    // this is how we currently merge custom blocks into coloursJSON at runtime / when custom blocks update. this may change if presets support for custom blocks is added\n    let coloursJSON_custom = JSON.parse(JSON.stringify(coloursJSON)); // hmmm\n    for (const [colourSetId, customBlock] of customBlocks) {\n      coloursJSON_custom[colourSetId].blocks[Object.keys(coloursJSON_custom[colourSetId].blocks).length.toString()] = customBlock;\n    }\n    return coloursJSON_custom;\n  }\n\n  eventListener_dragover = function (e) {\n    // this has to be here for drop event to work\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  eventListener_drop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    const files = e.dataTransfer.files;\n    if (files.length) {\n      const file = files[0];\n      const imgUrl = URL.createObjectURL(file);\n      this.loadUploadedImageFromURL(imgUrl, \"mapart\");\n    }\n  }.bind(this);\n\n  eventListener_paste = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    const files = e.clipboardData.files;\n    if (files.length) {\n      const file = files[0];\n      const imgUrl = URL.createObjectURL(file);\n      this.loadUploadedImageFromURL(imgUrl, \"mapart\");\n    }\n  }.bind(this);\n\n  componentDidMount() {\n    this.loadUploadedImageFromURL(IMG_Upload, \"mapart\");\n\n    document.addEventListener(\"dragover\", this.eventListener_dragover);\n    document.addEventListener(\"drop\", this.eventListener_drop);\n\n    document.addEventListener(\"paste\", this.eventListener_paste);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"dragover\", this.eventListener_dragover);\n    document.removeEventListener(\"drop\", this.eventListener_drop);\n    document.removeEventListener(\"paste\", this.eventListener_paste);\n  }\n\n  onFileDialogEvent = (e) => {\n    const files = e.target.files;\n    if (!files.length) {\n      return;\n    } else {\n      const file = files[0];\n      const imgUrl = URL.createObjectURL(file);\n      this.loadUploadedImageFromURL(imgUrl, file.name.replace(/\\.[^/.]+$/, \"\"));\n    }\n  };\n\n  loadUploadedImageFromURL(imageURL, baseFilename) {\n    const img = new Image();\n    img.onload = () => {\n      this.setState({\n        uploadedImage: img,\n        uploadedImage_baseFilename: baseFilename,\n      });\n    };\n    img.src = imageURL;\n  }\n\n  handleChangeColourSetBlock = (colourSetId, blockId) => {\n    let selectedBlocks = { ...this.state.selectedBlocks };\n    selectedBlocks[colourSetId] = blockId;\n    this.setState({\n      selectedBlocks,\n    });\n  };\n\n  handleChangeColourSetBlocks = (setsAndBlocks) => {\n    const { coloursJSON, optionValue_version } = this.state;\n    let selectedBlocks = {};\n    for (const colourSetId of Object.keys(coloursJSON)) {\n      selectedBlocks[colourSetId] = \"-1\";\n    }\n    for (const [int_colourSetId, presetIndex] of setsAndBlocks) {\n      // we store presetIndex in the cookie, not blockId\n      const colourSetId = int_colourSetId.toString();\n      if (!(colourSetId in coloursJSON)) {\n        continue;\n      }\n      const blockIdAndBlock = Object.entries(coloursJSON[colourSetId].blocks).find(([, block]) => block.presetIndex === presetIndex);\n      if (blockIdAndBlock === undefined) {\n        continue;\n      }\n      const blockId = blockIdAndBlock[0];\n      if (Object.keys(coloursJSON[colourSetId].blocks[blockId].validVersions).includes(optionValue_version.MCVersion)) {\n        selectedBlocks[colourSetId] = blockId;\n      }\n    }\n    this.setState({\n      selectedBlocks,\n    });\n  };\n\n  onOptionChange_modeNBTOrMapdat = (e) => {\n    const mode = parseInt(e.target.value);\n    this.setState({ optionValue_modeNBTOrMapdat: mode });\n    if (mode === MapModes.SCHEMATIC_NBT.uniqueId) {\n      this.setState({ optionValue_staircasing: MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId });\n    } else {\n      this.setState({ optionValue_staircasing: MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId });\n    }\n  };\n\n  onOptionChange_version = (e) => {\n    const { coloursJSON } = this.state;\n    const mcVersion = e.target.value;\n    CookieManager.setCookie(\"mapartcraft_mcversion\", mcVersion);\n    const supportedVersionFound = Object.values(SupportedVersions).find((supportedVersion) => supportedVersion.MCVersion === mcVersion);\n    this.setState((currentState) => {\n      let selectedBlocks = { ...currentState.selectedBlocks };\n      for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\n        if (selectedBlocks[colourSetId] !== \"-1\" && !Object.keys(colourSet.blocks[selectedBlocks[colourSetId]].validVersions).includes(mcVersion)) {\n          selectedBlocks[colourSetId] = \"-1\";\n        }\n      }\n      return { optionValue_version: supportedVersionFound, selectedBlocks };\n    });\n  };\n\n  onOptionChange_mapSize_x = (value) => {\n    this.setState({\n      optionValue_mapSize_x: value,\n    });\n  };\n\n  onOptionChange_mapSize_y = (value) => {\n    this.setState({\n      optionValue_mapSize_y: value,\n    });\n  };\n\n  onOptionChange_cropImage = (e) => {\n    const cropValue = parseInt(e.target.value);\n    // CENTER is a special case of MANUAL\n    // reset cropImage variables any time we change\n    this.setState({\n      optionValue_cropImage: cropValue,\n      optionValue_cropImage_zoom: 10,\n      optionValue_cropImage_percent_x: 50,\n      optionValue_cropImage_percent_y: 50,\n    });\n  };\n\n  onOptionChange_cropImage_zoom = (value) => {\n    this.setState({\n      optionValue_cropImage_zoom: value,\n    });\n  };\n\n  onOptionChange_cropImage_percent_x = (value) => {\n    this.setState({\n      optionValue_cropImage_percent_x: value,\n    });\n  };\n\n  onOptionChange_cropImage_percent_y = (value) => {\n    this.setState({\n      optionValue_cropImage_percent_y: value,\n    });\n  };\n\n  onOptionChange_showGridOverlay = () => {\n    this.setState({\n      optionValue_showGridOverlay: !this.state.optionValue_showGridOverlay,\n    });\n    // \"updatePreviewScale(0)\"\n  };\n\n  onOptionChange_staircasing = (e) => {\n    const staircasingValue = parseInt(e.target.value);\n    this.setState({ optionValue_staircasing: staircasingValue });\n  };\n\n  onOptionChange_transparency = () => {\n    this.setState({\n      optionValue_transparency: !this.state.optionValue_transparency,\n    });\n  };\n\n  onOptionChange_transparencyTolerance = (value) => {\n    this.setState({\n      optionValue_transparencyTolerance: value,\n    });\n  };\n\n  onOptionChange_mapdatFilenameUseId = () => {\n    this.setState((currentState) => {\n      return {\n        optionValue_mapdatFilenameUseId: !currentState.optionValue_mapdatFilenameUseId,\n      };\n    });\n  };\n\n  onOptionChange_mapdatFilenameIdStart = (value) => {\n    this.setState({\n      optionValue_mapdatFilenameIdStart: value,\n    });\n  };\n\n  onOptionChange_BetterColour = () => {\n    this.setState({\n      optionValue_betterColour: !this.state.optionValue_betterColour,\n    });\n  };\n\n  onOptionChange_dithering = (e) => {\n    const ditheringValue = parseInt(e.target.value);\n    this.setState({ optionValue_dithering: ditheringValue });\n  };\n\n  onOptionChange_WhereSupportBlocks = (e) => {\n    const newValue = parseInt(e.target.value);\n    this.setState({ optionValue_whereSupportBlocks: newValue });\n  };\n\n  setOption_SupportBlock = (text) => {\n    this.setState({ optionValue_supportBlock: text });\n  };\n\n  onOptionChange_PreProcessingEnabled = () => {\n    this.setState({\n      optionValue_preprocessingEnabled: !this.state.optionValue_preprocessingEnabled,\n    });\n  };\n\n  onOptionChange_PreProcessingBrightness = (value) => {\n    this.setState({\n      preProcessingValue_brightness: value,\n    });\n  };\n\n  onOptionChange_PreProcessingContrast = (value) => {\n    this.setState({\n      preProcessingValue_contrast: value,\n    });\n  };\n\n  onOptionChange_PreProcessingSaturation = (value) => {\n    this.setState({\n      preProcessingValue_saturation: value,\n    });\n  };\n\n  onOptionChange_PreProcessingBackgroundColourSelect = (e) => {\n    const newValue = parseInt(e.target.value);\n    this.setState({ preProcessingValue_backgroundColourSelect: newValue });\n  };\n\n  onOptionChange_PreProcessingBackgroundColour = (e) => {\n    const newValue = e.target.value;\n    this.setState({ preProcessingValue_backgroundColour: newValue });\n  };\n\n  onOptionChange_extras_moreStaircasingOptions = () => {\n    const { optionValue_modeNBTOrMapdat, optionValue_extras_moreStaircasingOptions } = this.state;\n    this.setState({ optionValue_extras_moreStaircasingOptions: !optionValue_extras_moreStaircasingOptions });\n    if (optionValue_extras_moreStaircasingOptions) {\n      if (optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId) {\n        this.setState({ optionValue_staircasing: MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId });\n      } else {\n        this.setState({ optionValue_staircasing: MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId });\n      }\n    }\n  };\n\n  onGetViewOnlineNBT = (viewOnline_NBT) => {\n    this.setState({ viewOnline_NBT });\n  };\n\n  downloadBlobFile(downloadBlob, filename) {\n    const downloadURL = window.URL.createObjectURL(downloadBlob);\n    const downloadElt = document.createElement(\"a\");\n    downloadElt.style = \"display: none\";\n    downloadElt.href = downloadURL;\n    downloadElt.download = filename;\n    document.body.appendChild(downloadElt);\n    downloadElt.click();\n    window.URL.revokeObjectURL(downloadURL);\n    document.body.removeChild(downloadElt);\n  }\n\n  handleGetPDNPaletteClicked = () => {\n    const { getLocaleString } = this.props;\n    const { coloursJSON, selectedBlocks, optionValue_modeNBTOrMapdat, optionValue_staircasing } = this.state;\n    let paletteText =\n      \"; paint.net Palette File\\n; Generated by MapartCraft\\n; Link to preset: \" +\n      this.selectedBlocksToURL() +\n      (Object.entries(selectedBlocks).some(([colourSetId, blockId]) => blockId !== \"-1\" && coloursJSON[colourSetId].blocks[blockId].presetIndex === \"CUSTOM\")\n        ? \"\\n; Custom blocks not listed!\"\n        : \"\") +\n      \"\\n; staircasing: \" +\n      ([\n        MapModes.SCHEMATIC_NBT.staircaseModes.CLASSIC.uniqueId,\n        MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId,\n        MapModes.MAPDAT.staircaseModes.ON.uniqueId,\n        MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId,\n      ].includes(optionValue_staircasing)\n        ? \"enabled\"\n        : \"disabled\") +\n      \"\\n; unobtainable colours: \" +\n      ([MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId, MapModes.MAPDAT.staircaseModes.FULL_UNOBTAINABLE.uniqueId].includes(optionValue_staircasing)\n        ? \"enabled\"\n        : \"disabled\") +\n      \"\\n\";\n    let numberOfColoursExported = 0;\n    const toneKeysToExport = Object.values(Object.values(MapModes).find((mapMode) => mapMode.uniqueId === optionValue_modeNBTOrMapdat).staircaseModes).find(\n      (staircaseMode) => staircaseMode.uniqueId === optionValue_staircasing\n    ).toneKeys; // this .find stuff is annoying.\n    // TODO change from uniqueId to key\n    for (const [selectedBlock_colourSetId, selectedBlock_blockId] of Object.entries(selectedBlocks)) {\n      if (selectedBlock_blockId !== \"-1\") {\n        let colours = coloursJSON[selectedBlock_colourSetId].tonesRGB;\n        for (const toneKeyToExport of toneKeysToExport) {\n          numberOfColoursExported += 1;\n          paletteText += \"FF\";\n          for (let i = 0; i < 3; i++) {\n            paletteText += Number(colours[toneKeyToExport][i]).toString(16).padStart(2, \"0\").toUpperCase();\n          }\n          paletteText += \"\\n\";\n        }\n      }\n    }\n    if (numberOfColoursExported === 0) {\n      alert(getLocaleString(\"BLOCK-SELECTION/PRESETS/DOWNLOAD-WARNING-NONE-SELECTED\"));\n      return;\n    } else if (numberOfColoursExported > 96) {\n      alert(\n        `${getLocaleString(\"BLOCK-SELECTION/PRESETS/DOWNLOAD-WARNING-MAX-COLOURS-1\")}${numberOfColoursExported.toString()}${getLocaleString(\n          \"BLOCK-SELECTION/PRESETS/DOWNLOAD-WARNING-MAX-COLOURS-2\"\n        )}`\n      );\n    }\n    const downloadBlob = new Blob([paletteText], { type: \"text/plain\" });\n    this.downloadBlobFile(downloadBlob, \"MapartcraftPalette.txt\");\n  };\n\n  handlePresetChange = (e) => {\n    const presetName = e.target.value;\n    const { presets } = this.state;\n\n    this.setState({ selectedPresetName: presetName });\n\n    if (presetName === \"None\") {\n      this.handleChangeColourSetBlocks([]);\n    } else {\n      const selectedPreset = presets.find((preset) => preset.name === presetName);\n      if (selectedPreset !== undefined) {\n        this.handleChangeColourSetBlocks(selectedPreset.blocks);\n      }\n    }\n  };\n\n  canDeletePreset = () => {\n    const { selectedPresetName } = this.state;\n    return selectedPresetName !== \"None\" && !DefaultPresets.find((defaultPreset) => defaultPreset.name === selectedPresetName);\n  };\n\n  handleDeletePreset = () => {\n    const { getLocaleString } = this.props;\n    const { presets, selectedPresetName } = this.state;\n    if (!this.canDeletePreset()) return;\n    if (!window.confirm(`${getLocaleString(\"BLOCK-SELECTION/PRESETS/DELETE-CONFIRM\")} ${selectedPresetName}`)) return;\n    const presets_new = presets.filter((preset) => preset.name !== selectedPresetName);\n    this.setState({\n      presets: presets_new,\n      selectedPresetName: \"None\",\n    });\n    CookieManager.setCookie(\"mapartcraft_presets\", JSON.stringify(presets_new));\n  };\n\n  handleSavePreset = () => {\n    const { getLocaleString } = this.props;\n    const { coloursJSON, presets, selectedBlocks } = this.state;\n\n    let presetToSave_name = prompt(getLocaleString(\"BLOCK-SELECTION/PRESETS/SAVE-PROMPT-ENTER-NAME\"), \"\");\n    if (presetToSave_name === null) {\n      return;\n    }\n\n    const otherPresets = presets.filter((preset) => preset.name !== presetToSave_name);\n    let newPreset = { name: presetToSave_name, blocks: [] };\n    Object.keys(selectedBlocks).forEach((key) => {\n      if (selectedBlocks[key] !== \"-1\" && coloursJSON[key].blocks[selectedBlocks[key]].presetIndex !== \"CUSTOM\") {\n        newPreset.blocks.push([parseInt(key), parseInt(coloursJSON[key].blocks[selectedBlocks[key]].presetIndex)]);\n      }\n    });\n    const presets_new = [...otherPresets, newPreset];\n    this.setState({\n      presets: presets_new,\n      selectedPresetName: presetToSave_name,\n    });\n    CookieManager.setCookie(\"mapartcraft_presets\", JSON.stringify(presets_new));\n  };\n\n  selectedBlocksToURL = () => {\n    // colourSetId encoded in base 36 as [0-9a-z]\n    // blockId encoded in modified base 26 as [Q-ZA-P]\n    const { coloursJSON, selectedBlocks } = this.state;\n    let presetQueryString = \"\";\n    for (const [colourSetId, blockId] of Object.entries(selectedBlocks)) {\n      if (blockId !== \"-1\" && coloursJSON[colourSetId].blocks[blockId].presetIndex !== \"CUSTOM\") {\n        presetQueryString += parseInt(colourSetId).toString(36);\n        presetQueryString += coloursJSON[colourSetId].blocks[blockId].presetIndex\n          .toString(26)\n          .toUpperCase()\n          .replace(/[0-9]/g, (match) => {\n            return {\n              0: \"Q\",\n              1: \"R\",\n              2: \"S\",\n              3: \"T\",\n              4: \"U\",\n              5: \"V\",\n              6: \"W\",\n              7: \"X\",\n              8: \"Y\",\n              9: \"Z\",\n            }[match];\n          });\n      }\n    }\n    return \"https://rebane2001.com/mapartcraft/?preset=\" + presetQueryString;\n  };\n\n  handleSharePreset = () => {\n    const { getLocaleString } = this.props;\n    const { coloursJSON, selectedBlocks } = this.state;\n    if (Object.keys(selectedBlocks).every((colourSetId) => selectedBlocks[colourSetId] === \"-1\")) {\n      alert(getLocaleString(\"BLOCK-SELECTION/PRESETS/SHARE-WARNING-NONE-SELECTED\"));\n    } else {\n      if (\n        Object.entries(selectedBlocks).some(([colourSetId, blockId]) => blockId !== \"-1\" && coloursJSON[colourSetId].blocks[blockId].presetIndex === \"CUSTOM\")\n      ) {\n        alert(getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/NO-EXPORT\"));\n      }\n      prompt(getLocaleString(\"BLOCK-SELECTION/PRESETS/SHARE-LINK\"), this.selectedBlocksToURL());\n    }\n  };\n\n  URLToPreset = (encodedPreset) => {\n    const { onCorruptedPreset } = this.props;\n    const { coloursJSON, optionValue_version } = this.state;\n    switch (encodedPreset) {\n      case \"dQw4w9WgXcQ\":\n        window.location.replace(\"https://www.youtube.com/watch?v=cZ5wOPinZd4\");\n        return null;\n      case \"mares\":\n        document.body.style.backgroundSize=\"100%\";\n        fetch(\"https://derpibooru.org/api/v1/json/search/images?q=scenery,score.gte:1000,safe&sf=random&per_page=1\").then(req=>req.json()).then(derp=>document.body.style.backgroundImage=`url(${derp.images[0].representations.full})`);\n        return null;\n    }\n    if (!/^[0-9a-zQ-ZA-P]*$/g.test(encodedPreset)) {\n      onCorruptedPreset();\n      return null;\n    }\n    let selectedBlocks = { ...this.state.selectedBlocks };\n    let presetRegex = /([0-9a-z]+)(?=([Q-ZA-P]+))/g;\n    let match;\n    while ((match = presetRegex.exec(encodedPreset)) !== null) {\n      const encodedColourSetId = match[1];\n      const encodedBlockId = match[2];\n      const decodedColourSetId = parseInt(encodedColourSetId, 36).toString();\n      const decodedPresetIndex = parseInt(\n        encodedBlockId\n          .replace(/[Q-Z]/g, (match) => {\n            return {\n              Q: \"0\",\n              R: \"1\",\n              S: \"2\",\n              T: \"3\",\n              U: \"4\",\n              V: \"5\",\n              W: \"6\",\n              X: \"7\",\n              Y: \"8\",\n              Z: \"9\",\n            }[match];\n          })\n          .toLowerCase(),\n        26\n      );\n      if (!(decodedColourSetId in coloursJSON)) {\n        continue;\n      }\n      const decodedBlock = Object.entries(coloursJSON[decodedColourSetId].blocks).find((elt) => elt[1].presetIndex === decodedPresetIndex);\n      if (decodedBlock === undefined) {\n        continue;\n      }\n      const decodedBlockId = decodedBlock[0].toString();\n      if (Object.keys(coloursJSON[decodedColourSetId].blocks[decodedBlockId].validVersions).includes(optionValue_version.MCVersion)) {\n        selectedBlocks[decodedColourSetId] = decodedBlockId;\n      }\n    }\n    return selectedBlocks;\n  };\n\n  onMapPreviewWorker_begin = () => {\n    this.setState({ mapPreviewWorker_inProgress: true });\n  };\n\n  handleSetMapMaterials = (currentMaterialsData) => {\n    this.setState({ currentMaterialsData: currentMaterialsData, mapPreviewWorker_inProgress: false });\n  };\n\n  onChooseViewOnline3D = () => {\n    this.setState({ viewOnline_3D: true });\n  };\n\n  handleViewOnline3DEscape = () => {\n    this.setState({\n      viewOnline_NBT: null,\n      viewOnline_3D: false,\n    });\n  };\n\n  handleAddCustomBlock = (block_colourSetId, block_name, block_nbtTags, block_versions, block_needsSupport, block_flammable) => {\n    const { getLocaleString } = this.props;\n    // const {coloursJSON} = this.state;\n    const block_name_trimmed = block_name.trim();\n    if (block_name_trimmed === \"\") {\n      alert(getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/ERROR-NO-NAME\"));\n      return;\n    }\n    if (Object.values(block_versions).every((t) => !t)) {\n      alert(getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/ERROR-NONE-SELECTED\"));\n      return;\n    }\n    let blockToAdd = {\n      displayName: block_name_trimmed,\n      validVersions: {},\n      supportBlockMandatory: block_needsSupport,\n      flammable: block_flammable,\n      presetIndex: \"CUSTOM\",\n    };\n    let addedFirstVersion = false;\n    for (const [block_version, block_version_isSelected] of Object.entries(block_versions)) {\n      if (!block_version_isSelected) {\n        continue;\n      }\n      if (addedFirstVersion) {\n        blockToAdd.validVersions[SupportedVersions[block_version].MCVersion] = `&${Object.keys(blockToAdd.validVersions)[0]}`;\n      } else {\n        blockToAdd.validVersions[SupportedVersions[block_version].MCVersion] = {\n          NBTName: block_name_trimmed,\n          NBTArgs: {},\n        };\n        for (const [nbtTag_key, nbtTag_value] of block_nbtTags) {\n          const nbtTag_key_trimmed = nbtTag_key.trim();\n          const nbtTag_value_trimmed = nbtTag_value.trim();\n          if (!(nbtTag_key_trimmed === \"\" && nbtTag_value_trimmed === \"\")) {\n            blockToAdd.validVersions[SupportedVersions[block_version].MCVersion].NBTArgs[nbtTag_key_trimmed] = nbtTag_value_trimmed;\n          }\n        }\n        addedFirstVersion = true;\n      }\n    }\n\n    const customBlocks = JSON.parse(CookieManager.getCookie(\"mapartcraft_customBlocks\"));\n    let customBlocks_new = customBlocks.filter(\n      (customBlock) =>\n        customBlock[0] !== block_colourSetId ||\n        customBlock[1].displayName !== block_name_trimmed ||\n        !Object.values(SupportedVersions).some(\n          (supportedVersion_value) =>\n            supportedVersion_value.MCVersion in customBlock[1].validVersions && supportedVersion_value.MCVersion in blockToAdd.validVersions\n        )\n    ); // filter removes customBlocks that have the same colourSet, name, and some versions in common as the one we are adding. For example this allows us to add different 1.12.2 and 1.13+ versions of a block\n    customBlocks_new.push([block_colourSetId, blockToAdd]);\n\n    this.setState((currentState) => {\n      return { coloursJSON: this.getMergedColoursJSON(customBlocks_new), selectedBlocks: { ...currentState.selectedBlocks, [block_colourSetId]: \"-1\" } };\n    });\n    CookieManager.setCookie(\"mapartcraft_customBlocks\", JSON.stringify(customBlocks_new));\n  };\n\n  handleDeleteCustomBlock = (block_colourSetId, block_name, block_versions) => {\n    const block_name_trimmed = block_name.trim();\n    if (block_name_trimmed === \"\" || Object.values(block_versions).every((t) => !t)) {\n      return;\n    }\n\n    let validVersions = [];\n    for (const [block_version, block_version_isSelected] of Object.entries(block_versions)) {\n      if (block_version_isSelected) {\n        validVersions.push(SupportedVersions[block_version].MCVersion);\n      }\n    }\n\n    const customBlocks = JSON.parse(CookieManager.getCookie(\"mapartcraft_customBlocks\"));\n    let customBlocks_new = customBlocks.filter(\n      (customBlock) =>\n        customBlock[0] !== block_colourSetId ||\n        customBlock[1].displayName !== block_name_trimmed ||\n        !Object.values(SupportedVersions).some(\n          (supportedVersion_value) =>\n            supportedVersion_value.MCVersion in customBlock[1].validVersions && validVersions.includes(supportedVersion_value.MCVersion)\n        )\n    );\n\n    this.setState((currentState) => {\n      return {\n        coloursJSON: this.getMergedColoursJSON(customBlocks_new),\n        selectedBlocks: { ...currentState.selectedBlocks, [block_colourSetId]: \"-1\" },\n        currentMaterialsData: {\n          // reset currentMaterialsData as materials.js uses a cached version of materials which could contain blocks which no longer exist\n          pixelsData: null,\n          maps: [[]],\n          chunks:[[]],\n          currentSelectedBlocks: {},\n        },\n      };\n    });\n    CookieManager.setCookie(\"mapartcraft_customBlocks\", JSON.stringify(customBlocks_new));\n  };\n\n  render() {\n    const { getLocaleString } = this.props;\n    const {\n      coloursJSON,\n      selectedBlocks,\n      optionValue_version,\n      optionValue_modeNBTOrMapdat,\n      optionValue_mapSize_x,\n      optionValue_mapSize_y,\n      optionValue_cropImage,\n      optionValue_cropImage_zoom,\n      optionValue_cropImage_percent_x,\n      optionValue_cropImage_percent_y,\n      optionValue_showGridOverlay,\n      optionValue_staircasing,\n      optionValue_whereSupportBlocks,\n      optionValue_supportBlock,\n      optionValue_transparency,\n      optionValue_transparencyTolerance,\n      optionValue_mapdatFilenameUseId,\n      optionValue_mapdatFilenameIdStart,\n      optionValue_betterColour,\n      optionValue_dithering,\n      optionValue_preprocessingEnabled,\n      preProcessingValue_brightness,\n      preProcessingValue_contrast,\n      preProcessingValue_saturation,\n      preProcessingValue_backgroundColourSelect,\n      preProcessingValue_backgroundColour,\n      optionValue_extras_moreStaircasingOptions,\n      uploadedImage,\n      uploadedImage_baseFilename,\n      presets,\n      selectedPresetName,\n      currentMaterialsData,\n      mapPreviewWorker_inProgress,\n      viewOnline_NBT,\n      viewOnline_3D,\n    } = this.state;\n    return (\n      <div className=\"mapartController\">\n        <BlockSelection\n          getLocaleString={getLocaleString}\n          coloursJSON={coloursJSON}\n          onChangeColourSetBlock={this.handleChangeColourSetBlock}\n          optionValue_version={optionValue_version}\n          optionValue_modeNBTOrMapdat={optionValue_modeNBTOrMapdat}\n          optionValue_staircasing={optionValue_staircasing}\n          selectedBlocks={selectedBlocks}\n          presets={presets}\n          selectedPresetName={selectedPresetName}\n          canDeletePreset={this.canDeletePreset}\n          onPresetChange={this.handlePresetChange}\n          onDeletePreset={this.handleDeletePreset}\n          onSavePreset={this.handleSavePreset}\n          onSharePreset={this.handleSharePreset}\n          onGetPDNPaletteClicked={this.handleGetPDNPaletteClicked}\n          handleAddCustomBlock={this.handleAddCustomBlock}\n          handleDeleteCustomBlock={this.handleDeleteCustomBlock}\n        />\n        <div className=\"sectionsPreviewSettingsMaterials\">\n          <MapPreview\n            getLocaleString={getLocaleString}\n            coloursJSON={coloursJSON}\n            selectedBlocks={selectedBlocks}\n            optionValue_version={optionValue_version}\n            optionValue_modeNBTOrMapdat={optionValue_modeNBTOrMapdat}\n            optionValue_mapSize_x={optionValue_mapSize_x}\n            optionValue_mapSize_y={optionValue_mapSize_y}\n            optionValue_cropImage={optionValue_cropImage}\n            optionValue_cropImage_zoom={optionValue_cropImage_zoom}\n            optionValue_cropImage_percent_x={optionValue_cropImage_percent_x}\n            optionValue_cropImage_percent_y={optionValue_cropImage_percent_y}\n            optionValue_showGridOverlay={optionValue_showGridOverlay}\n            optionValue_staircasing={optionValue_staircasing}\n            optionValue_whereSupportBlocks={optionValue_whereSupportBlocks}\n            optionValue_transparency={optionValue_transparency}\n            optionValue_transparencyTolerance={optionValue_transparencyTolerance}\n            optionValue_betterColour={optionValue_betterColour}\n            optionValue_dithering={optionValue_dithering}\n            optionValue_preprocessingEnabled={optionValue_preprocessingEnabled}\n            preProcessingValue_brightness={preProcessingValue_brightness}\n            preProcessingValue_contrast={preProcessingValue_contrast}\n            preProcessingValue_saturation={preProcessingValue_saturation}\n            preProcessingValue_backgroundColourSelect={preProcessingValue_backgroundColourSelect}\n            preProcessingValue_backgroundColour={preProcessingValue_backgroundColour}\n            uploadedImage={uploadedImage}\n            onFileDialogEvent={this.onFileDialogEvent}\n            onGetMapMaterials={this.handleSetMapMaterials}\n            onMapPreviewWorker_begin={this.onMapPreviewWorker_begin}\n          />\n          <div style={{ display: \"block\" }}>\n            <MapSettings\n              getLocaleString={getLocaleString}\n              coloursJSON={coloursJSON}\n              optionValue_version={optionValue_version}\n              onOptionChange_version={this.onOptionChange_version}\n              optionValue_modeNBTOrMapdat={optionValue_modeNBTOrMapdat}\n              onOptionChange_modeNBTOrMapdat={this.onOptionChange_modeNBTOrMapdat}\n              optionValue_mapSize_x={optionValue_mapSize_x}\n              onOptionChange_mapSize_x={this.onOptionChange_mapSize_x}\n              optionValue_mapSize_y={optionValue_mapSize_y}\n              onOptionChange_mapSize_y={this.onOptionChange_mapSize_y}\n              optionValue_cropImage={optionValue_cropImage}\n              onOptionChange_cropImage={this.onOptionChange_cropImage}\n              optionValue_cropImage_zoom={optionValue_cropImage_zoom}\n              onOptionChange_cropImage_zoom={this.onOptionChange_cropImage_zoom}\n              optionValue_cropImage_percent_x={optionValue_cropImage_percent_x}\n              onOptionChange_cropImage_percent_x={this.onOptionChange_cropImage_percent_x}\n              optionValue_cropImage_percent_y={optionValue_cropImage_percent_y}\n              onOptionChange_cropImage_percent_y={this.onOptionChange_cropImage_percent_y}\n              optionValue_showGridOverlay={optionValue_showGridOverlay}\n              onOptionChange_showGridOverlay={this.onOptionChange_showGridOverlay}\n              optionValue_staircasing={optionValue_staircasing}\n              onOptionChange_staircasing={this.onOptionChange_staircasing}\n              optionValue_whereSupportBlocks={optionValue_whereSupportBlocks}\n              onOptionChange_WhereSupportBlocks={this.onOptionChange_WhereSupportBlocks}\n              optionValue_supportBlock={optionValue_supportBlock}\n              setOption_SupportBlock={this.setOption_SupportBlock}\n              optionValue_transparency={optionValue_transparency}\n              onOptionChange_transparency={this.onOptionChange_transparency}\n              optionValue_transparencyTolerance={optionValue_transparencyTolerance}\n              onOptionChange_transparencyTolerance={this.onOptionChange_transparencyTolerance}\n              optionValue_mapdatFilenameUseId={optionValue_mapdatFilenameUseId}\n              onOptionChange_mapdatFilenameUseId={this.onOptionChange_mapdatFilenameUseId}\n              optionValue_mapdatFilenameIdStart={optionValue_mapdatFilenameIdStart}\n              onOptionChange_mapdatFilenameIdStart={this.onOptionChange_mapdatFilenameIdStart}\n              optionValue_betterColour={optionValue_betterColour}\n              onOptionChange_BetterColour={this.onOptionChange_BetterColour}\n              optionValue_dithering={optionValue_dithering}\n              onOptionChange_dithering={this.onOptionChange_dithering}\n              optionValue_preprocessingEnabled={optionValue_preprocessingEnabled}\n              onOptionChange_PreProcessingEnabled={this.onOptionChange_PreProcessingEnabled}\n              preProcessingValue_brightness={preProcessingValue_brightness}\n              onOptionChange_PreProcessingBrightness={this.onOptionChange_PreProcessingBrightness}\n              preProcessingValue_contrast={preProcessingValue_contrast}\n              onOptionChange_PreProcessingContrast={this.onOptionChange_PreProcessingContrast}\n              preProcessingValue_saturation={preProcessingValue_saturation}\n              onOptionChange_PreProcessingSaturation={this.onOptionChange_PreProcessingSaturation}\n              preProcessingValue_backgroundColourSelect={preProcessingValue_backgroundColourSelect}\n              onOptionChange_PreProcessingBackgroundColourSelect={this.onOptionChange_PreProcessingBackgroundColourSelect}\n              preProcessingValue_backgroundColour={preProcessingValue_backgroundColour}\n              onOptionChange_PreProcessingBackgroundColour={this.onOptionChange_PreProcessingBackgroundColour}\n              optionValue_extras_moreStaircasingOptions={optionValue_extras_moreStaircasingOptions}\n              onOptionChange_extras_moreStaircasingOptions={this.onOptionChange_extras_moreStaircasingOptions}\n            />\n            <GreenButtons\n              getLocaleString={getLocaleString}\n              coloursJSON={coloursJSON}\n              selectedBlocks={selectedBlocks}\n              optionValue_version={optionValue_version}\n              optionValue_modeNBTOrMapdat={optionValue_modeNBTOrMapdat}\n              optionValue_mapSize_x={optionValue_mapSize_x}\n              optionValue_mapSize_y={optionValue_mapSize_y}\n              optionValue_cropImage={optionValue_cropImage}\n              optionValue_cropImage_zoom={optionValue_cropImage_zoom}\n              optionValue_cropImage_percent_x={optionValue_cropImage_percent_x}\n              optionValue_cropImage_percent_y={optionValue_cropImage_percent_y}\n              optionValue_staircasing={optionValue_staircasing}\n              optionValue_whereSupportBlocks={optionValue_whereSupportBlocks}\n              optionValue_supportBlock={optionValue_supportBlock}\n              optionValue_transparency={optionValue_transparency}\n              optionValue_transparencyTolerance={optionValue_transparencyTolerance}\n              optionValue_mapdatFilenameUseId={optionValue_mapdatFilenameUseId}\n              optionValue_mapdatFilenameIdStart={optionValue_mapdatFilenameIdStart}\n              optionValue_betterColour={optionValue_betterColour}\n              optionValue_dithering={optionValue_dithering}\n              optionValue_preprocessingEnabled={optionValue_preprocessingEnabled}\n              preProcessingValue_brightness={preProcessingValue_brightness}\n              preProcessingValue_contrast={preProcessingValue_contrast}\n              preProcessingValue_saturation={preProcessingValue_saturation}\n              preProcessingValue_backgroundColourSelect={preProcessingValue_backgroundColourSelect}\n              preProcessingValue_backgroundColour={preProcessingValue_backgroundColour}\n              uploadedImage={uploadedImage}\n              uploadedImage_baseFilename={uploadedImage_baseFilename}\n              currentMaterialsData={currentMaterialsData}\n              mapPreviewWorker_inProgress={mapPreviewWorker_inProgress}\n              downloadBlobFile={this.downloadBlobFile}\n              onGetViewOnlineNBT={this.onGetViewOnlineNBT}\n            />\n          </div>\n          {optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId ? (\n            <Materials\n              getLocaleString={getLocaleString}\n              coloursJSON={coloursJSON}\n              optionValue_version={optionValue_version}\n              optionValue_supportBlock={optionValue_supportBlock}\n              currentMaterialsData={currentMaterialsData}\n            />\n          ) : null}\n        </div>\n        {viewOnline_NBT !== null &&\n          (viewOnline_3D ? (\n            <ViewOnline3D\n              getLocaleString={getLocaleString}\n              coloursJSON={coloursJSON}\n              optionValue_version={optionValue_version}\n              optionValue_mapSize_x={optionValue_mapSize_x}\n              optionValue_mapSize_y={optionValue_mapSize_y}\n              viewOnline_NBT={viewOnline_NBT}\n              handleViewOnline3DEscape={this.handleViewOnline3DEscape}\n            />\n          ) : (\n            <ViewOnline2D\n              getLocaleString={getLocaleString}\n              coloursJSON={coloursJSON}\n              optionValue_version={optionValue_version}\n              optionValue_mapSize_x={optionValue_mapSize_x}\n              optionValue_mapSize_y={optionValue_mapSize_y}\n              optionValue_staircasing={optionValue_staircasing}\n              viewOnline_NBT={viewOnline_NBT}\n              onGetViewOnlineNBT={this.onGetViewOnlineNBT}\n              onChooseViewOnline3D={this.onChooseViewOnline3D}\n            />\n          ))}\n      </div>\n    );\n  }\n}\n\nexport default MapartController;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANMSURBVHhe7d3PahNRGIbxowv/IHZjcS2uxL3gDXgV3oDgvXgXXoVegOC+iAv3lm6sSGIjKBPmg+Mwk2SSMzPfd573gaEmTJuU99dpRUlvvXn39m9S2G63bxU0AYAnAPAEAJ4AwBMAeAIADwtg9WOVvny4SJvVTXsPMySA7fgfL9LPy+vtWzICHAAb/896s729vl6jEaAAdMe3yAgwAIbGt6gIEAD2jW8REVQP4NDxLRqCqgGMHd8iIagWwLHjWxQEVQI4dXyLgKA6AKXGt2pHUBWA0uNbNSOoBsBU41u1IqgCwNTjWzUiCA9grvGt2hCEBjD3+FZNCMICWGp8qxYEIQEsPb5VA4JwALyMb0VHEAqAt/GtyAjCAPA6vhUVQQgA3se3IiJwDyDK+FY0BK4BRBvfioTALYCo41tRELgEEH18KwICdwBqGd/yjsAVgNrGtzwjcAOg1vEtrwhcAKh9fMsjgsUBUMa3vCFYFABtfMsTgsUAUMe3vCBYBAB9fMsDgtkBaPz/WxrBrAA0fn9LIpgNgMbf3VIIZgGg8Q9rCQSTA9D445obwaQANP5xzYlg0t8XcPn1e9qsy30SV9+u0s2v3+0tf915cDedPz1vb53evbP76dGTch+vr1C/MKJ5Ycfmtf289vDxWXr26nl7K0az/jVQ+UsA4AkAPAGAJwDwBACeAMATAHgCAE8A4AkAPAGAJwDwBACeAMATAHgCAE8A4AkAPAGAJwDwBACeAMATAHgCAE8A4AkAPAGAJwDwBACeAMATAHgCAE8A4AkAPAGAJwDwBACeAMAL9TqBqny6AsATAHgCAE8A4AkAPAGAJwDwBACeAMATAHgCAE8A4BX9x6DP7z+1fxruxeuX27f5uX33DbXr/ZuG7u927ONbpz7noY4595R0BYA3GYBGpx3HlL9/fsxV97EOeewxzzM/Nz/66juvOUqkKwC8yQA038PsmLruY5X8ChlT93nsKz9/1/v1ndccJdIVAN4sPwPkxxR1P37Jr5AxdZ/Hvg49N/+4+VEiXQHguQWQf6/Lj1oa8znl5+ZHiXQFgKf/Fg5PVwB4AgBPAOAJADwBgCcA8AQAngDAEwB4AgBPAOAJADwBgCcA8AQAXUr/ADWYPUK6/RieAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/flag.c754c87b.svg\";","export default __webpack_public_path__ + \"static/media/flag.014db69c.svg\";","export default __webpack_public_path__ + \"static/media/flag.64f4888d.svg\";","export default __webpack_public_path__ + \"static/media/flag.747b050b.svg\";","export default __webpack_public_path__ + \"static/media/flag.12ca02a6.svg\";","export default __webpack_public_path__ + \"static/media/flag.44571d53.svg\";","export default __webpack_public_path__ + \"static/media/flag_pop.431e7ad3.svg\";","export default __webpack_public_path__ + \"static/media/flag.35ce7c3e.svg\";","export default __webpack_public_path__ + \"static/media/flag.1b3cea31.svg\";","export default __webpack_public_path__ + \"static/media/flag.737a72cb.svg\";","export default __webpack_public_path__ + \"static/media/flag.ebbaa856.svg\";","export default __webpack_public_path__ + \"static/media/flag.ea275ed5.svg\";","export default __webpack_public_path__ + \"static/media/flag.ee26f64c.svg\";","export default __webpack_public_path__ + \"static/media/flag.74963cac.svg\";","export default __webpack_public_path__ + \"static/media/flag.0f2053ce.svg\";","import Flag_de from \"./de/flag.svg\";\nimport Strings_de from \"./de/strings.json\";\n\nimport Flag_ua from \"./ua/flag.svg\";\nimport Strings_ua from \"./ua/strings.json\";\n\nimport Flag_en from \"./en/flag.svg\";\nimport Strings_en from \"./en/strings.json\";\n\nimport Flag_eo from \"./eo/flag.svg\";\nimport Strings_eo from \"./eo/strings.json\";\n\nimport Flag_es from \"./es/flag.svg\";\nimport Strings_es from \"./es/strings.json\";\n\nimport Flag_et from \"./et/flag.svg\";\nimport Flag_et_pop from \"./et/flag_pop.svg\";\nimport Strings_et from \"./et/strings.json\";\n\nimport Flag_fr from \"./fr/flag.svg\";\nimport Strings_fr from \"./fr/strings.json\";\n\nimport Flag_it from \"./it/flag.svg\";\nimport Strings_it from \"./it/strings.json\";\n\nimport Flag_lt from \"./lt/flag.svg\";\nimport Strings_lt from \"./lt/strings.json\";\n\nimport Flag_pt from \"./pt/flag.svg\";\nimport Strings_pt from \"./pt/strings.json\";\n\nimport Flag_ru from \"./ru/flag.svg\";\nimport Strings_ru from \"./ru/strings.json\";\n\nimport Flag_zh_Hans from \"./zh-Hans/flag.svg\";\nimport Strings_zh_Hans from \"./zh-Hans/strings.json\";\n\nimport Flag_zh_Hant from \"./zh-Hant/flag.svg\";\nimport Strings_zh_Hant from \"./zh-Hant/strings.json\";\n\nimport Flag_pl from \"./pl/flag.svg\";\nimport Strings_pl from \"./pl/strings.json\";\n\nconst Locale = {\n  en: { strings: Strings_en, flag: Flag_en },\n  ua: { strings: Strings_ua, flag: Flag_ua },\n  et: { strings: Strings_et, flag: Flag_et, flag_special: Flag_et_pop },\n  lt: { strings: Strings_lt, flag: Flag_lt },\n  ru: { strings: Strings_ru, flag: Flag_ru },\n  de: { strings: Strings_de, flag: Flag_de },\n  pl: { strings: Strings_pl, flag: Flag_pl },\n  fr: { strings: Strings_fr, flag: Flag_fr },\n  it: { strings: Strings_it, flag: Flag_it },\n  pt: { strings: Strings_pt, flag: Flag_pt },\n  es: { strings: Strings_es, flag: Flag_es },\n  \"zh-Hans\": { strings: Strings_zh_Hans, flag: Flag_zh_Hans },\n  \"zh-Hant\": { strings: Strings_zh_Hant, flag: Flag_zh_Hant },\n  eo: { strings: Strings_eo, flag: Flag_eo },\n};\n\nexport default Locale;\n","import React, { Component } from 'react'\n\nimport Header from './header'\nimport MapartController from './mapart/mapartController'\n\nimport Locale from '../locale/locale'\n\nimport './root.css'\n\nclass Root extends Component {\n\tstate = {\n\t\tdisplayingCorruptedPresetWarning: false,\n\t\tdisplayingEdgeWarning: false,\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\t//show warning when using Edge\n\t\tif (\n\t\t\t!(/*@cc_on!@*/ (false || !!document['documentMode'])) &&\n\t\t\t!!window['StyleMedia']\n\t\t) {\n\t\t\tthis.state.displayingEdgeWarning = true\n\t\t}\n\t}\n\n\tgetLocaleString = (stringName, languageCodeOverride) => {\n\t\t// languageCodeOverride only used inside this method for falling back to en\n\t\tconst countryCode =\n\t\t\tlanguageCodeOverride !== undefined\n\t\t\t\t? languageCodeOverride\n\t\t\t\t: this.props.match.params.countryCode\n\t\tif (countryCode in Locale) {\n\t\t\tlet stringSegments = stringName.split('/')\n\t\t\tconst stringLast = stringSegments.pop()\n\t\t\tlet folder = Locale[countryCode].strings\n\t\t\tfor (const stringSegment of stringSegments) {\n\t\t\t\tfolder = folder[stringSegment]\n\t\t\t}\n\t\t\tif (folder[stringLast] === null) {\n\t\t\t\t// this could get stuck in an endless loop if the string does not exist in en;\n\t\t\t\t// en must always exist\n\t\t\t\treturn this.getLocaleString(stringName, 'ru')\n\t\t\t} else {\n\t\t\t\treturn folder[stringLast]\n\t\t\t}\n\t\t} else {\n\t\t\treturn this.getLocaleString(stringName, 'ru')\n\t\t}\n\t}\n\n\tonEdgeWarningButtonClick = () => {\n\t\tthis.setState({ displayingEdgeWarning: false })\n\t}\n\n\tonCorruptedPresetWarningButtonClick = () => {\n\t\tthis.setState({ displayingCorruptedPresetWarning: false })\n\t}\n\n\tshowCorruptedPresetWarning = () => {\n\t\tthis.setState({ displayingCorruptedPresetWarning: true })\n\t}\n\n\trender() {\n\t\tconst { displayingCorruptedPresetWarning, displayingEdgeWarning } =\n\t\t\tthis.state\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className='titleAndLanguages'>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<h1>MapartCraft</h1>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<Header\n\t\t\t\t\tgetLocaleString={this.getLocaleString}\n\t\t\t\t\tcountryCode={this.props.match.params.countryCode}\n\t\t\t\t/>\n\t\t\t\t<MapartController\n\t\t\t\t\tgetLocaleString={this.getLocaleString}\n\t\t\t\t\tonCorruptedPreset={this.showCorruptedPresetWarning}\n\t\t\t\t/>\n\t\t\t\t<div className='fixedMessages'>\n\t\t\t\t\t{displayingEdgeWarning ? (\n\t\t\t\t\t\t<div className='fixedMessage'>\n\t\t\t\t\t\t\t<p>{this.getLocaleString('EDGE-WARNING').replace('\\\\n', '\\n')}</p>\n\t\t\t\t\t\t\t<button type='button' onClick={this.onEdgeWarningButtonClick}>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{displayingCorruptedPresetWarning ? (\n\t\t\t\t\t\t<div className='fixedMessage'>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{this.getLocaleString(\n\t\t\t\t\t\t\t\t\t'BLOCK-SELECTION/PRESETS/IMPORT-ERROR-CORRUPTED'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tonClick={this.onCorruptedPresetWarningButtonClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\nexport default Root\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Route, BrowserRouter as Router, Switch } from 'react-router-dom'\n\nimport Root from './components/root'\n\nimport './index.css'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Router basename='/'>\n\t\t\t<Switch>\n\t\t\t\t<Route path='/:countryCode?' component={Root} />\n\t\t\t</Switch>\n\t\t</Router>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n"],"sourceRoot":""}